import{r as Vv,g as fs,c as Yi,e as Qr,a as kv,E as fu,_ as Gv}from"./index-7485d795.js";import{s as Wv,f as Yv,a as Jv,d as Xv,g as Zv,b as ip,c as Qv,e as eb,h as tb,i as pu,j as Fl,k as rb,l as ib,m as np,n as du,p as nb,J as Pi,o as gu,q as _u,r as yu,t as Si,u as fi,v as vu,w as sp,H as Xi}from"./http-88b22606.js";var bu={},Ua={},Ue={},ap={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(f,_){var g=f>>>16&65535,w=f&65535,A=_>>>16&65535,I=_&65535;return w*I+(g*I+w*A<<16>>>0)|0}i.mul=Math.imul||e;function t(f,_){return f+_|0}i.add=t;function s(f,_){return f-_|0}i.sub=s;function a(f,_){return f<<_|f>>>32-_}i.rotl=a;function c(f,_){return f<<32-_|f>>>_}i.rotr=c;function p(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}i.isInteger=Number.isInteger||p,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(f){return i.isInteger(f)&&f>=-i.MAX_SAFE_INTEGER&&f<=i.MAX_SAFE_INTEGER}})(ap);Object.defineProperty(Ue,"__esModule",{value:!0});var op=ap;function sb(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}Ue.readInt16BE=sb;function ab(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}Ue.readUint16BE=ab;function ob(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}Ue.readInt16LE=ob;function cb(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}Ue.readUint16LE=cb;function cp(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>8,e[t+1]=i>>>0,e}Ue.writeUint16BE=cp;Ue.writeInt16BE=cp;function up(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e}Ue.writeUint16LE=up;Ue.writeInt16LE=up;function Lc(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}Ue.readInt32BE=Lc;function Mc(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}Ue.readUint32BE=Mc;function qc(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}Ue.readInt32LE=qc;function zc(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}Ue.readUint32LE=zc;function Pa(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>24,e[t+1]=i>>>16,e[t+2]=i>>>8,e[t+3]=i>>>0,e}Ue.writeUint32BE=Pa;Ue.writeInt32BE=Pa;function Ca(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e[t+2]=i>>>16,e[t+3]=i>>>24,e}Ue.writeUint32LE=Ca;Ue.writeInt32LE=Ca;function ub(i,e){e===void 0&&(e=0);var t=Lc(i,e),s=Lc(i,e+4);return t*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=ub;function hb(i,e){e===void 0&&(e=0);var t=Mc(i,e),s=Mc(i,e+4);return t*4294967296+s}Ue.readUint64BE=hb;function lb(i,e){e===void 0&&(e=0);var t=qc(i,e),s=qc(i,e+4);return s*4294967296+t-(t>>31)*4294967296}Ue.readInt64LE=lb;function fb(i,e){e===void 0&&(e=0);var t=zc(i,e),s=zc(i,e+4);return s*4294967296+t}Ue.readUint64LE=fb;function hp(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Pa(i/4294967296>>>0,e,t),Pa(i>>>0,e,t+4),e}Ue.writeUint64BE=hp;Ue.writeInt64BE=hp;function lp(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Ca(i>>>0,e,t),Ca(i/4294967296>>>0,e,t+4),e}Ue.writeUint64LE=lp;Ue.writeInt64LE=lp;function pb(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,a=1,c=i/8+t-1;c>=t;c--)s+=e[c]*a,a*=256;return s}Ue.readUintBE=pb;function db(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,a=1,c=t;c<t+i/8;c++)s+=e[c]*a,a*=256;return s}Ue.readUintLE=db;function gb(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!op.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var a=1,c=i/8+s-1;c>=s;c--)t[c]=e/a&255,a*=256;return t}Ue.writeUintBE=gb;function _b(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!op.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var a=1,c=s;c<s+i/8;c++)t[c]=e/a&255,a*=256;return t}Ue.writeUintLE=_b;function yb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e)}Ue.readFloat32BE=yb;function vb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e,!0)}Ue.readFloat32LE=vb;function bb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e)}Ue.readFloat64BE=bb;function mb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e,!0)}Ue.readFloat64LE=mb;function wb(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i),e}Ue.writeFloat32BE=wb;function Eb(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i,!0),e}Ue.writeFloat32LE=Eb;function Db(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i),e}Ue.writeFloat64BE=Db;function Sb(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i,!0),e}Ue.writeFloat64LE=Sb;var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});function Ib(i){for(var e=0;e<i.length;e++)i[e]=0;return i}Dr.wipe=Ib;Object.defineProperty(Ua,"__esModule",{value:!0});var Zt=Ue,Hc=Dr,xb=20;function Ob(i,e,t){for(var s=1634760805,a=857760878,c=2036477234,p=1797285236,f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],_=t[7]<<24|t[6]<<16|t[5]<<8|t[4],g=t[11]<<24|t[10]<<16|t[9]<<8|t[8],w=t[15]<<24|t[14]<<16|t[13]<<8|t[12],A=t[19]<<24|t[18]<<16|t[17]<<8|t[16],I=t[23]<<24|t[22]<<16|t[21]<<8|t[20],C=t[27]<<24|t[26]<<16|t[25]<<8|t[24],U=t[31]<<24|t[30]<<16|t[29]<<8|t[28],H=e[3]<<24|e[2]<<16|e[1]<<8|e[0],J=e[7]<<24|e[6]<<16|e[5]<<8|e[4],se=e[11]<<24|e[10]<<16|e[9]<<8|e[8],T=e[15]<<24|e[14]<<16|e[13]<<8|e[12],j=s,S=a,O=c,m=p,u=f,b=_,K=g,k=w,ae=A,ce=I,ge=C,R=U,z=H,le=J,te=se,G=T,ee=0;ee<xb;ee+=2)j=j+u|0,z^=j,z=z>>>32-16|z<<16,ae=ae+z|0,u^=ae,u=u>>>32-12|u<<12,S=S+b|0,le^=S,le=le>>>32-16|le<<16,ce=ce+le|0,b^=ce,b=b>>>32-12|b<<12,O=O+K|0,te^=O,te=te>>>32-16|te<<16,ge=ge+te|0,K^=ge,K=K>>>32-12|K<<12,m=m+k|0,G^=m,G=G>>>32-16|G<<16,R=R+G|0,k^=R,k=k>>>32-12|k<<12,O=O+K|0,te^=O,te=te>>>32-8|te<<8,ge=ge+te|0,K^=ge,K=K>>>32-7|K<<7,m=m+k|0,G^=m,G=G>>>32-8|G<<8,R=R+G|0,k^=R,k=k>>>32-7|k<<7,S=S+b|0,le^=S,le=le>>>32-8|le<<8,ce=ce+le|0,b^=ce,b=b>>>32-7|b<<7,j=j+u|0,z^=j,z=z>>>32-8|z<<8,ae=ae+z|0,u^=ae,u=u>>>32-7|u<<7,j=j+b|0,G^=j,G=G>>>32-16|G<<16,ge=ge+G|0,b^=ge,b=b>>>32-12|b<<12,S=S+K|0,z^=S,z=z>>>32-16|z<<16,R=R+z|0,K^=R,K=K>>>32-12|K<<12,O=O+k|0,le^=O,le=le>>>32-16|le<<16,ae=ae+le|0,k^=ae,k=k>>>32-12|k<<12,m=m+u|0,te^=m,te=te>>>32-16|te<<16,ce=ce+te|0,u^=ce,u=u>>>32-12|u<<12,O=O+k|0,le^=O,le=le>>>32-8|le<<8,ae=ae+le|0,k^=ae,k=k>>>32-7|k<<7,m=m+u|0,te^=m,te=te>>>32-8|te<<8,ce=ce+te|0,u^=ce,u=u>>>32-7|u<<7,S=S+K|0,z^=S,z=z>>>32-8|z<<8,R=R+z|0,K^=R,K=K>>>32-7|K<<7,j=j+b|0,G^=j,G=G>>>32-8|G<<8,ge=ge+G|0,b^=ge,b=b>>>32-7|b<<7;Zt.writeUint32LE(j+s|0,i,0),Zt.writeUint32LE(S+a|0,i,4),Zt.writeUint32LE(O+c|0,i,8),Zt.writeUint32LE(m+p|0,i,12),Zt.writeUint32LE(u+f|0,i,16),Zt.writeUint32LE(b+_|0,i,20),Zt.writeUint32LE(K+g|0,i,24),Zt.writeUint32LE(k+w|0,i,28),Zt.writeUint32LE(ae+A|0,i,32),Zt.writeUint32LE(ce+I|0,i,36),Zt.writeUint32LE(ge+C|0,i,40),Zt.writeUint32LE(R+U|0,i,44),Zt.writeUint32LE(z+H|0,i,48),Zt.writeUint32LE(le+J|0,i,52),Zt.writeUint32LE(te+se|0,i,56),Zt.writeUint32LE(G+T|0,i,60)}function fp(i,e,t,s,a){if(a===void 0&&(a=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,p;if(a===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),p=c.length-e.length,c.set(e,p)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,p=a}for(var f=new Uint8Array(64),_=0;_<t.length;_+=64){Ob(f,c,i);for(var g=_;g<_+64&&g<t.length;g++)s[g]=t[g]^f[g-_];Cb(c,0,p)}return Hc.wipe(f),a===0&&Hc.wipe(c),s}Ua.streamXOR=fp;function Pb(i,e,t,s){return s===void 0&&(s=0),Hc.wipe(t),fp(i,e,t,t,s)}Ua.stream=Pb;function Cb(i,e,t){for(var s=1;t--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var pp={},Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});function Ab(i,e,t){return~(i-1)&e|i-1&t}Ci.select=Ab;function Tb(i,e){return(i|0)-(e|0)-1>>>31&1}Ci.lessOrEqual=Tb;function dp(i,e){if(i.length!==e.length)return 0;for(var t=0,s=0;s<i.length;s++)t|=i[s]^e[s];return 1&t-1>>>8}Ci.compare=dp;function Nb(i,e){return i.length===0||e.length===0?!1:dp(i,e)!==0}Ci.equal=Nb;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ci,t=Dr;i.DIGEST_LENGTH=16;var s=function(){function p(f){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var _=f[0]|f[1]<<8;this._r[0]=_&8191;var g=f[2]|f[3]<<8;this._r[1]=(_>>>13|g<<3)&8191;var w=f[4]|f[5]<<8;this._r[2]=(g>>>10|w<<6)&7939;var A=f[6]|f[7]<<8;this._r[3]=(w>>>7|A<<9)&8191;var I=f[8]|f[9]<<8;this._r[4]=(A>>>4|I<<12)&255,this._r[5]=I>>>1&8190;var C=f[10]|f[11]<<8;this._r[6]=(I>>>14|C<<2)&8191;var U=f[12]|f[13]<<8;this._r[7]=(C>>>11|U<<5)&8065;var H=f[14]|f[15]<<8;this._r[8]=(U>>>8|H<<8)&8191,this._r[9]=H>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return p.prototype._blocks=function(f,_,g){for(var w=this._fin?0:2048,A=this._h[0],I=this._h[1],C=this._h[2],U=this._h[3],H=this._h[4],J=this._h[5],se=this._h[6],T=this._h[7],j=this._h[8],S=this._h[9],O=this._r[0],m=this._r[1],u=this._r[2],b=this._r[3],K=this._r[4],k=this._r[5],ae=this._r[6],ce=this._r[7],ge=this._r[8],R=this._r[9];g>=16;){var z=f[_+0]|f[_+1]<<8;A+=z&8191;var le=f[_+2]|f[_+3]<<8;I+=(z>>>13|le<<3)&8191;var te=f[_+4]|f[_+5]<<8;C+=(le>>>10|te<<6)&8191;var G=f[_+6]|f[_+7]<<8;U+=(te>>>7|G<<9)&8191;var ee=f[_+8]|f[_+9]<<8;H+=(G>>>4|ee<<12)&8191,J+=ee>>>1&8191;var W=f[_+10]|f[_+11]<<8;se+=(ee>>>14|W<<2)&8191;var re=f[_+12]|f[_+13]<<8;T+=(W>>>11|re<<5)&8191;var xe=f[_+14]|f[_+15]<<8;j+=(re>>>8|xe<<8)&8191,S+=xe>>>5|w;var ie=0,me=ie;me+=A*O,me+=I*(5*R),me+=C*(5*ge),me+=U*(5*ce),me+=H*(5*ae),ie=me>>>13,me&=8191,me+=J*(5*k),me+=se*(5*K),me+=T*(5*b),me+=j*(5*u),me+=S*(5*m),ie+=me>>>13,me&=8191;var he=ie;he+=A*m,he+=I*O,he+=C*(5*R),he+=U*(5*ge),he+=H*(5*ce),ie=he>>>13,he&=8191,he+=J*(5*ae),he+=se*(5*k),he+=T*(5*K),he+=j*(5*b),he+=S*(5*u),ie+=he>>>13,he&=8191;var ve=ie;ve+=A*u,ve+=I*m,ve+=C*O,ve+=U*(5*R),ve+=H*(5*ge),ie=ve>>>13,ve&=8191,ve+=J*(5*ce),ve+=se*(5*ae),ve+=T*(5*k),ve+=j*(5*K),ve+=S*(5*b),ie+=ve>>>13,ve&=8191;var q=ie;q+=A*b,q+=I*u,q+=C*m,q+=U*O,q+=H*(5*R),ie=q>>>13,q&=8191,q+=J*(5*ge),q+=se*(5*ce),q+=T*(5*ae),q+=j*(5*k),q+=S*(5*K),ie+=q>>>13,q&=8191;var M=ie;M+=A*K,M+=I*b,M+=C*u,M+=U*m,M+=H*O,ie=M>>>13,M&=8191,M+=J*(5*R),M+=se*(5*ge),M+=T*(5*ce),M+=j*(5*ae),M+=S*(5*k),ie+=M>>>13,M&=8191;var N=ie;N+=A*k,N+=I*K,N+=C*b,N+=U*u,N+=H*m,ie=N>>>13,N&=8191,N+=J*O,N+=se*(5*R),N+=T*(5*ge),N+=j*(5*ce),N+=S*(5*ae),ie+=N>>>13,N&=8191;var l=ie;l+=A*ae,l+=I*k,l+=C*K,l+=U*b,l+=H*u,ie=l>>>13,l&=8191,l+=J*m,l+=se*O,l+=T*(5*R),l+=j*(5*ge),l+=S*(5*ce),ie+=l>>>13,l&=8191;var x=ie;x+=A*ce,x+=I*ae,x+=C*k,x+=U*K,x+=H*b,ie=x>>>13,x&=8191,x+=J*u,x+=se*m,x+=T*O,x+=j*(5*R),x+=S*(5*ge),ie+=x>>>13,x&=8191;var ne=ie;ne+=A*ge,ne+=I*ce,ne+=C*ae,ne+=U*k,ne+=H*K,ie=ne>>>13,ne&=8191,ne+=J*b,ne+=se*u,ne+=T*m,ne+=j*O,ne+=S*(5*R),ie+=ne>>>13,ne&=8191;var fe=ie;fe+=A*R,fe+=I*ge,fe+=C*ce,fe+=U*ae,fe+=H*k,ie=fe>>>13,fe&=8191,fe+=J*K,fe+=se*b,fe+=T*u,fe+=j*m,fe+=S*O,ie+=fe>>>13,fe&=8191,ie=(ie<<2)+ie|0,ie=ie+me|0,me=ie&8191,ie=ie>>>13,he+=ie,A=me,I=he,C=ve,U=q,H=M,J=N,se=l,T=x,j=ne,S=fe,_+=16,g-=16}this._h[0]=A,this._h[1]=I,this._h[2]=C,this._h[3]=U,this._h[4]=H,this._h[5]=J,this._h[6]=se,this._h[7]=T,this._h[8]=j,this._h[9]=S},p.prototype.finish=function(f,_){_===void 0&&(_=0);var g=new Uint16Array(10),w,A,I,C;if(this._leftover){for(C=this._leftover,this._buffer[C++]=1;C<16;C++)this._buffer[C]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(w=this._h[1]>>>13,this._h[1]&=8191,C=2;C<10;C++)this._h[C]+=w,w=this._h[C]>>>13,this._h[C]&=8191;for(this._h[0]+=w*5,w=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=w,w=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=w,g[0]=this._h[0]+5,w=g[0]>>>13,g[0]&=8191,C=1;C<10;C++)g[C]=this._h[C]+w,w=g[C]>>>13,g[C]&=8191;for(g[9]-=8192,A=(w^1)-1,C=0;C<10;C++)g[C]&=A;for(A=~A,C=0;C<10;C++)this._h[C]=this._h[C]&A|g[C];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,I=this._h[0]+this._pad[0],this._h[0]=I&65535,C=1;C<8;C++)I=(this._h[C]+this._pad[C]|0)+(I>>>16)|0,this._h[C]=I&65535;return f[_+0]=this._h[0]>>>0,f[_+1]=this._h[0]>>>8,f[_+2]=this._h[1]>>>0,f[_+3]=this._h[1]>>>8,f[_+4]=this._h[2]>>>0,f[_+5]=this._h[2]>>>8,f[_+6]=this._h[3]>>>0,f[_+7]=this._h[3]>>>8,f[_+8]=this._h[4]>>>0,f[_+9]=this._h[4]>>>8,f[_+10]=this._h[5]>>>0,f[_+11]=this._h[5]>>>8,f[_+12]=this._h[6]>>>0,f[_+13]=this._h[6]>>>8,f[_+14]=this._h[7]>>>0,f[_+15]=this._h[7]>>>8,this._finished=!0,this},p.prototype.update=function(f){var _=0,g=f.length,w;if(this._leftover){w=16-this._leftover,w>g&&(w=g);for(var A=0;A<w;A++)this._buffer[this._leftover+A]=f[_+A];if(g-=w,_+=w,this._leftover+=w,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(g>=16&&(w=g-g%16,this._blocks(f,_,w),_+=w,g-=w),g){for(var A=0;A<g;A++)this._buffer[this._leftover+A]=f[_+A];this._leftover+=g}return this},p.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},p.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},p}();i.Poly1305=s;function a(p,f){var _=new s(p);_.update(f);var g=_.digest();return _.clean(),g}i.oneTimeAuth=a;function c(p,f){return p.length!==i.DIGEST_LENGTH||f.length!==i.DIGEST_LENGTH?!1:e.equal(p,f)}i.equal=c})(pp);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ua,t=pp,s=Dr,a=Ue,c=Ci;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var p=new Uint8Array(16),f=function(){function _(g){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,g.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(g)}return _.prototype.seal=function(g,w,A,I){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var C=new Uint8Array(16);C.set(g,C.length-g.length);var U=new Uint8Array(32);e.stream(this._key,C,U,4);var H=w.length+this.tagLength,J;if(I){if(I.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");J=I}else J=new Uint8Array(H);return e.streamXOR(this._key,C,w,J,4),this._authenticate(J.subarray(J.length-this.tagLength,J.length),U,J.subarray(0,J.length-this.tagLength),A),s.wipe(C),J},_.prototype.open=function(g,w,A,I){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(w.length<this.tagLength)return null;var C=new Uint8Array(16);C.set(g,C.length-g.length);var U=new Uint8Array(32);e.stream(this._key,C,U,4);var H=new Uint8Array(this.tagLength);if(this._authenticate(H,U,w.subarray(0,w.length-this.tagLength),A),!c.equal(H,w.subarray(w.length-this.tagLength,w.length)))return null;var J=w.length-this.tagLength,se;if(I){if(I.length!==J)throw new Error("ChaCha20Poly1305: incorrect destination length");se=I}else se=new Uint8Array(J);return e.streamXOR(this._key,C,w.subarray(0,w.length-this.tagLength),se,4),s.wipe(C),se},_.prototype.clean=function(){return s.wipe(this._key),this},_.prototype._authenticate=function(g,w,A,I){var C=new t.Poly1305(w);I&&(C.update(I),I.length%16>0&&C.update(p.subarray(I.length%16))),C.update(A),A.length%16>0&&C.update(p.subarray(A.length%16));var U=new Uint8Array(8);I&&a.writeUint64LE(I.length,U),C.update(U),a.writeUint64LE(A.length,U),C.update(U);for(var H=C.digest(),J=0;J<H.length;J++)g[J]=H[J];C.clean(),s.wipe(H),s.wipe(U)},_}();i.ChaCha20Poly1305=f})(bu);var gp={},ps={},mu={};Object.defineProperty(mu,"__esModule",{value:!0});function Rb(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}mu.isSerializableHash=Rb;Object.defineProperty(ps,"__esModule",{value:!0});var Yr=mu,$b=Ci,Fb=Dr,_p=function(){function i(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var a=0;a<s.length;a++)s[a]^=54;this._inner.update(s);for(var a=0;a<s.length;a++)s[a]^=106;this._outer.update(s),Yr.isSerializableHash(this._inner)&&Yr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Fb.wipe(s)}return i.prototype.reset=function(){if(!Yr.isSerializableHash(this._inner)||!Yr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){Yr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Yr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!Yr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!Yr.isSerializableHash(this._inner)||!Yr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!Yr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();ps.HMAC=_p;function Ub(i,e,t){var s=new _p(i,e);s.update(t);var a=s.digest();return s.clean(),a}ps.hmac=Ub;ps.equal=$b.equal;Object.defineProperty(gp,"__esModule",{value:!0});var Ul=ps,jl=Dr,jb=function(){function i(e,t,s,a){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=a;var c=Ul.hmac(this._hash,s,t);this._hmac=new Ul.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},i.prototype.clean=function(){this._hmac.clean(),jl.wipe(this._buffer),jl.wipe(this._counter),this._bufpos=0},i}(),Lb=gp.HKDF=jb,xn={},ja={},La={};Object.defineProperty(La,"__esModule",{value:!0});La.BrowserRandomSource=void 0;const Ll=65536;class Mb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=Ll)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,Ll)));return t}}La.BrowserRandomSource=Mb;function qb(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.NodeRandomSource=void 0;const zb=Dr;class Hb{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof qb<"u"){const e=Vv;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let a=0;a<s.length;a++)s[a]=t[a];return(0,zb.wipe)(t),s}}Ma.NodeRandomSource=Hb;Object.defineProperty(ja,"__esModule",{value:!0});ja.SystemRandomSource=void 0;const Bb=La,Kb=Ma;class Vb{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Bb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Kb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}ja.SystemRandomSource=Vb;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=ja,t=Ue,s=Dr;i.defaultRandomSource=new e.SystemRandomSource;function a(g,w=i.defaultRandomSource){return w.randomBytes(g)}i.randomBytes=a;function c(g=i.defaultRandomSource){const w=a(4,g),A=(0,t.readUint32LE)(w);return(0,s.wipe)(w),A}i.randomUint32=c;const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(g,w=p,A=i.defaultRandomSource){if(w.length<2)throw new Error("randomString charset is too short");if(w.length>256)throw new Error("randomString charset is too long");let I="";const C=w.length,U=256-256%C;for(;g>0;){const H=a(Math.ceil(g*256/U),A);for(let J=0;J<H.length&&g>0;J++){const se=H[J];se<U&&(I+=w.charAt(se%C),g--)}(0,s.wipe)(H)}return I}i.randomString=f;function _(g,w=p,A=i.defaultRandomSource){const I=Math.ceil(g/(Math.log(w.length)/Math.LN2));return f(I,w,A)}i.randomStringForEntropy=_})(xn);var qa={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=Dr;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},f.prototype.update=function(_,g){if(g===void 0&&(g=_.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var w=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&g>0;)this._buffer[this._bufferLength++]=_[w++],g--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(w=c(this._temp,this._state,_,w,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=_[w++],g--;return this},f.prototype.finish=function(_){if(!this._finished){var g=this._bytesHashed,w=this._bufferLength,A=g/536870912|0,I=g<<3,C=g%64<56?64:128;this._buffer[w]=128;for(var U=w+1;U<C-8;U++)this._buffer[U]=0;e.writeUint32BE(A,this._buffer,C-8),e.writeUint32BE(I,this._buffer,C-4),c(this._temp,this._state,this._buffer,0,C),this._finished=!0}for(var U=0;U<this.digestLength/4;U++)e.writeUint32BE(this._state[U],_,U*4);return this},f.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(_){return this._state.set(_.state),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(_){t.wipe(_.state),_.buffer&&t.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},f}();i.SHA256=s;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(f,_,g,w,A){for(;A>=64;){for(var I=_[0],C=_[1],U=_[2],H=_[3],J=_[4],se=_[5],T=_[6],j=_[7],S=0;S<16;S++){var O=w+S*4;f[S]=e.readUint32BE(g,O)}for(var S=16;S<64;S++){var m=f[S-2],u=(m>>>17|m<<32-17)^(m>>>19|m<<32-19)^m>>>10;m=f[S-15];var b=(m>>>7|m<<32-7)^(m>>>18|m<<32-18)^m>>>3;f[S]=(u+f[S-7]|0)+(b+f[S-16]|0)}for(var S=0;S<64;S++){var u=(((J>>>6|J<<26)^(J>>>11|J<<21)^(J>>>25|J<<7))+(J&se^~J&T)|0)+(j+(a[S]+f[S]|0)|0)|0,b=((I>>>2|I<<32-2)^(I>>>13|I<<32-13)^(I>>>22|I<<32-22))+(I&C^I&U^C&U)|0;j=T,T=se,se=J,J=H+u|0,H=U,U=C,C=I,I=u+b|0}_[0]+=I,_[1]+=C,_[2]+=U,_[3]+=H,_[4]+=J,_[5]+=se,_[6]+=T,_[7]+=j,w+=64,A-=64}return w}function p(f){var _=new s;_.update(f);var g=_.digest();return _.clean(),g}i.hash=p})(qa);var wu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=xn,t=Dr;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(S){const O=new Float64Array(16);if(S)for(let m=0;m<S.length;m++)O[m]=S[m];return O}const a=new Uint8Array(32);a[0]=9;const c=s([56129,1]);function p(S){let O=1;for(let m=0;m<16;m++){let u=S[m]+O+65535;O=Math.floor(u/65536),S[m]=u-O*65536}S[0]+=O-1+37*(O-1)}function f(S,O,m){const u=~(m-1);for(let b=0;b<16;b++){const K=u&(S[b]^O[b]);S[b]^=K,O[b]^=K}}function _(S,O){const m=s(),u=s();for(let b=0;b<16;b++)u[b]=O[b];p(u),p(u),p(u);for(let b=0;b<2;b++){m[0]=u[0]-65517;for(let k=1;k<15;k++)m[k]=u[k]-65535-(m[k-1]>>16&1),m[k-1]&=65535;m[15]=u[15]-32767-(m[14]>>16&1);const K=m[15]>>16&1;m[14]&=65535,f(u,m,1-K)}for(let b=0;b<16;b++)S[2*b]=u[b]&255,S[2*b+1]=u[b]>>8}function g(S,O){for(let m=0;m<16;m++)S[m]=O[2*m]+(O[2*m+1]<<8);S[15]&=32767}function w(S,O,m){for(let u=0;u<16;u++)S[u]=O[u]+m[u]}function A(S,O,m){for(let u=0;u<16;u++)S[u]=O[u]-m[u]}function I(S,O,m){let u,b,K=0,k=0,ae=0,ce=0,ge=0,R=0,z=0,le=0,te=0,G=0,ee=0,W=0,re=0,xe=0,ie=0,me=0,he=0,ve=0,q=0,M=0,N=0,l=0,x=0,ne=0,fe=0,Se=0,He=0,Ve=0,je=0,pt=0,dt=0,Me=m[0],Ie=m[1],Re=m[2],$e=m[3],qe=m[4],Pe=m[5],Fe=m[6],De=m[7],Ce=m[8],Be=m[9],Oe=m[10],ke=m[11],We=m[12],et=m[13],tt=m[14],Je=m[15];u=O[0],K+=u*Me,k+=u*Ie,ae+=u*Re,ce+=u*$e,ge+=u*qe,R+=u*Pe,z+=u*Fe,le+=u*De,te+=u*Ce,G+=u*Be,ee+=u*Oe,W+=u*ke,re+=u*We,xe+=u*et,ie+=u*tt,me+=u*Je,u=O[1],k+=u*Me,ae+=u*Ie,ce+=u*Re,ge+=u*$e,R+=u*qe,z+=u*Pe,le+=u*Fe,te+=u*De,G+=u*Ce,ee+=u*Be,W+=u*Oe,re+=u*ke,xe+=u*We,ie+=u*et,me+=u*tt,he+=u*Je,u=O[2],ae+=u*Me,ce+=u*Ie,ge+=u*Re,R+=u*$e,z+=u*qe,le+=u*Pe,te+=u*Fe,G+=u*De,ee+=u*Ce,W+=u*Be,re+=u*Oe,xe+=u*ke,ie+=u*We,me+=u*et,he+=u*tt,ve+=u*Je,u=O[3],ce+=u*Me,ge+=u*Ie,R+=u*Re,z+=u*$e,le+=u*qe,te+=u*Pe,G+=u*Fe,ee+=u*De,W+=u*Ce,re+=u*Be,xe+=u*Oe,ie+=u*ke,me+=u*We,he+=u*et,ve+=u*tt,q+=u*Je,u=O[4],ge+=u*Me,R+=u*Ie,z+=u*Re,le+=u*$e,te+=u*qe,G+=u*Pe,ee+=u*Fe,W+=u*De,re+=u*Ce,xe+=u*Be,ie+=u*Oe,me+=u*ke,he+=u*We,ve+=u*et,q+=u*tt,M+=u*Je,u=O[5],R+=u*Me,z+=u*Ie,le+=u*Re,te+=u*$e,G+=u*qe,ee+=u*Pe,W+=u*Fe,re+=u*De,xe+=u*Ce,ie+=u*Be,me+=u*Oe,he+=u*ke,ve+=u*We,q+=u*et,M+=u*tt,N+=u*Je,u=O[6],z+=u*Me,le+=u*Ie,te+=u*Re,G+=u*$e,ee+=u*qe,W+=u*Pe,re+=u*Fe,xe+=u*De,ie+=u*Ce,me+=u*Be,he+=u*Oe,ve+=u*ke,q+=u*We,M+=u*et,N+=u*tt,l+=u*Je,u=O[7],le+=u*Me,te+=u*Ie,G+=u*Re,ee+=u*$e,W+=u*qe,re+=u*Pe,xe+=u*Fe,ie+=u*De,me+=u*Ce,he+=u*Be,ve+=u*Oe,q+=u*ke,M+=u*We,N+=u*et,l+=u*tt,x+=u*Je,u=O[8],te+=u*Me,G+=u*Ie,ee+=u*Re,W+=u*$e,re+=u*qe,xe+=u*Pe,ie+=u*Fe,me+=u*De,he+=u*Ce,ve+=u*Be,q+=u*Oe,M+=u*ke,N+=u*We,l+=u*et,x+=u*tt,ne+=u*Je,u=O[9],G+=u*Me,ee+=u*Ie,W+=u*Re,re+=u*$e,xe+=u*qe,ie+=u*Pe,me+=u*Fe,he+=u*De,ve+=u*Ce,q+=u*Be,M+=u*Oe,N+=u*ke,l+=u*We,x+=u*et,ne+=u*tt,fe+=u*Je,u=O[10],ee+=u*Me,W+=u*Ie,re+=u*Re,xe+=u*$e,ie+=u*qe,me+=u*Pe,he+=u*Fe,ve+=u*De,q+=u*Ce,M+=u*Be,N+=u*Oe,l+=u*ke,x+=u*We,ne+=u*et,fe+=u*tt,Se+=u*Je,u=O[11],W+=u*Me,re+=u*Ie,xe+=u*Re,ie+=u*$e,me+=u*qe,he+=u*Pe,ve+=u*Fe,q+=u*De,M+=u*Ce,N+=u*Be,l+=u*Oe,x+=u*ke,ne+=u*We,fe+=u*et,Se+=u*tt,He+=u*Je,u=O[12],re+=u*Me,xe+=u*Ie,ie+=u*Re,me+=u*$e,he+=u*qe,ve+=u*Pe,q+=u*Fe,M+=u*De,N+=u*Ce,l+=u*Be,x+=u*Oe,ne+=u*ke,fe+=u*We,Se+=u*et,He+=u*tt,Ve+=u*Je,u=O[13],xe+=u*Me,ie+=u*Ie,me+=u*Re,he+=u*$e,ve+=u*qe,q+=u*Pe,M+=u*Fe,N+=u*De,l+=u*Ce,x+=u*Be,ne+=u*Oe,fe+=u*ke,Se+=u*We,He+=u*et,Ve+=u*tt,je+=u*Je,u=O[14],ie+=u*Me,me+=u*Ie,he+=u*Re,ve+=u*$e,q+=u*qe,M+=u*Pe,N+=u*Fe,l+=u*De,x+=u*Ce,ne+=u*Be,fe+=u*Oe,Se+=u*ke,He+=u*We,Ve+=u*et,je+=u*tt,pt+=u*Je,u=O[15],me+=u*Me,he+=u*Ie,ve+=u*Re,q+=u*$e,M+=u*qe,N+=u*Pe,l+=u*Fe,x+=u*De,ne+=u*Ce,fe+=u*Be,Se+=u*Oe,He+=u*ke,Ve+=u*We,je+=u*et,pt+=u*tt,dt+=u*Je,K+=38*he,k+=38*ve,ae+=38*q,ce+=38*M,ge+=38*N,R+=38*l,z+=38*x,le+=38*ne,te+=38*fe,G+=38*Se,ee+=38*He,W+=38*Ve,re+=38*je,xe+=38*pt,ie+=38*dt,b=1,u=K+b+65535,b=Math.floor(u/65536),K=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=ae+b+65535,b=Math.floor(u/65536),ae=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=ge+b+65535,b=Math.floor(u/65536),ge=u-b*65536,u=R+b+65535,b=Math.floor(u/65536),R=u-b*65536,u=z+b+65535,b=Math.floor(u/65536),z=u-b*65536,u=le+b+65535,b=Math.floor(u/65536),le=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=xe+b+65535,b=Math.floor(u/65536),xe=u-b*65536,u=ie+b+65535,b=Math.floor(u/65536),ie=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,K+=b-1+37*(b-1),b=1,u=K+b+65535,b=Math.floor(u/65536),K=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=ae+b+65535,b=Math.floor(u/65536),ae=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=ge+b+65535,b=Math.floor(u/65536),ge=u-b*65536,u=R+b+65535,b=Math.floor(u/65536),R=u-b*65536,u=z+b+65535,b=Math.floor(u/65536),z=u-b*65536,u=le+b+65535,b=Math.floor(u/65536),le=u-b*65536,u=te+b+65535,b=Math.floor(u/65536),te=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=xe+b+65535,b=Math.floor(u/65536),xe=u-b*65536,u=ie+b+65535,b=Math.floor(u/65536),ie=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,K+=b-1+37*(b-1),S[0]=K,S[1]=k,S[2]=ae,S[3]=ce,S[4]=ge,S[5]=R,S[6]=z,S[7]=le,S[8]=te,S[9]=G,S[10]=ee,S[11]=W,S[12]=re,S[13]=xe,S[14]=ie,S[15]=me}function C(S,O){I(S,O,O)}function U(S,O){const m=s();for(let u=0;u<16;u++)m[u]=O[u];for(let u=253;u>=0;u--)C(m,m),u!==2&&u!==4&&I(m,m,O);for(let u=0;u<16;u++)S[u]=m[u]}function H(S,O){const m=new Uint8Array(32),u=new Float64Array(80),b=s(),K=s(),k=s(),ae=s(),ce=s(),ge=s();for(let te=0;te<31;te++)m[te]=S[te];m[31]=S[31]&127|64,m[0]&=248,g(u,O);for(let te=0;te<16;te++)K[te]=u[te];b[0]=ae[0]=1;for(let te=254;te>=0;--te){const G=m[te>>>3]>>>(te&7)&1;f(b,K,G),f(k,ae,G),w(ce,b,k),A(b,b,k),w(k,K,ae),A(K,K,ae),C(ae,ce),C(ge,b),I(b,k,b),I(k,K,ce),w(ce,b,k),A(b,b,k),C(K,b),A(k,ae,ge),I(b,k,c),w(b,b,ae),I(k,k,b),I(b,ae,ge),I(ae,K,u),C(K,ce),f(b,K,G),f(k,ae,G)}for(let te=0;te<16;te++)u[te+16]=b[te],u[te+32]=k[te],u[te+48]=K[te],u[te+64]=ae[te];const R=u.subarray(32),z=u.subarray(16);U(R,R),I(z,z,R);const le=new Uint8Array(32);return _(le,z),le}i.scalarMult=H;function J(S){return H(S,a)}i.scalarMultBase=J;function se(S){if(S.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const O=new Uint8Array(S);return{publicKey:J(O),secretKey:O}}i.generateKeyPairFromSeed=se;function T(S){const O=(0,e.randomBytes)(32,S),m=se(O);return(0,t.wipe)(O),m}i.generateKeyPair=T;function j(S,O,m=!1){if(S.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(O.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=H(S,O);if(m){let b=0;for(let K=0;K<u.length;K++)b|=u[K];if(b===0)throw new Error("X25519: invalid shared key")}return u}i.sharedKey=j})(wu);function Eu(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function yp(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Eu(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function Bc(i,e){e||(e=i.reduce((a,c)=>a+c.length,0));const t=yp(e);let s=0;for(const a of i)t.set(a,s),s+=a.length;return Eu(t)}function kb(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var a=0;a<i.length;a++){var c=i.charAt(a),p=c.charCodeAt(0);if(t[p]!==255)throw new TypeError(c+" is ambiguous");t[p]=a}var f=i.length,_=i.charAt(0),g=Math.log(f)/Math.log(256),w=Math.log(256)/Math.log(f);function A(U){if(U instanceof Uint8Array||(ArrayBuffer.isView(U)?U=new Uint8Array(U.buffer,U.byteOffset,U.byteLength):Array.isArray(U)&&(U=Uint8Array.from(U))),!(U instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(U.length===0)return"";for(var H=0,J=0,se=0,T=U.length;se!==T&&U[se]===0;)se++,H++;for(var j=(T-se)*w+1>>>0,S=new Uint8Array(j);se!==T;){for(var O=U[se],m=0,u=j-1;(O!==0||m<J)&&u!==-1;u--,m++)O+=256*S[u]>>>0,S[u]=O%f>>>0,O=O/f>>>0;if(O!==0)throw new Error("Non-zero carry");J=m,se++}for(var b=j-J;b!==j&&S[b]===0;)b++;for(var K=_.repeat(H);b<j;++b)K+=i.charAt(S[b]);return K}function I(U){if(typeof U!="string")throw new TypeError("Expected String");if(U.length===0)return new Uint8Array;var H=0;if(U[H]!==" "){for(var J=0,se=0;U[H]===_;)J++,H++;for(var T=(U.length-H)*g+1>>>0,j=new Uint8Array(T);U[H];){var S=t[U.charCodeAt(H)];if(S===255)return;for(var O=0,m=T-1;(S!==0||O<se)&&m!==-1;m--,O++)S+=f*j[m]>>>0,j[m]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");se=O,H++}if(U[H]!==" "){for(var u=T-se;u!==T&&j[u]===0;)u++;for(var b=new Uint8Array(J+(T-u)),K=J;u!==T;)b[K++]=j[u++];return b}}}function C(U){var H=I(U);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:A,decodeUnsafe:I,decode:C}}var Gb=kb,Wb=Gb;const Yb=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},Jb=i=>new TextEncoder().encode(i),Xb=i=>new TextDecoder().decode(i);class Zb{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Qb{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vp(this,e)}}class em{constructor(e){this.decoders=e}or(e){return vp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vp=(i,e)=>new em({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class tm{constructor(e,t,s,a){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=a,this.encoder=new Zb(e,t,s),this.decoder=new Qb(e,t,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const za=({name:i,prefix:e,encode:t,decode:s})=>new tm(i,e,t,s),ds=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:a}=Wb(t,e);return za({prefix:i,name:e,encode:s,decode:c=>Yb(a(c))})},rm=(i,e,t,s)=>{const a={};for(let w=0;w<e.length;++w)a[e[w]]=w;let c=i.length;for(;i[c-1]==="=";)--c;const p=new Uint8Array(c*t/8|0);let f=0,_=0,g=0;for(let w=0;w<c;++w){const A=a[i[w]];if(A===void 0)throw new SyntaxError(`Non-${s} character`);_=_<<t|A,f+=t,f>=8&&(f-=8,p[g++]=255&_>>f)}if(f>=t||255&_<<8-f)throw new SyntaxError("Unexpected end of data");return p},im=(i,e,t)=>{const s=e[e.length-1]==="=",a=(1<<t)-1;let c="",p=0,f=0;for(let _=0;_<i.length;++_)for(f=f<<8|i[_],p+=8;p>t;)p-=t,c+=e[a&f>>p];if(p&&(c+=e[a&f<<t-p]),s)for(;c.length*t&7;)c+="=";return c},Wt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>za({prefix:e,name:i,encode(a){return im(a,s,t)},decode(a){return rm(a,s,t,i)}}),nm=za({prefix:"\0",name:"identity",encode:i=>Xb(i),decode:i=>Jb(i)}),sm=Object.freeze(Object.defineProperty({__proto__:null,identity:nm},Symbol.toStringTag,{value:"Module"})),am=Wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),om=Object.freeze(Object.defineProperty({__proto__:null,base2:am},Symbol.toStringTag,{value:"Module"})),cm=Wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),um=Object.freeze(Object.defineProperty({__proto__:null,base8:cm},Symbol.toStringTag,{value:"Module"})),hm=ds({prefix:"9",name:"base10",alphabet:"0123456789"}),lm=Object.freeze(Object.defineProperty({__proto__:null,base10:hm},Symbol.toStringTag,{value:"Module"})),fm=Wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pm=Wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),dm=Object.freeze(Object.defineProperty({__proto__:null,base16:fm,base16upper:pm},Symbol.toStringTag,{value:"Module"})),gm=Wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_m=Wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ym=Wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vm=Wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),bm=Wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mm=Wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wm=Wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Em=Wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Dm=Wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Sm=Object.freeze(Object.defineProperty({__proto__:null,base32:gm,base32hex:bm,base32hexpad:wm,base32hexpadupper:Em,base32hexupper:mm,base32pad:ym,base32padupper:vm,base32upper:_m,base32z:Dm},Symbol.toStringTag,{value:"Module"})),Im=ds({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),xm=ds({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Om=Object.freeze(Object.defineProperty({__proto__:null,base36:Im,base36upper:xm},Symbol.toStringTag,{value:"Module"})),Pm=ds({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Cm=ds({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Am=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Pm,base58flickr:Cm},Symbol.toStringTag,{value:"Module"})),Tm=Wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Nm=Wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Rm=Wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$m=Wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Fm=Object.freeze(Object.defineProperty({__proto__:null,base64:Tm,base64pad:Nm,base64url:Rm,base64urlpad:$m},Symbol.toStringTag,{value:"Module"})),bp=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Um=bp.reduce((i,e,t)=>(i[t]=e,i),[]),jm=bp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function Lm(i){return i.reduce((e,t)=>(e+=Um[t],e),"")}function Mm(i){const e=[];for(const t of i){const s=jm[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const qm=za({prefix:"🚀",name:"base256emoji",encode:Lm,decode:Mm}),zm=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:qm},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Ml={...sm,...om,...um,...lm,...dm,...Sm,...Om,...Am,...Fm,...zm};function mp(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const ql=mp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),vc=mp("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=yp(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),wp={utf8:ql,"utf-8":ql,hex:Ml.base16,latin1:vc,ascii:vc,binary:vc,...Ml};function _r(i,e="utf8"){const t=wp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Eu(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function cr(i,e="utf8"){const t=wp[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}var ye={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kc=function(i,e){return Kc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a])},Kc(i,e)};function Hm(i,e){Kc(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Vc=function(){return Vc=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Vc.apply(this,arguments)};function Bm(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(t[s[a]]=i[s[a]]);return t}function Km(i,e,t,s){var a=arguments.length,c=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(p=i[f])&&(c=(a<3?p(c):a>3?p(e,t,c):p(e,t))||c);return a>3&&c&&Object.defineProperty(e,t,c),c}function Vm(i,e){return function(t,s){e(t,s,i)}}function km(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function Gm(i,e,t,s){function a(c){return c instanceof t?c:new t(function(p){p(c)})}return new(t||(t=Promise))(function(c,p){function f(w){try{g(s.next(w))}catch(A){p(A)}}function _(w){try{g(s.throw(w))}catch(A){p(A)}}function g(w){w.done?c(w.value):a(w.value).then(f,_)}g((s=s.apply(i,e||[])).next())})}function Wm(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,a,c,p;return p={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function f(g){return function(w){return _([g,w])}}function _(g){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,a&&(c=g[0]&2?a.return:g[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,g[1])).done)return c;switch(a=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(w){g=[6,w],a=0}finally{s=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function Ym(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function Jm(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function kc(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ep(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),a,c=[],p;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)c.push(a.value)}catch(f){p={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(p)throw p.error}}return c}function Xm(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Ep(arguments[e]));return i}function Zm(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),a=0,e=0;e<t;e++)for(var c=arguments[e],p=0,f=c.length;p<f;p++,a++)s[a]=c[p];return s}function os(i){return this instanceof os?(this.v=i,this):new os(i)}function Qm(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),a,c=[];return a={},p("next"),p("throw"),p("return"),a[Symbol.asyncIterator]=function(){return this},a;function p(I){s[I]&&(a[I]=function(C){return new Promise(function(U,H){c.push([I,C,U,H])>1||f(I,C)})})}function f(I,C){try{_(s[I](C))}catch(U){A(c[0][3],U)}}function _(I){I.value instanceof os?Promise.resolve(I.value.v).then(g,w):A(c[0][2],I)}function g(I){f("next",I)}function w(I){f("throw",I)}function A(I,C){I(C),c.shift(),c.length&&f(c[0][0],c[0][1])}}function ew(i){var e,t;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,c){e[a]=i[a]?function(p){return(t=!t)?{value:os(i[a](p)),done:a==="return"}:c?c(p):p}:c}}function tw(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof kc=="function"?kc(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(p){return new Promise(function(f,_){p=i[c](p),a(f,_,p.done,p.value)})}}function a(c,p,f,_){Promise.resolve(_).then(function(g){c({value:g,done:f})},p)}}function rw(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function iw(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function nw(i){return i&&i.__esModule?i:{default:i}}function sw(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function aw(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const ow=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Vc},__asyncDelegator:ew,__asyncGenerator:Qm,__asyncValues:tw,__await:os,__awaiter:Gm,__classPrivateFieldGet:sw,__classPrivateFieldSet:aw,__createBinding:Ym,__decorate:Km,__exportStar:Jm,__extends:Hm,__generator:Wm,__importDefault:nw,__importStar:iw,__makeTemplateObject:rw,__metadata:km,__param:Vm,__read:Ep,__rest:Bm,__spread:Xm,__spreadArrays:Zm,__values:kc},Symbol.toStringTag,{value:"Module"})),Ha=fs(ow);var bc={},Wn={},zl;function cw(){if(zl)return Wn;zl=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.delay=void 0;function i(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Wn.delay=i,Wn}var Vi={},mc={},ki={},Hl;function uw(){return Hl||(Hl=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.ONE_THOUSAND=ki.ONE_HUNDRED=void 0,ki.ONE_HUNDRED=100,ki.ONE_THOUSAND=1e3),ki}var wc={},Bl;function hw(){return Bl||(Bl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(wc)),wc}var Kl;function Dp(){return Kl||(Kl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ha;e.__exportStar(uw(),i),e.__exportStar(hw(),i)}(mc)),mc}var Vl;function lw(){if(Vl)return Vi;Vl=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.fromMiliseconds=Vi.toMiliseconds=void 0;const i=Dp();function e(s){return s*i.ONE_THOUSAND}Vi.toMiliseconds=e;function t(s){return Math.floor(s/i.ONE_THOUSAND)}return Vi.fromMiliseconds=t,Vi}var kl;function fw(){return kl||(kl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ha;e.__exportStar(cw(),i),e.__exportStar(lw(),i)}(bc)),bc}var wn={},Gl;function pw(){if(Gl)return wn;Gl=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const a=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:a})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return wn.Watch=i,wn.default=i,wn}var Ec={},Yn={},Wl;function dw(){if(Wl)return Yn;Wl=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.IWatch=void 0;class i{}return Yn.IWatch=i,Yn}var Yl;function gw(){return Yl||(Yl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ha.__exportStar(dw(),i)}(Ec)),Ec}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ha;e.__exportStar(fw(),i),e.__exportStar(pw(),i),e.__exportStar(gw(),i),e.__exportStar(Dp(),i)})(ye);var cs={};(function(i){const e=Jv,t=Xv,s=Wv,a=Yv,c=T=>T==null,p=Symbol("encodeFragmentIdentifier");function f(T){switch(T.arrayFormat){case"index":return j=>(S,O)=>{const m=S.length;return O===void 0||T.skipNull&&O===null||T.skipEmptyString&&O===""?S:O===null?[...S,[w(j,T),"[",m,"]"].join("")]:[...S,[w(j,T),"[",w(m,T),"]=",w(O,T)].join("")]};case"bracket":return j=>(S,O)=>O===void 0||T.skipNull&&O===null||T.skipEmptyString&&O===""?S:O===null?[...S,[w(j,T),"[]"].join("")]:[...S,[w(j,T),"[]=",w(O,T)].join("")];case"colon-list-separator":return j=>(S,O)=>O===void 0||T.skipNull&&O===null||T.skipEmptyString&&O===""?S:O===null?[...S,[w(j,T),":list="].join("")]:[...S,[w(j,T),":list=",w(O,T)].join("")];case"comma":case"separator":case"bracket-separator":{const j=T.arrayFormat==="bracket-separator"?"[]=":"=";return S=>(O,m)=>m===void 0||T.skipNull&&m===null||T.skipEmptyString&&m===""?O:(m=m===null?"":m,O.length===0?[[w(S,T),j,w(m,T)].join("")]:[[O,w(m,T)].join(T.arrayFormatSeparator)])}default:return j=>(S,O)=>O===void 0||T.skipNull&&O===null||T.skipEmptyString&&O===""?S:O===null?[...S,w(j,T)]:[...S,[w(j,T),"=",w(O,T)].join("")]}}function _(T){let j;switch(T.arrayFormat){case"index":return(S,O,m)=>{if(j=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),!j){m[S]=O;return}m[S]===void 0&&(m[S]={}),m[S][j[1]]=O};case"bracket":return(S,O,m)=>{if(j=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),!j){m[S]=O;return}if(m[S]===void 0){m[S]=[O];return}m[S]=[].concat(m[S],O)};case"colon-list-separator":return(S,O,m)=>{if(j=/(:list)$/.exec(S),S=S.replace(/:list$/,""),!j){m[S]=O;return}if(m[S]===void 0){m[S]=[O];return}m[S]=[].concat(m[S],O)};case"comma":case"separator":return(S,O,m)=>{const u=typeof O=="string"&&O.includes(T.arrayFormatSeparator),b=typeof O=="string"&&!u&&A(O,T).includes(T.arrayFormatSeparator);O=b?A(O,T):O;const K=u||b?O.split(T.arrayFormatSeparator).map(k=>A(k,T)):O===null?O:A(O,T);m[S]=K};case"bracket-separator":return(S,O,m)=>{const u=/(\[\])$/.test(S);if(S=S.replace(/\[\]$/,""),!u){m[S]=O&&A(O,T);return}const b=O===null?[]:O.split(T.arrayFormatSeparator).map(K=>A(K,T));if(m[S]===void 0){m[S]=b;return}m[S]=[].concat(m[S],b)};default:return(S,O,m)=>{if(m[S]===void 0){m[S]=O;return}m[S]=[].concat(m[S],O)}}}function g(T){if(typeof T!="string"||T.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function w(T,j){return j.encode?j.strict?e(T):encodeURIComponent(T):T}function A(T,j){return j.decode?t(T):T}function I(T){return Array.isArray(T)?T.sort():typeof T=="object"?I(Object.keys(T)).sort((j,S)=>Number(j)-Number(S)).map(j=>T[j]):T}function C(T){const j=T.indexOf("#");return j!==-1&&(T=T.slice(0,j)),T}function U(T){let j="";const S=T.indexOf("#");return S!==-1&&(j=T.slice(S)),j}function H(T){T=C(T);const j=T.indexOf("?");return j===-1?"":T.slice(j+1)}function J(T,j){return j.parseNumbers&&!Number.isNaN(Number(T))&&typeof T=="string"&&T.trim()!==""?T=Number(T):j.parseBooleans&&T!==null&&(T.toLowerCase()==="true"||T.toLowerCase()==="false")&&(T=T.toLowerCase()==="true"),T}function se(T,j){j=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},j),g(j.arrayFormatSeparator);const S=_(j),O=Object.create(null);if(typeof T!="string"||(T=T.trim().replace(/^[?#&]/,""),!T))return O;for(const m of T.split("&")){if(m==="")continue;let[u,b]=s(j.decode?m.replace(/\+/g," "):m,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(j.arrayFormat)?b:A(b,j),S(A(u,j),b,O)}for(const m of Object.keys(O)){const u=O[m];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=J(u[b],j);else O[m]=J(u,j)}return j.sort===!1?O:(j.sort===!0?Object.keys(O).sort():Object.keys(O).sort(j.sort)).reduce((m,u)=>{const b=O[u];return b&&typeof b=="object"&&!Array.isArray(b)?m[u]=I(b):m[u]=b,m},Object.create(null))}i.extract=H,i.parse=se,i.stringify=(T,j)=>{if(!T)return"";j=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},j),g(j.arrayFormatSeparator);const S=b=>j.skipNull&&c(T[b])||j.skipEmptyString&&T[b]==="",O=f(j),m={};for(const b of Object.keys(T))S(b)||(m[b]=T[b]);const u=Object.keys(m);return j.sort!==!1&&u.sort(j.sort),u.map(b=>{const K=T[b];return K===void 0?"":K===null?w(b,j):Array.isArray(K)?K.length===0&&j.arrayFormat==="bracket-separator"?w(b,j)+"[]":K.reduce(O(b),[]).join("&"):w(b,j)+"="+w(K,j)}).filter(b=>b.length>0).join("&")},i.parseUrl=(T,j)=>{j=Object.assign({decode:!0},j);const[S,O]=s(T,"#");return Object.assign({url:S.split("?")[0]||"",query:se(H(T),j)},j&&j.parseFragmentIdentifier&&O?{fragmentIdentifier:A(O,j)}:{})},i.stringifyUrl=(T,j)=>{j=Object.assign({encode:!0,strict:!0,[p]:!0},j);const S=C(T.url).split("?")[0]||"",O=i.extract(T.url),m=i.parse(O,{sort:!1}),u=Object.assign(m,T.query);let b=i.stringify(u,j);b&&(b=`?${b}`);let K=U(T.url);return T.fragmentIdentifier&&(K=`#${j[p]?w(T.fragmentIdentifier,j):T.fragmentIdentifier}`),`${S}${b}${K}`},i.pick=(T,j,S)=>{S=Object.assign({parseFragmentIdentifier:!0,[p]:!1},S);const{url:O,query:m,fragmentIdentifier:u}=i.parseUrl(T,S);return i.stringifyUrl({url:O,query:a(m,j),fragmentIdentifier:u},S)},i.exclude=(T,j,S)=>{const O=Array.isArray(j)?m=>!j.includes(m):(m,u)=>!j(m,u);return i.pick(T,O,S)}})(cs);const _w={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function yw(i,e=[]){const t=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const a=i[s];t.push(...a.accounts)}),t}function Sp(i,e){return i.includes(":")?[i]:e.chains||[]}const Ip="base10",or="base16",Gc="base64pad",Du="utf8",xp=0,Zi=1,vw=0,Jl=1,Wc=12,Su=32;function bw(){const i=wu.generateKeyPair();return{privateKey:cr(i.secretKey,or),publicKey:cr(i.publicKey,or)}}function Yc(){const i=xn.randomBytes(Su);return cr(i,or)}function mw(i,e){const t=wu.sharedKey(_r(i,or),_r(e,or)),s=new Lb(qa.SHA256,t).expand(Su);return cr(s,or)}function ww(i){const e=qa.hash(_r(i,or));return cr(e,or)}function Sn(i){const e=qa.hash(_r(i,Du));return cr(e,or)}function Ew(i){return _r(`${i}`,Ip)}function gs(i){return Number(cr(i,Ip))}function Dw(i){const e=Ew(typeof i.type<"u"?i.type:xp);if(gs(e)===Zi&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof i.senderPublicKey<"u"?_r(i.senderPublicKey,or):void 0,s=typeof i.iv<"u"?_r(i.iv,or):xn.randomBytes(Wc),a=new bu.ChaCha20Poly1305(_r(i.symKey,or)).seal(s,_r(i.message,Du));return Iw({type:e,sealed:a,iv:s,senderPublicKey:t})}function Sw(i){const e=new bu.ChaCha20Poly1305(_r(i.symKey,or)),{sealed:t,iv:s}=Aa(i.encoded),a=e.open(s,t);if(a===null)throw new Error("Failed to decrypt");return cr(a,Du)}function Iw(i){if(gs(i.type)===Zi){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return cr(Bc([i.type,i.senderPublicKey,i.iv,i.sealed]),Gc)}return cr(Bc([i.type,i.iv,i.sealed]),Gc)}function Aa(i){const e=_r(i,Gc),t=e.slice(vw,Jl),s=Jl;if(gs(t)===Zi){const f=s+Su,_=f+Wc,g=e.slice(s,f),w=e.slice(f,_),A=e.slice(_);return{type:t,sealed:A,iv:w,senderPublicKey:g}}const a=s+Wc,c=e.slice(s,a),p=e.slice(a);return{type:t,sealed:p,iv:c}}function xw(i,e){const t=Aa(i);return Op({type:gs(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?cr(t.senderPublicKey,or):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Op(i){const e=(i==null?void 0:i.type)||xp;if(e===Zi){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function Xl(i){return i.type===Zi&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var Ow=Object.defineProperty,Zl=Object.getOwnPropertySymbols,Pw=Object.prototype.hasOwnProperty,Cw=Object.prototype.propertyIsEnumerable,Ql=(i,e,t)=>e in i?Ow(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ef=(i,e)=>{for(var t in e||(e={}))Pw.call(e,t)&&Ql(i,t,e[t]);if(Zl)for(var t of Zl(e))Cw.call(e,t)&&Ql(i,t,e[t]);return i};const Aw="ReactNative",xi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Tw="js";function Iu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Pp(){return!Qv()&&!!ip()&&navigator.product===Aw}function xu(){return!Iu()&&!!ip()}function Ou(){return Pp()?xi.reactNative:Iu()?xi.node:xu()?xi.browser:xi.unknown}function Nw(i,e){let t=cs.parse(i);return t=ef(ef({},t),e),i=cs.stringify(t),i}function Rw(){return Zv()||{name:"",description:"",url:"",icons:[""]}}function $w(){if(Ou()===xi.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const i=eb();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function Fw(){var i;const e=Ou();return e===xi.browser?[e,((i=tb())==null?void 0:i.host)||"unknown"].join(":"):e}function Uw(i,e,t){const s=$w(),a=Fw();return[[i,e].join("-"),[Tw,t].join("-"),s,a].join("/")}function jw({protocol:i,version:e,relayUrl:t,sdkVersion:s,auth:a,projectId:c,useOnCloseEvent:p}){const f=t.split("?"),_=Uw(i,e,s),g={auth:a,ua:_,projectId:c,useOnCloseEvent:p||void 0},w=Nw(f[1]||"",g);return f[0]+"?"+w}function Ji(i,e){return i.filter(t=>e.includes(t)).length===i.length}function Cp(i){return Object.fromEntries(i.entries())}function Ap(i){return new Map(Object.entries(i))}function En(i=ye.FIVE_MINUTES,e){const t=ye.toMiliseconds(i||ye.FIVE_MINUTES);let s,a,c;return{resolve:p=>{c&&s&&(clearTimeout(c),s(p))},reject:p=>{c&&a&&(clearTimeout(c),a(p))},done:()=>new Promise((p,f)=>{c=setTimeout(()=>{f(new Error(e))},t),s=p,a=f})}}function Ta(i,e,t){return new Promise(async(s,a)=>{const c=setTimeout(()=>a(new Error(t)),e);try{const p=await i;s(p)}catch(p){a(p)}clearTimeout(c)})}function Tp(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function Lw(i){return Tp("topic",i)}function Mw(i){return Tp("id",i)}function Np(i){const[e,t]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Hr(i,e){return ye.fromMiliseconds((e||Date.now())+ye.toMiliseconds(i))}function Ii(i){return Date.now()>=ye.toMiliseconds(i)}function zt(i,e){return`${i}${e?`:${e}`:""}`}function Dc(i=[],e=[]){return[...new Set([...i,...e])]}async function qw({id:i,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let a=s==null?void 0:s.href;if(typeof a!="string")return;a.endsWith("/")&&(a=a.slice(0,-1));const c=`${a}/wc?requestId=${i}&sessionTopic=${e}`,p=Ou();p===xi.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):p===xi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}const zw="irn";function Jc(i){return(i==null?void 0:i.relay)||{protocol:zw}}function Ia(i){const e=_w[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var Hw=Object.defineProperty,tf=Object.getOwnPropertySymbols,Bw=Object.prototype.hasOwnProperty,Kw=Object.prototype.propertyIsEnumerable,rf=(i,e,t)=>e in i?Hw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Vw=(i,e)=>{for(var t in e||(e={}))Bw.call(e,t)&&rf(i,t,e[t]);if(tf)for(var t of tf(e))Kw.call(e,t)&&rf(i,t,e[t]);return i};function kw(i,e="-"){const t={},s="relay"+e;return Object.keys(i).forEach(a=>{if(a.startsWith(s)){const c=a.replace(s,""),p=i[a];t[c]=p}}),t}function Gw(i){const e=i.indexOf(":"),t=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),a=i.substring(e+1,t).split("@"),c=typeof t<"u"?i.substring(t):"",p=cs.parse(c);return{protocol:s,topic:Ww(a[0]),version:parseInt(a[1],10),symKey:p.symKey,relay:kw(p)}}function Ww(i){return i.startsWith("//")?i.substring(2):i}function Yw(i,e="-"){const t="relay",s={};return Object.keys(i).forEach(a=>{const c=t+e+a;i[a]&&(s[c]=i[a])}),s}function Jw(i){return`${i.protocol}:${i.topic}@${i.version}?`+cs.stringify(Vw({symKey:i.symKey},Yw(i.relay)))}function On(i){const e=[];return i.forEach(t=>{const[s,a]=t.split(":");e.push(`${s}:${a}`)}),e}function Xw(i){const e=[];return Object.values(i).forEach(t=>{e.push(...On(t.accounts))}),e}function Zw(i,e){const t=[];return Object.values(i).forEach(s=>{On(s.accounts).includes(e)&&t.push(...s.methods)}),t}function Qw(i,e){const t=[];return Object.values(i).forEach(s=>{On(s.accounts).includes(e)&&t.push(...s.events)}),t}function eE(i,e){const t=Oa(i,e);if(t)throw new Error(t.message);const s={};for(const[a,c]of Object.entries(i))s[a]={methods:c.methods,events:c.events,chains:c.accounts.map(p=>`${p.split(":")[0]}:${p.split(":")[1]}`)};return s}function Pu(i){return i.includes(":")}function xa(i){return Pu(i)?i.split(":")[0]:i}const tE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},rE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ue(i,e){const{message:t,code:s}=rE[i];return{message:e?`${t} ${e}`:t,code:s}}function Nt(i,e){const{message:t,code:s}=tE[i];return{message:e?`${t} ${e}`:t,code:s}}function Zr(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function In(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function ar(i){return typeof i>"u"}function kt(i,e){return e&&ar(i)?!0:typeof i=="string"&&!!i.trim().length}function Cu(i,e){return e&&ar(i)?!0:typeof i=="number"&&!isNaN(i)}function iE(i,e){const{requiredNamespaces:t}=e,s=Object.keys(i.namespaces),a=Object.keys(t);let c=!0;return Ji(a,s)?(s.forEach(p=>{const{accounts:f,methods:_,events:g}=i.namespaces[p],w=On(f),A=t[p];(!Ji(Sp(p,A),w)||!Ji(A.methods,_)||!Ji(A.events,g))&&(c=!1)}),c):!1}function Na(i){return kt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function nE(i){if(kt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Na(t)}}return!1}function sE(i){if(kt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function aE(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function oE(i){return i==null?void 0:i.topic}function cE(i,e){let t=null;return kt(i==null?void 0:i.publicKey,!1)||(t=ue("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function nf(i){let e=!0;return Zr(i)?i.length&&(e=i.every(t=>kt(t,!1))):e=!1,e}function uE(i,e,t){let s=null;return Zr(e)&&e.length?e.forEach(a=>{s||Na(a)||(s=Nt("UNSUPPORTED_CHAINS",`${t}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):Na(i)||(s=Nt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function hE(i,e,t){let s=null;return Object.entries(i).forEach(([a,c])=>{if(s)return;const p=uE(a,Sp(a,c),`${e} ${t}`);p&&(s=p)}),s}function lE(i,e){let t=null;return Zr(i)?i.forEach(s=>{t||nE(s)||(t=Nt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Nt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function fE(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const a=lE(s==null?void 0:s.accounts,`${e} namespace`);a&&(t=a)}),t}function pE(i,e){let t=null;return nf(i==null?void 0:i.methods)?nf(i==null?void 0:i.events)||(t=Nt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Nt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Rp(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const a=pE(s,`${e}, namespace`);a&&(t=a)}),t}function dE(i,e,t){let s=null;if(i&&In(i)){const a=Rp(i,e);a&&(s=a);const c=hE(i,e,t);c&&(s=c)}else s=ue("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function Oa(i,e){let t=null;if(i&&In(i)){const s=Rp(i,e);s&&(t=s);const a=fE(i,e);a&&(t=a)}else t=ue("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function $p(i){return kt(i.protocol,!0)}function gE(i,e){let t=!1;return e&&!i?t=!0:i&&Zr(i)&&i.length&&i.forEach(s=>{t=$p(s)}),t}function _E(i){return typeof i=="number"}function gr(i){return typeof i<"u"&&typeof i!==null}function yE(i){return!(!i||typeof i!="object"||!i.code||!Cu(i.code,!1)||!i.message||!kt(i.message,!1))}function vE(i){return!(ar(i)||!kt(i.method,!1))}function bE(i){return!(ar(i)||ar(i.result)&&ar(i.error)||!Cu(i.id,!1)||!kt(i.jsonrpc,!1))}function mE(i){return!(ar(i)||!kt(i.name,!1))}function sf(i,e){return!(!Na(e)||!Xw(i).includes(e))}function wE(i,e,t){return kt(t,!1)?Zw(i,e).includes(t):!1}function EE(i,e,t){return kt(t,!1)?Qw(i,e).includes(t):!1}function af(i,e,t){let s=null;const a=DE(i),c=SE(e),p=Object.keys(a),f=Object.keys(c),_=of(Object.keys(i)),g=of(Object.keys(e)),w=_.filter(A=>!g.includes(A));return w.length&&(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${w.toString()}
      Received: ${Object.keys(e).toString()}`)),Ji(p,f)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${p.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(A=>{if(!A.includes(":")||s)return;const I=On(e[A].accounts);I.includes(A)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${A}
        Required: ${A}
        Approved: ${I.toString()}`))}),p.forEach(A=>{s||(Ji(a[A].methods,c[A].methods)?Ji(a[A].events,c[A].events)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${A}`)):s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${A}`))}),s}function DE(i){const e={};return Object.keys(i).forEach(t=>{var s;t.includes(":")?e[t]=i[t]:(s=i[t].chains)==null||s.forEach(a=>{e[a]={methods:i[t].methods,events:i[t].events}})}),e}function of(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function SE(i){const e={};return Object.keys(i).forEach(t=>{if(t.includes(":"))e[t]=i[t];else{const s=On(i[t].accounts);s==null||s.forEach(a=>{e[a]={accounts:i[t].accounts.filter(c=>c.includes(`${a}:`)),methods:i[t].methods,events:i[t].events}})}}),e}function IE(i,e){return Cu(i,!1)&&i<=e.max&&i>=e.min}var Ba={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xc=function(i,e){return Xc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a])},Xc(i,e)};function xE(i,e){Xc(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Zc=function(){return Zc=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Zc.apply(this,arguments)};function OE(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(t[s[a]]=i[s[a]]);return t}function PE(i,e,t,s){var a=arguments.length,c=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(p=i[f])&&(c=(a<3?p(c):a>3?p(e,t,c):p(e,t))||c);return a>3&&c&&Object.defineProperty(e,t,c),c}function CE(i,e){return function(t,s){e(t,s,i)}}function AE(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function TE(i,e,t,s){function a(c){return c instanceof t?c:new t(function(p){p(c)})}return new(t||(t=Promise))(function(c,p){function f(w){try{g(s.next(w))}catch(A){p(A)}}function _(w){try{g(s.throw(w))}catch(A){p(A)}}function g(w){w.done?c(w.value):a(w.value).then(f,_)}g((s=s.apply(i,e||[])).next())})}function NE(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,a,c,p;return p={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function f(g){return function(w){return _([g,w])}}function _(g){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,a&&(c=g[0]&2?a.return:g[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,g[1])).done)return c;switch(a=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(w){g=[6,w],a=0}finally{s=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function RE(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function $E(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function Qc(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),a,c=[],p;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)c.push(a.value)}catch(f){p={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(p)throw p.error}}return c}function FE(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Fp(arguments[e]));return i}function UE(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),a=0,e=0;e<t;e++)for(var c=arguments[e],p=0,f=c.length;p<f;p++,a++)s[a]=c[p];return s}function us(i){return this instanceof us?(this.v=i,this):new us(i)}function jE(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),a,c=[];return a={},p("next"),p("throw"),p("return"),a[Symbol.asyncIterator]=function(){return this},a;function p(I){s[I]&&(a[I]=function(C){return new Promise(function(U,H){c.push([I,C,U,H])>1||f(I,C)})})}function f(I,C){try{_(s[I](C))}catch(U){A(c[0][3],U)}}function _(I){I.value instanceof us?Promise.resolve(I.value.v).then(g,w):A(c[0][2],I)}function g(I){f("next",I)}function w(I){f("throw",I)}function A(I,C){I(C),c.shift(),c.length&&f(c[0][0],c[0][1])}}function LE(i){var e,t;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,c){e[a]=i[a]?function(p){return(t=!t)?{value:us(i[a](p)),done:a==="return"}:c?c(p):p}:c}}function ME(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Qc=="function"?Qc(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(p){return new Promise(function(f,_){p=i[c](p),a(f,_,p.done,p.value)})}}function a(c,p,f,_){Promise.resolve(_).then(function(g){c({value:g,done:f})},p)}}function qE(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function zE(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function HE(i){return i&&i.__esModule?i:{default:i}}function BE(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function KE(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const VE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Zc},__asyncDelegator:LE,__asyncGenerator:jE,__asyncValues:ME,__await:us,__awaiter:TE,__classPrivateFieldGet:BE,__classPrivateFieldSet:KE,__createBinding:RE,__decorate:PE,__exportStar:$E,__extends:xE,__generator:NE,__importDefault:HE,__importStar:zE,__makeTemplateObject:qE,__metadata:AE,__param:CE,__read:Fp,__rest:OE,__spread:FE,__spreadArrays:UE,__values:Qc},Symbol.toStringTag,{value:"Module"})),Up=fs(VE);var _s={};Object.defineProperty(_s,"__esModule",{value:!0});function kE(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return JSON.parse(i)}catch{return i}}_s.safeJsonParse=kE;function GE(i){return typeof i=="string"?i:JSON.stringify(i,(e,t)=>typeof t>"u"?null:t)}_s.safeJsonStringify=GE;var Jn={exports:{}},cf;function WE(){return cf||(cf=1,function(){let i;function e(){}i=e,i.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,s){this[t]=String(s)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Yi<"u"&&Yi.localStorage?Jn.exports=Yi.localStorage:typeof window<"u"&&window.localStorage?Jn.exports=window.localStorage:Jn.exports=new e}()),Jn.exports}var Sc={},Xn={},uf;function YE(){if(uf)return Xn;uf=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.IKeyValueStorage=void 0;class i{}return Xn.IKeyValueStorage=i,Xn}var Zn={},hf;function JE(){if(hf)return Zn;hf=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.parseEntry=void 0;const i=_s;function e(t){var s;return[t[0],i.safeJsonParse((s=t[1])!==null&&s!==void 0?s:"")]}return Zn.parseEntry=e,Zn}var lf;function XE(){return lf||(lf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Up;e.__exportStar(YE(),i),e.__exportStar(JE(),i)}(Sc)),Sc}Object.defineProperty(Ba,"__esModule",{value:!0});Ba.KeyValueStorage=void 0;const Dn=Up,ff=_s,ZE=Dn.__importDefault(WE()),QE=XE();class jp{constructor(){this.localStorage=ZE.default}getKeys(){return Dn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Dn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(QE.parseEntry)})}getItem(e){return Dn.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return ff.safeJsonParse(t)})}setItem(e,t){return Dn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,ff.safeJsonStringify(t))})}removeItem(e){return Dn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Ba.KeyValueStorage=jp;var e3=Ba.default=jp,Pn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eu=function(i,e){return eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a])},eu(i,e)};function t3(i,e){eu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var tu=function(){return tu=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},tu.apply(this,arguments)};function r3(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(t[s[a]]=i[s[a]]);return t}function i3(i,e,t,s){var a=arguments.length,c=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(p=i[f])&&(c=(a<3?p(c):a>3?p(e,t,c):p(e,t))||c);return a>3&&c&&Object.defineProperty(e,t,c),c}function n3(i,e){return function(t,s){e(t,s,i)}}function s3(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function a3(i,e,t,s){function a(c){return c instanceof t?c:new t(function(p){p(c)})}return new(t||(t=Promise))(function(c,p){function f(w){try{g(s.next(w))}catch(A){p(A)}}function _(w){try{g(s.throw(w))}catch(A){p(A)}}function g(w){w.done?c(w.value):a(w.value).then(f,_)}g((s=s.apply(i,e||[])).next())})}function o3(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,a,c,p;return p={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function f(g){return function(w){return _([g,w])}}function _(g){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,a&&(c=g[0]&2?a.return:g[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,g[1])).done)return c;switch(a=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(w){g=[6,w],a=0}finally{s=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function c3(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function u3(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function ru(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),a,c=[],p;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)c.push(a.value)}catch(f){p={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(p)throw p.error}}return c}function h3(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Lp(arguments[e]));return i}function l3(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),a=0,e=0;e<t;e++)for(var c=arguments[e],p=0,f=c.length;p<f;p++,a++)s[a]=c[p];return s}function hs(i){return this instanceof hs?(this.v=i,this):new hs(i)}function f3(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),a,c=[];return a={},p("next"),p("throw"),p("return"),a[Symbol.asyncIterator]=function(){return this},a;function p(I){s[I]&&(a[I]=function(C){return new Promise(function(U,H){c.push([I,C,U,H])>1||f(I,C)})})}function f(I,C){try{_(s[I](C))}catch(U){A(c[0][3],U)}}function _(I){I.value instanceof hs?Promise.resolve(I.value.v).then(g,w):A(c[0][2],I)}function g(I){f("next",I)}function w(I){f("throw",I)}function A(I,C){I(C),c.shift(),c.length&&f(c[0][0],c[0][1])}}function p3(i){var e,t;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,c){e[a]=i[a]?function(p){return(t=!t)?{value:hs(i[a](p)),done:a==="return"}:c?c(p):p}:c}}function d3(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof ru=="function"?ru(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(p){return new Promise(function(f,_){p=i[c](p),a(f,_,p.done,p.value)})}}function a(c,p,f,_){Promise.resolve(_).then(function(g){c({value:g,done:f})},p)}}function g3(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function _3(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function y3(i){return i&&i.__esModule?i:{default:i}}function v3(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function b3(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const m3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return tu},__asyncDelegator:p3,__asyncGenerator:f3,__asyncValues:d3,__await:hs,__awaiter:a3,__classPrivateFieldGet:v3,__classPrivateFieldSet:b3,__createBinding:c3,__decorate:i3,__exportStar:u3,__extends:t3,__generator:o3,__importDefault:y3,__importStar:_3,__makeTemplateObject:g3,__metadata:s3,__param:n3,__read:Lp,__rest:r3,__spread:h3,__spreadArrays:l3,__values:ru},Symbol.toStringTag,{value:"Module"})),Ka=fs(m3);var Qn={},Ic={},es={};class Qi{}const w3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Qi},Symbol.toStringTag,{value:"Module"})),E3=fs(w3);var pf;function D3(){if(pf)return es;pf=1,Object.defineProperty(es,"__esModule",{value:!0}),es.IHeartBeat=void 0;const i=E3;class e extends i.IEvents{constructor(s){super()}}return es.IHeartBeat=e,es}var df;function Mp(){return df||(df=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ka.__exportStar(D3(),i)}(Ic)),Ic}var xc={},Gi={},gf;function S3(){if(gf)return Gi;gf=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.HEARTBEAT_EVENTS=Gi.HEARTBEAT_INTERVAL=void 0;const i=ye;return Gi.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,Gi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Gi}var _f;function qp(){return _f||(_f=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ka.__exportStar(S3(),i)}(xc)),xc}var yf;function I3(){if(yf)return Qn;yf=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.HeartBeat=void 0;const i=Ka,e=Qr,t=ye,s=Mp(),a=qp();class c extends s.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||a.HEARTBEAT_INTERVAL}static init(f){return i.__awaiter(this,void 0,void 0,function*(){const _=new c(f);return yield _.init(),_})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,_){this.events.on(f,_)}once(f,_){this.events.once(f,_)}off(f,_){this.events.off(f,_)}removeListener(f,_){this.events.removeListener(f,_)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return Qn.HeartBeat=c,Qn}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ka;e.__exportStar(I3(),i),e.__exportStar(Mp(),i),e.__exportStar(qp(),i)})(Pn);var Qe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var iu=function(i,e){return iu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a])},iu(i,e)};function x3(i,e){iu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var nu=function(){return nu=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},nu.apply(this,arguments)};function O3(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(t[s[a]]=i[s[a]]);return t}function P3(i,e,t,s){var a=arguments.length,c=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(p=i[f])&&(c=(a<3?p(c):a>3?p(e,t,c):p(e,t))||c);return a>3&&c&&Object.defineProperty(e,t,c),c}function C3(i,e){return function(t,s){e(t,s,i)}}function A3(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function T3(i,e,t,s){function a(c){return c instanceof t?c:new t(function(p){p(c)})}return new(t||(t=Promise))(function(c,p){function f(w){try{g(s.next(w))}catch(A){p(A)}}function _(w){try{g(s.throw(w))}catch(A){p(A)}}function g(w){w.done?c(w.value):a(w.value).then(f,_)}g((s=s.apply(i,e||[])).next())})}function N3(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,a,c,p;return p={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function f(g){return function(w){return _([g,w])}}function _(g){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,a&&(c=g[0]&2?a.return:g[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,g[1])).done)return c;switch(a=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(w){g=[6,w],a=0}finally{s=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function R3(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function $3(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function su(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),a,c=[],p;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)c.push(a.value)}catch(f){p={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(p)throw p.error}}return c}function F3(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(zp(arguments[e]));return i}function U3(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),a=0,e=0;e<t;e++)for(var c=arguments[e],p=0,f=c.length;p<f;p++,a++)s[a]=c[p];return s}function ls(i){return this instanceof ls?(this.v=i,this):new ls(i)}function j3(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),a,c=[];return a={},p("next"),p("throw"),p("return"),a[Symbol.asyncIterator]=function(){return this},a;function p(I){s[I]&&(a[I]=function(C){return new Promise(function(U,H){c.push([I,C,U,H])>1||f(I,C)})})}function f(I,C){try{_(s[I](C))}catch(U){A(c[0][3],U)}}function _(I){I.value instanceof ls?Promise.resolve(I.value.v).then(g,w):A(c[0][2],I)}function g(I){f("next",I)}function w(I){f("throw",I)}function A(I,C){I(C),c.shift(),c.length&&f(c[0][0],c[0][1])}}function L3(i){var e,t;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,c){e[a]=i[a]?function(p){return(t=!t)?{value:ls(i[a](p)),done:a==="return"}:c?c(p):p}:c}}function M3(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof su=="function"?su(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(p){return new Promise(function(f,_){p=i[c](p),a(f,_,p.done,p.value)})}}function a(c,p,f,_){Promise.resolve(_).then(function(g){c({value:g,done:f})},p)}}function q3(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function z3(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function H3(i){return i&&i.__esModule?i:{default:i}}function B3(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function K3(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const V3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return nu},__asyncDelegator:L3,__asyncGenerator:j3,__asyncValues:M3,__await:ls,__awaiter:T3,__classPrivateFieldGet:B3,__classPrivateFieldSet:K3,__createBinding:R3,__decorate:P3,__exportStar:$3,__extends:x3,__generator:N3,__importDefault:H3,__importStar:z3,__makeTemplateObject:q3,__metadata:A3,__param:C3,__read:zp,__rest:O3,__spread:F3,__spreadArrays:U3,__values:su},Symbol.toStringTag,{value:"Module"})),k3=fs(V3);var Oc,vf;function G3(){if(vf)return Oc;vf=1;function i(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Oc=e;function e(t,s,a){var c=a&&a.stringify||i,p=1;if(typeof t=="object"&&t!==null){var f=s.length+p;if(f===1)return t;var _=new Array(f);_[0]=c(t);for(var g=1;g<f;g++)_[g]=c(s[g]);return _.join(" ")}if(typeof t!="string")return t;var w=s.length;if(w===0)return t;for(var A="",I=1-p,C=-1,U=t&&t.length||0,H=0;H<U;){if(t.charCodeAt(H)===37&&H+1<U){switch(C=C>-1?C:0,t.charCodeAt(H+1)){case 100:case 102:if(I>=w||s[I]==null)break;C<H&&(A+=t.slice(C,H)),A+=Number(s[I]),C=H+2,H++;break;case 105:if(I>=w||s[I]==null)break;C<H&&(A+=t.slice(C,H)),A+=Math.floor(Number(s[I])),C=H+2,H++;break;case 79:case 111:case 106:if(I>=w||s[I]===void 0)break;C<H&&(A+=t.slice(C,H));var J=typeof s[I];if(J==="string"){A+="'"+s[I]+"'",C=H+2,H++;break}if(J==="function"){A+=s[I].name||"<anonymous>",C=H+2,H++;break}A+=c(s[I]),C=H+2,H++;break;case 115:if(I>=w)break;C<H&&(A+=t.slice(C,H)),A+=String(s[I]),C=H+2,H++;break;case 37:C<H&&(A+=t.slice(C,H)),A+="%",C=H+2,H++,I--;break}++I}++H}return C===-1?t:(C<U&&(A+=t.slice(C)),A)}return Oc}var Pc,bf;function W3(){if(bf)return Pc;bf=1;const i=G3();Pc=a;const e=O().console||{},t={mapHttpRequest:U,mapHttpResponse:U,wrapRequestSerializer:H,wrapResponseSerializer:H,wrapErrorSerializer:H,req:U,res:U,err:I};function s(m,u){return Array.isArray(m)?m.filter(function(K){return K!=="!stdSerializers.err"}):m===!0?Object.keys(u):!1}function a(m){m=m||{},m.browser=m.browser||{};const u=m.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const b=m.browser.write||e;m.browser.write&&(m.browser.asObject=!0);const K=m.serializers||{},k=s(m.browser.serialize,K);let ae=m.browser.serialize;Array.isArray(m.browser.serialize)&&m.browser.serialize.indexOf("!stdSerializers.err")>-1&&(ae=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),m.enabled===!1&&(m.level="silent");const ge=m.level||"info",R=Object.create(b);R.log||(R.log=J),Object.defineProperty(R,"levelVal",{get:le}),Object.defineProperty(R,"level",{get:te,set:G});const z={transmit:u,serialize:k,asObject:m.browser.asObject,levels:ce,timestamp:C(m)};R.levels=a.levels,R.level=ge,R.setMaxListeners=R.getMaxListeners=R.emit=R.addListener=R.on=R.prependListener=R.once=R.prependOnceListener=R.removeListener=R.removeAllListeners=R.listeners=R.listenerCount=R.eventNames=R.write=R.flush=J,R.serializers=K,R._serialize=k,R._stdErrSerialize=ae,R.child=ee,u&&(R._logEvent=A());function le(){return this.level==="silent"?1/0:this.levels.values[this.level]}function te(){return this._level}function G(W){if(W!=="silent"&&!this.levels.values[W])throw Error("unknown level "+W);this._level=W,c(z,R,"error","log"),c(z,R,"fatal","error"),c(z,R,"warn","error"),c(z,R,"info","log"),c(z,R,"debug","log"),c(z,R,"trace","log")}function ee(W,re){if(!W)throw new Error("missing bindings for child Pino");re=re||{},k&&W.serializers&&(re.serializers=W.serializers);const xe=re.serializers;if(k&&xe){var ie=Object.assign({},K,xe),me=m.browser.serialize===!0?Object.keys(ie):k;delete W.serializers,_([W],me,ie,this._stdErrSerialize)}function he(ve){this._childLevel=(ve._childLevel|0)+1,this.error=g(ve,W,"error"),this.fatal=g(ve,W,"fatal"),this.warn=g(ve,W,"warn"),this.info=g(ve,W,"info"),this.debug=g(ve,W,"debug"),this.trace=g(ve,W,"trace"),ie&&(this.serializers=ie,this._serialize=me),u&&(this._logEvent=A([].concat(ve._logEvent.bindings,W)))}return he.prototype=this,new he(this)}return R}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=t,a.stdTimeFunctions=Object.assign({},{nullTime:se,epochTime:T,unixTime:j,isoTime:S});function c(m,u,b,K){const k=Object.getPrototypeOf(u);u[b]=u.levelVal>u.levels.values[b]?J:k[b]?k[b]:e[b]||e[K]||J,p(m,u,b)}function p(m,u,b){!m.transmit&&u[b]===J||(u[b]=function(K){return function(){const ae=m.timestamp(),ce=new Array(arguments.length),ge=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var R=0;R<ce.length;R++)ce[R]=arguments[R];if(m.serialize&&!m.asObject&&_(ce,this._serialize,this.serializers,this._stdErrSerialize),m.asObject?K.call(ge,f(this,b,ce,ae)):K.apply(ge,ce),m.transmit){const z=m.transmit.level||u.level,le=a.levels.values[z],te=a.levels.values[b];if(te<le)return;w(this,{ts:ae,methodLevel:b,methodValue:te,transmitLevel:z,transmitValue:a.levels.values[m.transmit.level||u.level],send:m.transmit.send,val:u.levelVal},ce)}}}(u[b]))}function f(m,u,b,K){m._serialize&&_(b,m._serialize,m.serializers,m._stdErrSerialize);const k=b.slice();let ae=k[0];const ce={};K&&(ce.time=K),ce.level=a.levels.values[u];let ge=(m._childLevel|0)+1;if(ge<1&&(ge=1),ae!==null&&typeof ae=="object"){for(;ge--&&typeof k[0]=="object";)Object.assign(ce,k.shift());ae=k.length?i(k.shift(),k):void 0}else typeof ae=="string"&&(ae=i(k.shift(),k));return ae!==void 0&&(ce.msg=ae),ce}function _(m,u,b,K){for(const k in m)if(K&&m[k]instanceof Error)m[k]=a.stdSerializers.err(m[k]);else if(typeof m[k]=="object"&&!Array.isArray(m[k]))for(const ae in m[k])u&&u.indexOf(ae)>-1&&ae in b&&(m[k][ae]=b[ae](m[k][ae]))}function g(m,u,b){return function(){const K=new Array(1+arguments.length);K[0]=u;for(var k=1;k<K.length;k++)K[k]=arguments[k-1];return m[b].apply(this,K)}}function w(m,u,b){const K=u.send,k=u.ts,ae=u.methodLevel,ce=u.methodValue,ge=u.val,R=m._logEvent.bindings;_(b,m._serialize||Object.keys(m.serializers),m.serializers,m._stdErrSerialize===void 0?!0:m._stdErrSerialize),m._logEvent.ts=k,m._logEvent.messages=b.filter(function(z){return R.indexOf(z)===-1}),m._logEvent.level.label=ae,m._logEvent.level.value=ce,K(ae,m._logEvent,ge),m._logEvent=A(R)}function A(m){return{ts:0,messages:[],bindings:m||[],level:{label:"",value:0}}}function I(m){const u={type:m.constructor.name,msg:m.message,stack:m.stack};for(const b in m)u[b]===void 0&&(u[b]=m[b]);return u}function C(m){return typeof m.timestamp=="function"?m.timestamp:m.timestamp===!1?se:T}function U(){return{}}function H(m){return m}function J(){}function se(){return!1}function T(){return Date.now()}function j(){return Math.round(Date.now()/1e3)}function S(){return new Date(Date.now()).toISOString()}function O(){function m(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return m(self)||m(window)||m(this)||{}}}return Pc}var Wi={},mf;function Hp(){return mf||(mf=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.PINO_CUSTOM_CONTEXT_KEY=Wi.PINO_LOGGER_DEFAULTS=void 0,Wi.PINO_LOGGER_DEFAULTS={level:"info"},Wi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Wi}var sr={},wf;function Y3(){if(wf)return sr;wf=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.generateChildLogger=sr.formatChildLoggerContext=sr.getLoggerContext=sr.setBrowserLoggerContext=sr.getBrowserLoggerContext=sr.getDefaultLoggerOptions=void 0;const i=Hp();function e(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||i.PINO_LOGGER_DEFAULTS.level})}sr.getDefaultLoggerOptions=e;function t(f,_=i.PINO_CUSTOM_CONTEXT_KEY){return f[_]||""}sr.getBrowserLoggerContext=t;function s(f,_,g=i.PINO_CUSTOM_CONTEXT_KEY){return f[g]=_,f}sr.setBrowserLoggerContext=s;function a(f,_=i.PINO_CUSTOM_CONTEXT_KEY){let g="";return typeof f.bindings>"u"?g=t(f,_):g=f.bindings().context||"",g}sr.getLoggerContext=a;function c(f,_,g=i.PINO_CUSTOM_CONTEXT_KEY){const w=a(f,g);return w.trim()?`${w}/${_}`:_}sr.formatChildLoggerContext=c;function p(f,_,g=i.PINO_CUSTOM_CONTEXT_KEY){const w=c(f,_,g),A=f.child({context:w});return s(A,w,g)}return sr.generateChildLogger=p,sr}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const e=k3,t=e.__importDefault(W3());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(Hp(),i),e.__exportStar(Y3(),i)})(Qe);class J3 extends Qi{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class X3 extends Qi{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Z3{constructor(e,t){this.logger=e,this.core=t}}let Q3=class extends Qi{constructor(e,t){super(),this.relayer=e,this.logger=t}},e6=class extends Qi{constructor(e){super()}},t6=class{constructor(e,t,s,a){this.core=e,this.logger=t,this.name=s}};class r6 extends Qi{constructor(e,t){super(),this.relayer=e,this.logger=t}}let i6=class extends Qi{constructor(e,t){super(),this.core=e,this.logger=t}},n6=class{constructor(e,t){this.projectId=e,this.logger=t}},s6=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},a6=class{constructor(e){this.client=e}};var Au={},Bp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=Dr;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(_,g){if(g===void 0&&(g=_.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var w=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&g>0;)this._buffer[this._bufferLength++]=_[w++],g--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(w=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,_,w,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=_[w++],g--;return this},f.prototype.finish=function(_){if(!this._finished){var g=this._bytesHashed,w=this._bufferLength,A=g/536870912|0,I=g<<3,C=g%128<112?128:256;this._buffer[w]=128;for(var U=w+1;U<C-8;U++)this._buffer[U]=0;e.writeUint32BE(A,this._buffer,C-8),e.writeUint32BE(I,this._buffer,C-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,C),this._finished=!0}for(var U=0;U<this.digestLength/8;U++)e.writeUint32BE(this._stateHi[U],_,U*8),e.writeUint32BE(this._stateLo[U],_,U*8+4);return this},f.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(_){return this._stateHi.set(_.stateHi),this._stateLo.set(_.stateLo),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(_){t.wipe(_.stateHi),t.wipe(_.stateLo),_.buffer&&t.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},f}();i.SHA512=s;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(f,_,g,w,A,I,C){for(var U=g[0],H=g[1],J=g[2],se=g[3],T=g[4],j=g[5],S=g[6],O=g[7],m=w[0],u=w[1],b=w[2],K=w[3],k=w[4],ae=w[5],ce=w[6],ge=w[7],R,z,le,te,G,ee,W,re;C>=128;){for(var xe=0;xe<16;xe++){var ie=8*xe+I;f[xe]=e.readUint32BE(A,ie),_[xe]=e.readUint32BE(A,ie+4)}for(var xe=0;xe<80;xe++){var me=U,he=H,ve=J,q=se,M=T,N=j,l=S,x=O,ne=m,fe=u,Se=b,He=K,Ve=k,je=ae,pt=ce,dt=ge;if(R=O,z=ge,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=(T>>>14|k<<32-14)^(T>>>18|k<<32-18)^(k>>>41-32|T<<32-(41-32)),z=(k>>>14|T<<32-14)^(k>>>18|T<<32-18)^(T>>>41-32|k<<32-(41-32)),G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,R=T&j^~T&S,z=k&ae^~k&ce,G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,R=a[xe*2],z=a[xe*2+1],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,R=f[xe%16],z=_[xe%16],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,le=W&65535|re<<16,te=G&65535|ee<<16,R=le,z=te,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=(U>>>28|m<<32-28)^(m>>>34-32|U<<32-(34-32))^(m>>>39-32|U<<32-(39-32)),z=(m>>>28|U<<32-28)^(U>>>34-32|m<<32-(34-32))^(U>>>39-32|m<<32-(39-32)),G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,R=U&H^U&J^H&J,z=m&u^m&b^u&b,G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,x=W&65535|re<<16,dt=G&65535|ee<<16,R=q,z=He,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=le,z=te,G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,q=W&65535|re<<16,He=G&65535|ee<<16,H=me,J=he,se=ve,T=q,j=M,S=N,O=l,U=x,u=ne,b=fe,K=Se,k=He,ae=Ve,ce=je,ge=pt,m=dt,xe%16===15)for(var ie=0;ie<16;ie++)R=f[ie],z=_[ie],G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=f[(ie+9)%16],z=_[(ie+9)%16],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,le=f[(ie+1)%16],te=_[(ie+1)%16],R=(le>>>1|te<<32-1)^(le>>>8|te<<32-8)^le>>>7,z=(te>>>1|le<<32-1)^(te>>>8|le<<32-8)^(te>>>7|le<<32-7),G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,le=f[(ie+14)%16],te=_[(ie+14)%16],R=(le>>>19|te<<32-19)^(te>>>61-32|le<<32-(61-32))^le>>>6,z=(te>>>19|le<<32-19)^(le>>>61-32|te<<32-(61-32))^(te>>>6|le<<32-6),G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,f[ie]=W&65535|re<<16,_[ie]=G&65535|ee<<16}R=U,z=m,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=g[0],z=w[0],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,g[0]=U=W&65535|re<<16,w[0]=m=G&65535|ee<<16,R=H,z=u,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=g[1],z=w[1],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,g[1]=H=W&65535|re<<16,w[1]=u=G&65535|ee<<16,R=J,z=b,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=g[2],z=w[2],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,g[2]=J=W&65535|re<<16,w[2]=b=G&65535|ee<<16,R=se,z=K,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=g[3],z=w[3],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,g[3]=se=W&65535|re<<16,w[3]=K=G&65535|ee<<16,R=T,z=k,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=g[4],z=w[4],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,g[4]=T=W&65535|re<<16,w[4]=k=G&65535|ee<<16,R=j,z=ae,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=g[5],z=w[5],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,g[5]=j=W&65535|re<<16,w[5]=ae=G&65535|ee<<16,R=S,z=ce,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=g[6],z=w[6],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,g[6]=S=W&65535|re<<16,w[6]=ce=G&65535|ee<<16,R=O,z=ge,G=z&65535,ee=z>>>16,W=R&65535,re=R>>>16,R=g[7],z=w[7],G+=z&65535,ee+=z>>>16,W+=R&65535,re+=R>>>16,ee+=G>>>16,W+=ee>>>16,re+=W>>>16,g[7]=O=W&65535|re<<16,w[7]=ge=G&65535|ee<<16,I+=128,C-=128}return I}function p(f){var _=new s;_.update(f);var g=_.digest();return _.clean(),g}i.hash=p})(Bp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=xn,t=Bp,s=Dr;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function a(q){const M=new Float64Array(16);if(q)for(let N=0;N<q.length;N++)M[N]=q[N];return M}const c=new Uint8Array(32);c[0]=9;const p=a(),f=a([1]),_=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),w=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),A=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function C(q,M){for(let N=0;N<16;N++)q[N]=M[N]|0}function U(q){let M=1;for(let N=0;N<16;N++){let l=q[N]+M+65535;M=Math.floor(l/65536),q[N]=l-M*65536}q[0]+=M-1+37*(M-1)}function H(q,M,N){const l=~(N-1);for(let x=0;x<16;x++){const ne=l&(q[x]^M[x]);q[x]^=ne,M[x]^=ne}}function J(q,M){const N=a(),l=a();for(let x=0;x<16;x++)l[x]=M[x];U(l),U(l),U(l);for(let x=0;x<2;x++){N[0]=l[0]-65517;for(let fe=1;fe<15;fe++)N[fe]=l[fe]-65535-(N[fe-1]>>16&1),N[fe-1]&=65535;N[15]=l[15]-32767-(N[14]>>16&1);const ne=N[15]>>16&1;N[14]&=65535,H(l,N,1-ne)}for(let x=0;x<16;x++)q[2*x]=l[x]&255,q[2*x+1]=l[x]>>8}function se(q,M){let N=0;for(let l=0;l<32;l++)N|=q[l]^M[l];return(1&N-1>>>8)-1}function T(q,M){const N=new Uint8Array(32),l=new Uint8Array(32);return J(N,q),J(l,M),se(N,l)}function j(q){const M=new Uint8Array(32);return J(M,q),M[0]&1}function S(q,M){for(let N=0;N<16;N++)q[N]=M[2*N]+(M[2*N+1]<<8);q[15]&=32767}function O(q,M,N){for(let l=0;l<16;l++)q[l]=M[l]+N[l]}function m(q,M,N){for(let l=0;l<16;l++)q[l]=M[l]-N[l]}function u(q,M,N){let l,x,ne=0,fe=0,Se=0,He=0,Ve=0,je=0,pt=0,dt=0,Me=0,Ie=0,Re=0,$e=0,qe=0,Pe=0,Fe=0,De=0,Ce=0,Be=0,Oe=0,ke=0,We=0,et=0,tt=0,Je=0,Qt=0,ur=0,Br=0,er=0,ei=0,pi=0,Ti=0,mt=N[0],gt=N[1],wt=N[2],Et=N[3],vt=N[4],_t=N[5],$t=N[6],Ft=N[7],Dt=N[8],Ut=N[9],St=N[10],Pt=N[11],It=N[12],ht=N[13],jt=N[14],Lt=N[15];l=M[0],ne+=l*mt,fe+=l*gt,Se+=l*wt,He+=l*Et,Ve+=l*vt,je+=l*_t,pt+=l*$t,dt+=l*Ft,Me+=l*Dt,Ie+=l*Ut,Re+=l*St,$e+=l*Pt,qe+=l*It,Pe+=l*ht,Fe+=l*jt,De+=l*Lt,l=M[1],fe+=l*mt,Se+=l*gt,He+=l*wt,Ve+=l*Et,je+=l*vt,pt+=l*_t,dt+=l*$t,Me+=l*Ft,Ie+=l*Dt,Re+=l*Ut,$e+=l*St,qe+=l*Pt,Pe+=l*It,Fe+=l*ht,De+=l*jt,Ce+=l*Lt,l=M[2],Se+=l*mt,He+=l*gt,Ve+=l*wt,je+=l*Et,pt+=l*vt,dt+=l*_t,Me+=l*$t,Ie+=l*Ft,Re+=l*Dt,$e+=l*Ut,qe+=l*St,Pe+=l*Pt,Fe+=l*It,De+=l*ht,Ce+=l*jt,Be+=l*Lt,l=M[3],He+=l*mt,Ve+=l*gt,je+=l*wt,pt+=l*Et,dt+=l*vt,Me+=l*_t,Ie+=l*$t,Re+=l*Ft,$e+=l*Dt,qe+=l*Ut,Pe+=l*St,Fe+=l*Pt,De+=l*It,Ce+=l*ht,Be+=l*jt,Oe+=l*Lt,l=M[4],Ve+=l*mt,je+=l*gt,pt+=l*wt,dt+=l*Et,Me+=l*vt,Ie+=l*_t,Re+=l*$t,$e+=l*Ft,qe+=l*Dt,Pe+=l*Ut,Fe+=l*St,De+=l*Pt,Ce+=l*It,Be+=l*ht,Oe+=l*jt,ke+=l*Lt,l=M[5],je+=l*mt,pt+=l*gt,dt+=l*wt,Me+=l*Et,Ie+=l*vt,Re+=l*_t,$e+=l*$t,qe+=l*Ft,Pe+=l*Dt,Fe+=l*Ut,De+=l*St,Ce+=l*Pt,Be+=l*It,Oe+=l*ht,ke+=l*jt,We+=l*Lt,l=M[6],pt+=l*mt,dt+=l*gt,Me+=l*wt,Ie+=l*Et,Re+=l*vt,$e+=l*_t,qe+=l*$t,Pe+=l*Ft,Fe+=l*Dt,De+=l*Ut,Ce+=l*St,Be+=l*Pt,Oe+=l*It,ke+=l*ht,We+=l*jt,et+=l*Lt,l=M[7],dt+=l*mt,Me+=l*gt,Ie+=l*wt,Re+=l*Et,$e+=l*vt,qe+=l*_t,Pe+=l*$t,Fe+=l*Ft,De+=l*Dt,Ce+=l*Ut,Be+=l*St,Oe+=l*Pt,ke+=l*It,We+=l*ht,et+=l*jt,tt+=l*Lt,l=M[8],Me+=l*mt,Ie+=l*gt,Re+=l*wt,$e+=l*Et,qe+=l*vt,Pe+=l*_t,Fe+=l*$t,De+=l*Ft,Ce+=l*Dt,Be+=l*Ut,Oe+=l*St,ke+=l*Pt,We+=l*It,et+=l*ht,tt+=l*jt,Je+=l*Lt,l=M[9],Ie+=l*mt,Re+=l*gt,$e+=l*wt,qe+=l*Et,Pe+=l*vt,Fe+=l*_t,De+=l*$t,Ce+=l*Ft,Be+=l*Dt,Oe+=l*Ut,ke+=l*St,We+=l*Pt,et+=l*It,tt+=l*ht,Je+=l*jt,Qt+=l*Lt,l=M[10],Re+=l*mt,$e+=l*gt,qe+=l*wt,Pe+=l*Et,Fe+=l*vt,De+=l*_t,Ce+=l*$t,Be+=l*Ft,Oe+=l*Dt,ke+=l*Ut,We+=l*St,et+=l*Pt,tt+=l*It,Je+=l*ht,Qt+=l*jt,ur+=l*Lt,l=M[11],$e+=l*mt,qe+=l*gt,Pe+=l*wt,Fe+=l*Et,De+=l*vt,Ce+=l*_t,Be+=l*$t,Oe+=l*Ft,ke+=l*Dt,We+=l*Ut,et+=l*St,tt+=l*Pt,Je+=l*It,Qt+=l*ht,ur+=l*jt,Br+=l*Lt,l=M[12],qe+=l*mt,Pe+=l*gt,Fe+=l*wt,De+=l*Et,Ce+=l*vt,Be+=l*_t,Oe+=l*$t,ke+=l*Ft,We+=l*Dt,et+=l*Ut,tt+=l*St,Je+=l*Pt,Qt+=l*It,ur+=l*ht,Br+=l*jt,er+=l*Lt,l=M[13],Pe+=l*mt,Fe+=l*gt,De+=l*wt,Ce+=l*Et,Be+=l*vt,Oe+=l*_t,ke+=l*$t,We+=l*Ft,et+=l*Dt,tt+=l*Ut,Je+=l*St,Qt+=l*Pt,ur+=l*It,Br+=l*ht,er+=l*jt,ei+=l*Lt,l=M[14],Fe+=l*mt,De+=l*gt,Ce+=l*wt,Be+=l*Et,Oe+=l*vt,ke+=l*_t,We+=l*$t,et+=l*Ft,tt+=l*Dt,Je+=l*Ut,Qt+=l*St,ur+=l*Pt,Br+=l*It,er+=l*ht,ei+=l*jt,pi+=l*Lt,l=M[15],De+=l*mt,Ce+=l*gt,Be+=l*wt,Oe+=l*Et,ke+=l*vt,We+=l*_t,et+=l*$t,tt+=l*Ft,Je+=l*Dt,Qt+=l*Ut,ur+=l*St,Br+=l*Pt,er+=l*It,ei+=l*ht,pi+=l*jt,Ti+=l*Lt,ne+=38*Ce,fe+=38*Be,Se+=38*Oe,He+=38*ke,Ve+=38*We,je+=38*et,pt+=38*tt,dt+=38*Je,Me+=38*Qt,Ie+=38*ur,Re+=38*Br,$e+=38*er,qe+=38*ei,Pe+=38*pi,Fe+=38*Ti,x=1,l=ne+x+65535,x=Math.floor(l/65536),ne=l-x*65536,l=fe+x+65535,x=Math.floor(l/65536),fe=l-x*65536,l=Se+x+65535,x=Math.floor(l/65536),Se=l-x*65536,l=He+x+65535,x=Math.floor(l/65536),He=l-x*65536,l=Ve+x+65535,x=Math.floor(l/65536),Ve=l-x*65536,l=je+x+65535,x=Math.floor(l/65536),je=l-x*65536,l=pt+x+65535,x=Math.floor(l/65536),pt=l-x*65536,l=dt+x+65535,x=Math.floor(l/65536),dt=l-x*65536,l=Me+x+65535,x=Math.floor(l/65536),Me=l-x*65536,l=Ie+x+65535,x=Math.floor(l/65536),Ie=l-x*65536,l=Re+x+65535,x=Math.floor(l/65536),Re=l-x*65536,l=$e+x+65535,x=Math.floor(l/65536),$e=l-x*65536,l=qe+x+65535,x=Math.floor(l/65536),qe=l-x*65536,l=Pe+x+65535,x=Math.floor(l/65536),Pe=l-x*65536,l=Fe+x+65535,x=Math.floor(l/65536),Fe=l-x*65536,l=De+x+65535,x=Math.floor(l/65536),De=l-x*65536,ne+=x-1+37*(x-1),x=1,l=ne+x+65535,x=Math.floor(l/65536),ne=l-x*65536,l=fe+x+65535,x=Math.floor(l/65536),fe=l-x*65536,l=Se+x+65535,x=Math.floor(l/65536),Se=l-x*65536,l=He+x+65535,x=Math.floor(l/65536),He=l-x*65536,l=Ve+x+65535,x=Math.floor(l/65536),Ve=l-x*65536,l=je+x+65535,x=Math.floor(l/65536),je=l-x*65536,l=pt+x+65535,x=Math.floor(l/65536),pt=l-x*65536,l=dt+x+65535,x=Math.floor(l/65536),dt=l-x*65536,l=Me+x+65535,x=Math.floor(l/65536),Me=l-x*65536,l=Ie+x+65535,x=Math.floor(l/65536),Ie=l-x*65536,l=Re+x+65535,x=Math.floor(l/65536),Re=l-x*65536,l=$e+x+65535,x=Math.floor(l/65536),$e=l-x*65536,l=qe+x+65535,x=Math.floor(l/65536),qe=l-x*65536,l=Pe+x+65535,x=Math.floor(l/65536),Pe=l-x*65536,l=Fe+x+65535,x=Math.floor(l/65536),Fe=l-x*65536,l=De+x+65535,x=Math.floor(l/65536),De=l-x*65536,ne+=x-1+37*(x-1),q[0]=ne,q[1]=fe,q[2]=Se,q[3]=He,q[4]=Ve,q[5]=je,q[6]=pt,q[7]=dt,q[8]=Me,q[9]=Ie,q[10]=Re,q[11]=$e,q[12]=qe,q[13]=Pe,q[14]=Fe,q[15]=De}function b(q,M){u(q,M,M)}function K(q,M){const N=a();let l;for(l=0;l<16;l++)N[l]=M[l];for(l=253;l>=0;l--)b(N,N),l!==2&&l!==4&&u(N,N,M);for(l=0;l<16;l++)q[l]=N[l]}function k(q,M){const N=a();let l;for(l=0;l<16;l++)N[l]=M[l];for(l=250;l>=0;l--)b(N,N),l!==1&&u(N,N,M);for(l=0;l<16;l++)q[l]=N[l]}function ae(q,M){const N=a(),l=a(),x=a(),ne=a(),fe=a(),Se=a(),He=a(),Ve=a(),je=a();m(N,q[1],q[0]),m(je,M[1],M[0]),u(N,N,je),O(l,q[0],q[1]),O(je,M[0],M[1]),u(l,l,je),u(x,q[3],M[3]),u(x,x,g),u(ne,q[2],M[2]),O(ne,ne,ne),m(fe,l,N),m(Se,ne,x),O(He,ne,x),O(Ve,l,N),u(q[0],fe,Se),u(q[1],Ve,He),u(q[2],He,Se),u(q[3],fe,Ve)}function ce(q,M,N){for(let l=0;l<4;l++)H(q[l],M[l],N)}function ge(q,M){const N=a(),l=a(),x=a();K(x,M[2]),u(N,M[0],x),u(l,M[1],x),J(q,l),q[31]^=j(N)<<7}function R(q,M,N){C(q[0],p),C(q[1],f),C(q[2],f),C(q[3],p);for(let l=255;l>=0;--l){const x=N[l/8|0]>>(l&7)&1;ce(q,M,x),ae(M,q),ae(q,q),ce(q,M,x)}}function z(q,M){const N=[a(),a(),a(),a()];C(N[0],w),C(N[1],A),C(N[2],f),u(N[3],w,A),R(q,N,M)}function le(q){if(q.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const M=(0,t.hash)(q);M[0]&=248,M[31]&=127,M[31]|=64;const N=new Uint8Array(32),l=[a(),a(),a(),a()];z(l,M),ge(N,l);const x=new Uint8Array(64);return x.set(q),x.set(N,32),{publicKey:N,secretKey:x}}i.generateKeyPairFromSeed=le;function te(q){const M=(0,e.randomBytes)(32,q),N=le(M);return(0,s.wipe)(M),N}i.generateKeyPair=te;function G(q){if(q.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(q.subarray(32))}i.extractPublicKeyFromSecretKey=G;const ee=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function W(q,M){let N,l,x,ne;for(l=63;l>=32;--l){for(N=0,x=l-32,ne=l-12;x<ne;++x)M[x]+=N-16*M[l]*ee[x-(l-32)],N=Math.floor((M[x]+128)/256),M[x]-=N*256;M[x]+=N,M[l]=0}for(N=0,x=0;x<32;x++)M[x]+=N-(M[31]>>4)*ee[x],N=M[x]>>8,M[x]&=255;for(x=0;x<32;x++)M[x]-=N*ee[x];for(l=0;l<32;l++)M[l+1]+=M[l]>>8,q[l]=M[l]&255}function re(q){const M=new Float64Array(64);for(let N=0;N<64;N++)M[N]=q[N];for(let N=0;N<64;N++)q[N]=0;W(q,M)}function xe(q,M){const N=new Float64Array(64),l=[a(),a(),a(),a()],x=(0,t.hash)(q.subarray(0,32));x[0]&=248,x[31]&=127,x[31]|=64;const ne=new Uint8Array(64);ne.set(x.subarray(32),32);const fe=new t.SHA512;fe.update(ne.subarray(32)),fe.update(M);const Se=fe.digest();fe.clean(),re(Se),z(l,Se),ge(ne,l),fe.reset(),fe.update(ne.subarray(0,32)),fe.update(q.subarray(32)),fe.update(M);const He=fe.digest();re(He);for(let Ve=0;Ve<32;Ve++)N[Ve]=Se[Ve];for(let Ve=0;Ve<32;Ve++)for(let je=0;je<32;je++)N[Ve+je]+=He[Ve]*x[je];return W(ne.subarray(32),N),ne}i.sign=xe;function ie(q,M){const N=a(),l=a(),x=a(),ne=a(),fe=a(),Se=a(),He=a();return C(q[2],f),S(q[1],M),b(x,q[1]),u(ne,x,_),m(x,x,q[2]),O(ne,q[2],ne),b(fe,ne),b(Se,fe),u(He,Se,fe),u(N,He,x),u(N,N,ne),k(N,N),u(N,N,x),u(N,N,ne),u(N,N,ne),u(q[0],N,ne),b(l,q[0]),u(l,l,ne),T(l,x)&&u(q[0],q[0],I),b(l,q[0]),u(l,l,ne),T(l,x)?-1:(j(q[0])===M[31]>>7&&m(q[0],p,q[0]),u(q[3],q[0],q[1]),0)}function me(q,M,N){const l=new Uint8Array(32),x=[a(),a(),a(),a()],ne=[a(),a(),a(),a()];if(N.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(ie(ne,q))return!1;const fe=new t.SHA512;fe.update(N.subarray(0,32)),fe.update(q),fe.update(M);const Se=fe.digest();return re(Se),R(x,ne,Se),z(ne,N.subarray(32)),ae(x,ne),ge(l,x),!se(N,l)}i.verify=me;function he(q){let M=[a(),a(),a(),a()];if(ie(M,q))throw new Error("Ed25519: invalid public key");let N=a(),l=a(),x=M[1];O(N,f,x),m(l,f,x),K(l,l),u(N,N,l);let ne=new Uint8Array(32);return J(ne,N),ne}i.convertPublicKeyToX25519=he;function ve(q){const M=(0,t.hash)(q.subarray(0,32));M[0]&=248,M[31]&=127,M[31]|=64;const N=new Uint8Array(M.subarray(0,32));return(0,s.wipe)(M),N}i.convertSecretKeyToX25519=ve})(Au);const o6="EdDSA",c6="JWT",Kp=".",Vp="base64url",u6="utf8",h6="utf8",l6=":",f6="did",p6="key",Ef="base58btc",d6="z",g6="K36",_6=32;function Ra(i){return cr(_r(pu(i),u6),Vp)}function kp(i){const e=_r(g6,Ef),t=d6+cr(Bc([e,i]),Ef);return[f6,p6,t].join(l6)}function y6(i){return cr(i,Vp)}function v6(i){return _r([Ra(i.header),Ra(i.payload)].join(Kp),h6)}function b6(i){return[Ra(i.header),Ra(i.payload),y6(i.signature)].join(Kp)}function Df(i=xn.randomBytes(_6)){return Au.generateKeyPairFromSeed(i)}async function m6(i,e,t,s,a=ye.fromMiliseconds(Date.now())){const c={alg:o6,typ:c6},p=kp(s.publicKey),f=a+t,_={iss:p,sub:i,aud:e,iat:a,exp:f},g=v6({header:c,payload:_}),w=Au.sign(s.secretKey,g);return b6({header:c,payload:_,signature:w})}const w6=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),E6=()=>typeof window<"u",Sf=i=>i.split("?")[0],If=10,D6=w6();class S6{constructor(e){if(this.url=e,this.events=new Qr.EventEmitter,this.registering=!1,!Fl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(pu(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!Fl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,a)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),a(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const a=rb.isReactNative()?void 0:{rejectUnauthorized:!ib(e)},c=new D6(e,[],a);E6()?c.onerror=p=>{const f=p;s(this.emitError(f.error))}:c.on("error",p=>{s(this.emitError(p))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?np(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),a=s.message||s.toString(),c=du(e,a);this.events.emit("payload",c)}parseError(e,t=this.url){return nb(e,Sf(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>If&&this.events.setMaxListeners(If)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Sf(this.url)}`));return this.events.emit("register_error",t),t}}var $a={exports:{}};$a.exports;(function(i,e){var t=200,s="__lodash_hash_undefined__",a=1,c=2,p=9007199254740991,f="[object Arguments]",_="[object Array]",g="[object AsyncFunction]",w="[object Boolean]",A="[object Date]",I="[object Error]",C="[object Function]",U="[object GeneratorFunction]",H="[object Map]",J="[object Number]",se="[object Null]",T="[object Object]",j="[object Promise]",S="[object Proxy]",O="[object RegExp]",m="[object Set]",u="[object String]",b="[object Symbol]",K="[object Undefined]",k="[object WeakMap]",ae="[object ArrayBuffer]",ce="[object DataView]",ge="[object Float32Array]",R="[object Float64Array]",z="[object Int8Array]",le="[object Int16Array]",te="[object Int32Array]",G="[object Uint8Array]",ee="[object Uint8ClampedArray]",W="[object Uint16Array]",re="[object Uint32Array]",xe=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,he={};he[ge]=he[R]=he[z]=he[le]=he[te]=he[G]=he[ee]=he[W]=he[re]=!0,he[f]=he[_]=he[ae]=he[w]=he[ce]=he[A]=he[I]=he[C]=he[H]=he[J]=he[T]=he[O]=he[m]=he[u]=he[k]=!1;var ve=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,q=typeof self=="object"&&self&&self.Object===Object&&self,M=ve||q||Function("return this")(),N=e&&!e.nodeType&&e,l=N&&!0&&i&&!i.nodeType&&i,x=l&&l.exports===N,ne=x&&ve.process,fe=function(){try{return ne&&ne.binding&&ne.binding("util")}catch{}}(),Se=fe&&fe.isTypedArray;function He(E,$){for(var Z=-1,pe=E==null?0:E.length,ot=0,Te=[];++Z<pe;){var lt=E[Z];$(lt,Z,E)&&(Te[ot++]=lt)}return Te}function Ve(E,$){for(var Z=-1,pe=$.length,ot=E.length;++Z<pe;)E[ot+Z]=$[Z];return E}function je(E,$){for(var Z=-1,pe=E==null?0:E.length;++Z<pe;)if($(E[Z],Z,E))return!0;return!1}function pt(E,$){for(var Z=-1,pe=Array(E);++Z<E;)pe[Z]=$(Z);return pe}function dt(E){return function($){return E($)}}function Me(E,$){return E.has($)}function Ie(E,$){return E==null?void 0:E[$]}function Re(E){var $=-1,Z=Array(E.size);return E.forEach(function(pe,ot){Z[++$]=[ot,pe]}),Z}function $e(E,$){return function(Z){return E($(Z))}}function qe(E){var $=-1,Z=Array(E.size);return E.forEach(function(pe){Z[++$]=pe}),Z}var Pe=Array.prototype,Fe=Function.prototype,De=Object.prototype,Ce=M["__core-js_shared__"],Be=Fe.toString,Oe=De.hasOwnProperty,ke=function(){var E=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),We=De.toString,et=RegExp("^"+Be.call(Oe).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=x?M.Buffer:void 0,Je=M.Symbol,Qt=M.Uint8Array,ur=De.propertyIsEnumerable,Br=Pe.splice,er=Je?Je.toStringTag:void 0,ei=Object.getOwnPropertySymbols,pi=tt?tt.isBuffer:void 0,Ti=$e(Object.keys,Object),mt=yr(M,"DataView"),gt=yr(M,"Map"),wt=yr(M,"Promise"),Et=yr(M,"Set"),vt=yr(M,"WeakMap"),_t=yr(Object,"create"),$t=ri(mt),Ft=ri(gt),Dt=ri(wt),Ut=ri(Et),St=ri(vt),Pt=Je?Je.prototype:void 0,It=Pt?Pt.valueOf:void 0;function ht(E){var $=-1,Z=E==null?0:E.length;for(this.clear();++$<Z;){var pe=E[$];this.set(pe[0],pe[1])}}function jt(){this.__data__=_t?_t(null):{},this.size=0}function Lt(E){var $=this.has(E)&&delete this.__data__[E];return this.size-=$?1:0,$}function Ga(E){var $=this.__data__;if(_t){var Z=$[E];return Z===s?void 0:Z}return Oe.call($,E)?$[E]:void 0}function Wa(E){var $=this.__data__;return _t?$[E]!==void 0:Oe.call($,E)}function Ya(E,$){var Z=this.__data__;return this.size+=this.has(E)?0:1,Z[E]=_t&&$===void 0?s:$,this}ht.prototype.clear=jt,ht.prototype.delete=Lt,ht.prototype.get=Ga,ht.prototype.has=Wa,ht.prototype.set=Ya;function Sr(E){var $=-1,Z=E==null?0:E.length;for(this.clear();++$<Z;){var pe=E[$];this.set(pe[0],pe[1])}}function Ja(){this.__data__=[],this.size=0}function Xa(E){var $=this.__data__,Z=Ni($,E);if(Z<0)return!1;var pe=$.length-1;return Z==pe?$.pop():Br.call($,Z,1),--this.size,!0}function Za(E){var $=this.__data__,Z=Ni($,E);return Z<0?void 0:$[Z][1]}function Qa(E){return Ni(this.__data__,E)>-1}function eo(E,$){var Z=this.__data__,pe=Ni(Z,E);return pe<0?(++this.size,Z.push([E,$])):Z[pe][1]=$,this}Sr.prototype.clear=Ja,Sr.prototype.delete=Xa,Sr.prototype.get=Za,Sr.prototype.has=Qa,Sr.prototype.set=eo;function ti(E){var $=-1,Z=E==null?0:E.length;for(this.clear();++$<Z;){var pe=E[$];this.set(pe[0],pe[1])}}function en(){this.size=0,this.__data__={hash:new ht,map:new(gt||Sr),string:new ht}}function to(E){var $=di(this,E).delete(E);return this.size-=$?1:0,$}function tn(E){return di(this,E).get(E)}function ro(E){return di(this,E).has(E)}function io(E,$){var Z=di(this,E),pe=Z.size;return Z.set(E,$),this.size+=Z.size==pe?0:1,this}ti.prototype.clear=en,ti.prototype.delete=to,ti.prototype.get=tn,ti.prototype.has=ro,ti.prototype.set=io;function rn(E){var $=-1,Z=E==null?0:E.length;for(this.__data__=new ti;++$<Z;)this.add(E[$])}function vs(E){return this.__data__.set(E,s),this}function bs(E){return this.__data__.has(E)}rn.prototype.add=rn.prototype.push=vs,rn.prototype.has=bs;function Ur(E){var $=this.__data__=new Sr(E);this.size=$.size}function no(){this.__data__=new Sr,this.size=0}function so(E){var $=this.__data__,Z=$.delete(E);return this.size=$.size,Z}function ao(E){return this.__data__.get(E)}function oo(E){return this.__data__.has(E)}function ms(E,$){var Z=this.__data__;if(Z instanceof Sr){var pe=Z.__data__;if(!gt||pe.length<t-1)return pe.push([E,$]),this.size=++Z.size,this;Z=this.__data__=new ti(pe)}return Z.set(E,$),this.size=Z.size,this}Ur.prototype.clear=no,Ur.prototype.delete=so,Ur.prototype.get=ao,Ur.prototype.has=oo,Ur.prototype.set=ms;function ws(E,$){var Z=an(E),pe=!Z&&Rs(E),ot=!Z&&!pe&&Tn(E),Te=!Z&&!pe&&!ot&&Us(E),lt=Z||pe||ot||Te,Mt=lt?pt(E.length,String):[],Xe=Mt.length;for(var ct in E)($||Oe.call(E,ct))&&!(lt&&(ct=="length"||ot&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Ps(ct,Xe)))&&Mt.push(ct);return Mt}function Ni(E,$){for(var Z=E.length;Z--;)if(Ns(E[Z][0],$))return Z;return-1}function Cn(E,$,Z){var pe=$(E);return an(E)?pe:Ve(pe,Z(E))}function Ri(E){return E==null?E===void 0?K:se:er&&er in Object(E)?xs(E):ho(E)}function An(E){return Fi(E)&&Ri(E)==f}function $i(E,$,Z,pe,ot){return E===$?!0:E==null||$==null||!Fi(E)&&!Fi($)?E!==E&&$!==$:Es(E,$,Z,pe,$i,ot)}function Es(E,$,Z,pe,ot,Te){var lt=an(E),Mt=an($),Xe=lt?_:Kr(E),ct=Mt?_:Kr($);Xe=Xe==f?T:Xe,ct=ct==f?T:ct;var Ct=Xe==T,hr=ct==T,qt=Xe==ct;if(qt&&Tn(E)){if(!Tn($))return!1;lt=!0,Ct=!1}if(qt&&!Ct)return Te||(Te=new Ur),lt||Us(E)?nn(E,$,Z,pe,ot,Te):uo(E,$,Xe,Z,pe,ot,Te);if(!(Z&a)){var ft=Ct&&Oe.call(E,"__wrapped__"),tr=hr&&Oe.call($,"__wrapped__");if(ft||tr){var jr=ft?E.value():E,Ir=tr?$.value():$;return Te||(Te=new Ur),ot(jr,Ir,Z,pe,Te)}}return qt?(Te||(Te=new Ur),Is(E,$,Z,pe,ot,Te)):!1}function co(E){if(!Fs(E)||As(E))return!1;var $=on(E)?et:ie;return $.test(ri(E))}function Ds(E){return Fi(E)&&$s(E.length)&&!!he[Ri(E)]}function Ss(E){if(!Ts(E))return Ti(E);var $=[];for(var Z in Object(E))Oe.call(E,Z)&&Z!="constructor"&&$.push(Z);return $}function nn(E,$,Z,pe,ot,Te){var lt=Z&a,Mt=E.length,Xe=$.length;if(Mt!=Xe&&!(lt&&Xe>Mt))return!1;var ct=Te.get(E);if(ct&&Te.get($))return ct==$;var Ct=-1,hr=!0,qt=Z&c?new rn:void 0;for(Te.set(E,$),Te.set($,E);++Ct<Mt;){var ft=E[Ct],tr=$[Ct];if(pe)var jr=lt?pe(tr,ft,Ct,$,E,Te):pe(ft,tr,Ct,E,$,Te);if(jr!==void 0){if(jr)continue;hr=!1;break}if(qt){if(!je($,function(Ir,Vr){if(!Me(qt,Vr)&&(ft===Ir||ot(ft,Ir,Z,pe,Te)))return qt.push(Vr)})){hr=!1;break}}else if(!(ft===tr||ot(ft,tr,Z,pe,Te))){hr=!1;break}}return Te.delete(E),Te.delete($),hr}function uo(E,$,Z,pe,ot,Te,lt){switch(Z){case ce:if(E.byteLength!=$.byteLength||E.byteOffset!=$.byteOffset)return!1;E=E.buffer,$=$.buffer;case ae:return!(E.byteLength!=$.byteLength||!Te(new Qt(E),new Qt($)));case w:case A:case J:return Ns(+E,+$);case I:return E.name==$.name&&E.message==$.message;case O:case u:return E==$+"";case H:var Mt=Re;case m:var Xe=pe&a;if(Mt||(Mt=qe),E.size!=$.size&&!Xe)return!1;var ct=lt.get(E);if(ct)return ct==$;pe|=c,lt.set(E,$);var Ct=nn(Mt(E),Mt($),pe,ot,Te,lt);return lt.delete(E),Ct;case b:if(It)return It.call(E)==It.call($)}return!1}function Is(E,$,Z,pe,ot,Te){var lt=Z&a,Mt=sn(E),Xe=Mt.length,ct=sn($),Ct=ct.length;if(Xe!=Ct&&!lt)return!1;for(var hr=Xe;hr--;){var qt=Mt[hr];if(!(lt?qt in $:Oe.call($,qt)))return!1}var ft=Te.get(E);if(ft&&Te.get($))return ft==$;var tr=!0;Te.set(E,$),Te.set($,E);for(var jr=lt;++hr<Xe;){qt=Mt[hr];var Ir=E[qt],Vr=$[qt];if(pe)var Nn=lt?pe(Vr,Ir,qt,$,E,Te):pe(Ir,Vr,qt,E,$,Te);if(!(Nn===void 0?Ir===Vr||ot(Ir,Vr,Z,pe,Te):Nn)){tr=!1;break}jr||(jr=qt=="constructor")}if(tr&&!jr){var Ui=E.constructor,Kt=$.constructor;Ui!=Kt&&"constructor"in E&&"constructor"in $&&!(typeof Ui=="function"&&Ui instanceof Ui&&typeof Kt=="function"&&Kt instanceof Kt)&&(tr=!1)}return Te.delete(E),Te.delete($),tr}function sn(E){return Cn(E,po,Os)}function di(E,$){var Z=E.__data__;return Cs($)?Z[typeof $=="string"?"string":"hash"]:Z.map}function yr(E,$){var Z=Ie(E,$);return co(Z)?Z:void 0}function xs(E){var $=Oe.call(E,er),Z=E[er];try{E[er]=void 0;var pe=!0}catch{}var ot=We.call(E);return pe&&($?E[er]=Z:delete E[er]),ot}var Os=ei?function(E){return E==null?[]:(E=Object(E),He(ei(E),function($){return ur.call(E,$)}))}:at,Kr=Ri;(mt&&Kr(new mt(new ArrayBuffer(1)))!=ce||gt&&Kr(new gt)!=H||wt&&Kr(wt.resolve())!=j||Et&&Kr(new Et)!=m||vt&&Kr(new vt)!=k)&&(Kr=function(E){var $=Ri(E),Z=$==T?E.constructor:void 0,pe=Z?ri(Z):"";if(pe)switch(pe){case $t:return ce;case Ft:return H;case Dt:return j;case Ut:return m;case St:return k}return $});function Ps(E,$){return $=$??p,!!$&&(typeof E=="number"||me.test(E))&&E>-1&&E%1==0&&E<$}function Cs(E){var $=typeof E;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?E!=="__proto__":E===null}function As(E){return!!ke&&ke in E}function Ts(E){var $=E&&E.constructor,Z=typeof $=="function"&&$.prototype||De;return E===Z}function ho(E){return We.call(E)}function ri(E){if(E!=null){try{return Be.call(E)}catch{}try{return E+""}catch{}}return""}function Ns(E,$){return E===$||E!==E&&$!==$}var Rs=An(function(){return arguments}())?An:function(E){return Fi(E)&&Oe.call(E,"callee")&&!ur.call(E,"callee")},an=Array.isArray;function lo(E){return E!=null&&$s(E.length)&&!on(E)}var Tn=pi||st;function fo(E,$){return $i(E,$)}function on(E){if(!Fs(E))return!1;var $=Ri(E);return $==C||$==U||$==g||$==S}function $s(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=p}function Fs(E){var $=typeof E;return E!=null&&($=="object"||$=="function")}function Fi(E){return E!=null&&typeof E=="object"}var Us=Se?dt(Se):Ds;function po(E){return lo(E)?ws(E):Ss(E)}function at(){return[]}function st(){return!1}i.exports=fo})($a,$a.exports);var I6=$a.exports;const x6=kv(I6);function O6(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var a=0;a<i.length;a++){var c=i.charAt(a),p=c.charCodeAt(0);if(t[p]!==255)throw new TypeError(c+" is ambiguous");t[p]=a}var f=i.length,_=i.charAt(0),g=Math.log(f)/Math.log(256),w=Math.log(256)/Math.log(f);function A(U){if(U instanceof Uint8Array||(ArrayBuffer.isView(U)?U=new Uint8Array(U.buffer,U.byteOffset,U.byteLength):Array.isArray(U)&&(U=Uint8Array.from(U))),!(U instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(U.length===0)return"";for(var H=0,J=0,se=0,T=U.length;se!==T&&U[se]===0;)se++,H++;for(var j=(T-se)*w+1>>>0,S=new Uint8Array(j);se!==T;){for(var O=U[se],m=0,u=j-1;(O!==0||m<J)&&u!==-1;u--,m++)O+=256*S[u]>>>0,S[u]=O%f>>>0,O=O/f>>>0;if(O!==0)throw new Error("Non-zero carry");J=m,se++}for(var b=j-J;b!==j&&S[b]===0;)b++;for(var K=_.repeat(H);b<j;++b)K+=i.charAt(S[b]);return K}function I(U){if(typeof U!="string")throw new TypeError("Expected String");if(U.length===0)return new Uint8Array;var H=0;if(U[H]!==" "){for(var J=0,se=0;U[H]===_;)J++,H++;for(var T=(U.length-H)*g+1>>>0,j=new Uint8Array(T);U[H];){var S=t[U.charCodeAt(H)];if(S===255)return;for(var O=0,m=T-1;(S!==0||O<se)&&m!==-1;m--,O++)S+=f*j[m]>>>0,j[m]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");se=O,H++}if(U[H]!==" "){for(var u=T-se;u!==T&&j[u]===0;)u++;for(var b=new Uint8Array(J+(T-u)),K=J;u!==T;)b[K++]=j[u++];return b}}}function C(U){var H=I(U);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:A,decodeUnsafe:I,decode:C}}var P6=O6,C6=P6;const Gp=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},A6=i=>new TextEncoder().encode(i),T6=i=>new TextDecoder().decode(i);class N6{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class R6{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Wp(this,e)}}class $6{constructor(e){this.decoders=e}or(e){return Wp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Wp=(i,e)=>new $6({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class F6{constructor(e,t,s,a){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=a,this.encoder=new N6(e,t,s),this.decoder=new R6(e,t,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Va=({name:i,prefix:e,encode:t,decode:s})=>new F6(i,e,t,s),ys=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:a}=C6(t,e);return Va({prefix:i,name:e,encode:s,decode:c=>Gp(a(c))})},U6=(i,e,t,s)=>{const a={};for(let w=0;w<e.length;++w)a[e[w]]=w;let c=i.length;for(;i[c-1]==="=";)--c;const p=new Uint8Array(c*t/8|0);let f=0,_=0,g=0;for(let w=0;w<c;++w){const A=a[i[w]];if(A===void 0)throw new SyntaxError(`Non-${s} character`);_=_<<t|A,f+=t,f>=8&&(f-=8,p[g++]=255&_>>f)}if(f>=t||255&_<<8-f)throw new SyntaxError("Unexpected end of data");return p},j6=(i,e,t)=>{const s=e[e.length-1]==="=",a=(1<<t)-1;let c="",p=0,f=0;for(let _=0;_<i.length;++_)for(f=f<<8|i[_],p+=8;p>t;)p-=t,c+=e[a&f>>p];if(p&&(c+=e[a&f<<t-p]),s)for(;c.length*t&7;)c+="=";return c},Yt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>Va({prefix:e,name:i,encode(a){return j6(a,s,t)},decode(a){return U6(a,s,t,i)}}),L6=Va({prefix:"\0",name:"identity",encode:i=>T6(i),decode:i=>A6(i)});var M6=Object.freeze({__proto__:null,identity:L6});const q6=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var z6=Object.freeze({__proto__:null,base2:q6});const H6=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var B6=Object.freeze({__proto__:null,base8:H6});const K6=ys({prefix:"9",name:"base10",alphabet:"0123456789"});var V6=Object.freeze({__proto__:null,base10:K6});const k6=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),G6=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var W6=Object.freeze({__proto__:null,base16:k6,base16upper:G6});const Y6=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),J6=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),X6=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Z6=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Q6=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),e2=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),t2=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),r2=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),i2=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var n2=Object.freeze({__proto__:null,base32:Y6,base32upper:J6,base32pad:X6,base32padupper:Z6,base32hex:Q6,base32hexupper:e2,base32hexpad:t2,base32hexpadupper:r2,base32z:i2});const s2=ys({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),a2=ys({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var o2=Object.freeze({__proto__:null,base36:s2,base36upper:a2});const c2=ys({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),u2=ys({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var h2=Object.freeze({__proto__:null,base58btc:c2,base58flickr:u2});const l2=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),f2=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),p2=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),d2=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var g2=Object.freeze({__proto__:null,base64:l2,base64pad:f2,base64url:p2,base64urlpad:d2});const Yp=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),_2=Yp.reduce((i,e,t)=>(i[t]=e,i),[]),y2=Yp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function v2(i){return i.reduce((e,t)=>(e+=_2[t],e),"")}function b2(i){const e=[];for(const t of i){const s=y2[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const m2=Va({prefix:"🚀",name:"base256emoji",encode:v2,decode:b2});var w2=Object.freeze({__proto__:null,base256emoji:m2}),E2=Jp,xf=128,D2=127,S2=~D2,I2=Math.pow(2,31);function Jp(i,e,t){e=e||[],t=t||0;for(var s=t;i>=I2;)e[t++]=i&255|xf,i/=128;for(;i&S2;)e[t++]=i&255|xf,i>>>=7;return e[t]=i|0,Jp.bytes=t-s+1,e}var x2=au,O2=128,Of=127;function au(i,s){var t=0,s=s||0,a=0,c=s,p,f=i.length;do{if(c>=f)throw au.bytes=0,new RangeError("Could not decode varint");p=i[c++],t+=a<28?(p&Of)<<a:(p&Of)*Math.pow(2,a),a+=7}while(p>=O2);return au.bytes=c-s,t}var P2=Math.pow(2,7),C2=Math.pow(2,14),A2=Math.pow(2,21),T2=Math.pow(2,28),N2=Math.pow(2,35),R2=Math.pow(2,42),$2=Math.pow(2,49),F2=Math.pow(2,56),U2=Math.pow(2,63),j2=function(i){return i<P2?1:i<C2?2:i<A2?3:i<T2?4:i<N2?5:i<R2?6:i<$2?7:i<F2?8:i<U2?9:10},L2={encode:E2,decode:x2,encodingLength:j2},Xp=L2;const Pf=(i,e,t=0)=>(Xp.encode(i,e,t),e),Cf=i=>Xp.encodingLength(i),ou=(i,e)=>{const t=e.byteLength,s=Cf(i),a=s+Cf(t),c=new Uint8Array(a+t);return Pf(i,c,0),Pf(t,c,s),c.set(e,a),new M2(i,t,e,c)};class M2{constructor(e,t,s,a){this.code=e,this.size=t,this.digest=s,this.bytes=a}}const Zp=({name:i,code:e,encode:t})=>new q2(i,e,t);class q2{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ou(this.code,t):t.then(s=>ou(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Qp=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),z2=Zp({name:"sha2-256",code:18,encode:Qp("SHA-256")}),H2=Zp({name:"sha2-512",code:19,encode:Qp("SHA-512")});var B2=Object.freeze({__proto__:null,sha256:z2,sha512:H2});const ed=0,K2="identity",td=Gp,V2=i=>ou(ed,td(i)),k2={code:ed,name:K2,encode:td,digest:V2};var G2=Object.freeze({__proto__:null,identity:k2});new TextEncoder,new TextDecoder;const Af={...M6,...z6,...B6,...V6,...W6,...n2,...o2,...h2,...g2,...w2};({...B2,...G2});function rd(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function W2(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?rd(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function id(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const Tf=id("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Cc=id("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=W2(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),Y2={utf8:Tf,"utf-8":Tf,hex:Af.base16,latin1:Cc,ascii:Cc,binary:Cc,...Af};function J2(i,e="utf8"){const t=Y2[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?rd(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}const nd="wc",X2=2,Tu="core",Oi=`${nd}@2:${Tu}:`,Z2={name:Tu,logger:"error"},Q2={database:":memory:"},eD="crypto",Nf="client_ed25519_seed",tD=ye.ONE_DAY,rD="keychain",iD="0.3",nD="messages",sD="0.3",aD=ye.SIX_HOURS,oD="publisher",sd="irn",cD="error",ad="wss://relay.walletconnect.com",Rf="wss://relay.walletconnect.org",uD="relayer",Ot={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},hD="_subscription",ts={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},lD=ye.ONE_SECOND/2,fD="2.9.0",pD=1e4,dD="0.3",gD="WALLETCONNECT_CLIENT_ID",Xr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},_D="subscription",yD="0.3",vD=ye.FIVE_SECONDS*1e3,bD="pairing",mD="0.3",rs={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},Jr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},wD="history",ED="0.3",DD="expirer",$r={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},SD="0.3",Ac="verify-api",$f="https://verify.walletconnect.com";class ID{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=rD,this.version=iD,this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,a)=>{this.isInitialized(),this.keychain.set(s,a),await this.persist()},this.get=s=>{this.isInitialized();const a=this.keychain.get(s);if(typeof a>"u"){const{message:c}=ue("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return a},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Qe.generateChildLogger(t,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Cp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ap(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class xD{constructor(e,t,s){this.core=e,this.logger=t,this.name=eD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),c=Df(a);return kp(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=bw();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const c=await this.getClientSeed(),p=Df(c),f=Yc();return await m6(f,a,tD,p)},this.generateSharedKey=(a,c,p)=>{this.isInitialized();const f=this.getPrivateKey(a),_=mw(f,c);return this.setSymKey(_,p)},this.setSymKey=async(a,c)=>{this.isInitialized();const p=c||ww(a);return await this.keychain.set(p,a),p},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,c,p)=>{this.isInitialized();const f=Op(p),_=pu(c);if(Xl(f)){const I=f.senderPublicKey,C=f.receiverPublicKey;a=await this.generateSharedKey(I,C)}const g=this.getSymKey(a),{type:w,senderPublicKey:A}=f;return Dw({type:w,symKey:g,message:_,senderPublicKey:A})},this.decode=async(a,c,p)=>{this.isInitialized();const f=xw(c,p);if(Xl(f)){const w=f.receiverPublicKey,A=f.senderPublicKey;a=await this.generateSharedKey(w,A)}const _=this.getSymKey(a),g=Sw({symKey:_,encoded:c});return np(g)},this.getPayloadType=a=>{const c=Aa(a);return gs(c.type)},this.getPayloadSenderPublicKey=a=>{const c=Aa(a);return c.senderPublicKey?cr(c.senderPublicKey,or):void 0},this.core=e,this.logger=Qe.generateChildLogger(t,this.name),this.keychain=s||new ID(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Nf)}catch{e=Yc(),await this.keychain.set(Nf,e)}return J2(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class OD extends Z3{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=nD,this.version=sD,this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,a)=>{this.isInitialized();const c=Sn(a);let p=this.messages.get(s);return typeof p>"u"&&(p={}),typeof p[c]<"u"||(p[c]=a,this.messages.set(s,p),await this.persist()),c},this.get=s=>{this.isInitialized();let a=this.messages.get(s);return typeof a>"u"&&(a={}),a},this.has=(s,a)=>{this.isInitialized();const c=this.get(s),p=Sn(a);return typeof c[p]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(e,this.name),this.core=t}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Cp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ap(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class PD extends Q3{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Qr.EventEmitter,this.name=oD,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.TEN_SECONDS),this.queueTimeout=ye.toMiliseconds(ye.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,a,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:c}});try{const p=(c==null?void 0:c.ttl)||aD,f=Jc(c),_=(c==null?void 0:c.prompt)||!1,g=(c==null?void 0:c.tag)||0,w=(c==null?void 0:c.id)||sp().toString(),A={topic:s,message:a,opts:{ttl:p,relay:f,prompt:_,tag:g,id:w}},I=setTimeout(()=>this.queue.set(w,A),this.queueTimeout);try{await await Ta(this.rpcPublish(s,a,p,f,_,g,w),this.publishTimeout),clearTimeout(I),this.relayer.events.emit(Ot.publish,A)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:c}})}catch(p){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(p),p}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.relayer=e,this.logger=Qe.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(e,t,s,a,c,p,f){var _,g,w,A;const I={method:Ia(a.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:p},id:f};return ar((_=I.params)==null?void 0:_.prompt)&&((g=I.params)==null||delete g.prompt),ar((w=I.params)==null?void 0:w.tag)&&((A=I.params)==null||delete A.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:I}),this.relayer.request(I)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:a}=e;await this.publish(t,s,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(Pn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ot.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ot.message_ack,e=>{this.onPublish(e.id.toString())})}}class CD{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const a=s.filter(c=>c!==t);if(!a.length){this.map.delete(e);return}this.map.set(e,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var AD=Object.defineProperty,TD=Object.defineProperties,ND=Object.getOwnPropertyDescriptors,Ff=Object.getOwnPropertySymbols,RD=Object.prototype.hasOwnProperty,$D=Object.prototype.propertyIsEnumerable,Uf=(i,e,t)=>e in i?AD(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,is=(i,e)=>{for(var t in e||(e={}))RD.call(e,t)&&Uf(i,t,e[t]);if(Ff)for(var t of Ff(e))$D.call(e,t)&&Uf(i,t,e[t]);return i},Tc=(i,e)=>TD(i,ND(e));class FD extends r6{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new CD,this.events=new Qr.EventEmitter,this.name=_D,this.version=yD,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Oi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}});try{const c=Jc(a),p={topic:s,relay:c};this.pending.set(s,p);const f=await this.rpcSubscribe(s,c);return this.onSubscribe(f,p),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}}),f}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(s,a.id,a):await this.unsubscribeByTopic(s,a)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((a,c)=>{const p=new ye.Watch;p.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(f),p.stop(this.pendingSubscriptionWatchLabel),a(!0)),p.elapsed(this.pendingSubscriptionWatchLabel)>=vD&&(clearInterval(f),p.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Qe.generateChildLogger(t,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async a=>await this.unsubscribeById(e,a,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const a=Jc(s);await this.rpcUnsubscribe(e,t,a);const c=Nt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(e,t){const s={method:Ia(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Ta(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ot.connection_stalled)}return Sn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Ia(t.protocol).batchSubscribe,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Ta(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ot.connection_stalled)}}rpcUnsubscribe(e,t,s){const a={method:Ia(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(e,t){this.setSubscription(e,Tc(is({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,is({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,is({},t)),this.topicMap.set(t.topic,e),this.events.emit(Xr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(Xr.deleted,Tc(is({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Xr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Xr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Zr(t)&&this.onBatchSubscribe(t.map((s,a)=>Tc(is({},e[a]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Pn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ot.connect,async()=>{await this.onConnect()}),this.relayer.on(Ot.disconnect,()=>{this.onDisconnect()}),this.events.on(Xr.created,async e=>{const t=Xr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Xr.deleted,async e=>{const t=Xr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var UD=Object.defineProperty,jf=Object.getOwnPropertySymbols,jD=Object.prototype.hasOwnProperty,LD=Object.prototype.propertyIsEnumerable,Lf=(i,e,t)=>e in i?UD(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,MD=(i,e)=>{for(var t in e||(e={}))jD.call(e,t)&&Lf(i,t,e[t]);if(jf)for(var t of jf(e))LD.call(e,t)&&Lf(i,t,e[t]);return i};class qD extends e6{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Qr.EventEmitter,this.name=uD,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Qe.generateChildLogger(e.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:e.logger||cD})),this.messages=new OD(this.logger,e.core),this.subscriber=new FD(this,this.logger),this.publisher=new PD(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||ad,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Rf}...`),await this.restartTransport(Rf)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},pD)}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return a||(await Promise.all([new Promise(c=>{this.subscriber.once(Xr.created,p=>{p.topic===e&&c()})}),new Promise(async c=>{a=await this.subscriber.subscribe(e,t),c()})]),a)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ot.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(Xr.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await Ta(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>s(a)).then(()=>t()).finally(()=>this.removeListener(Ot.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Ot.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(Ot.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(ts.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Pi(new S6(jw({sdkVersion:fD,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),gu(e)){if(!e.method.endsWith(hD))return;const t=e.params,{topic:s,message:a,publishedAt:c}=t.data,p={topic:s,message:a,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(MD({type:"event",event:t.id},p)),this.events.emit(t.id,p),await this.acknowledgePayload(e),await this.onMessageEvent(p)}else _u(e)&&this.events.emit(Ot.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ot.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=yu(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(ts.payload,e=>this.onProviderPayload(e)),this.provider.on(ts.connect,()=>{this.events.emit(Ot.connect)}),this.provider.on(ts.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(ts.error,e=>{this.logger.error(e),this.events.emit(Ot.error,e)})}registerEventListeners(){this.events.on(Ot.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Ot.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ye.toMiliseconds(lD))}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var zD=Object.defineProperty,Mf=Object.getOwnPropertySymbols,HD=Object.prototype.hasOwnProperty,BD=Object.prototype.propertyIsEnumerable,qf=(i,e,t)=>e in i?zD(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,zf=(i,e)=>{for(var t in e||(e={}))HD.call(e,t)&&qf(i,t,e[t]);if(Mf)for(var t of Mf(e))BD.call(e,t)&&qf(i,t,e[t]);return i};class ka extends t6{constructor(e,t,s,a=Oi,c=void 0){super(e,t,s,a),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=dD,this.cached=[],this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(p=>{this.getKey&&p!==null&&!ar(p)?this.map.set(this.getKey(p),p):aE(p)?this.map.set(p.id,p):oE(p)&&this.map.set(p.topic,p)}),this.cached=[],this.initialized=!0)},this.set=async(p,f)=>{this.isInitialized(),this.map.has(p)?await this.update(p,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:p,value:f}),this.map.set(p,f),await this.persist())},this.get=p=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:p}),this.getData(p)),this.getAll=p=>(this.isInitialized(),p?this.values.filter(f=>Object.keys(p).every(_=>x6(f[_],p[_]))):this.values),this.update=async(p,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:p,update:f});const _=zf(zf({},this.getData(p)),f);this.map.set(p,_),await this.persist()},this.delete=async(p,f)=>{this.isInitialized(),this.map.has(p)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:p,reason:f}),this.map.delete(p),await this.persist())},this.logger=Qe.generateChildLogger(t,this.name),this.storagePrefix=a,this.getKey=c}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class KD{constructor(e,t){this.core=e,this.logger=t,this.name=bD,this.version=mD,this.events=new fu,this.initialized=!1,this.storagePrefix=Oi,this.ignoredPayloadTypes=[Zi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Yc(),a=await this.core.crypto.setSymKey(s),c=Hr(ye.FIVE_MINUTES),p={protocol:sd},f={topic:a,expiry:c,relay:p,active:!1},_=Jw({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:p});return await this.pairings.set(a,f),await this.core.relayer.subscribe(a),this.core.expirer.set(a,c),{topic:a,uri:_}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:a,symKey:c,relay:p}=Gw(s.uri);if(this.pairings.keys.includes(a))throw new Error(`Pairing already exists: ${a}`);if(this.core.crypto.hasKeys(a))throw new Error(`Keychain already exists: ${a}`);const f=Hr(ye.FIVE_MINUTES),_={topic:a,relay:p,expiry:f,active:!1};return await this.pairings.set(a,_),await this.core.crypto.setSymKey(c,a),await this.core.relayer.subscribe(a,{relay:p}),this.core.expirer.set(a,f),s.activatePairing&&await this.activate({topic:a}),_},this.activate=async({topic:s})=>{this.isInitialized();const a=Hr(ye.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:a}),this.core.expirer.set(s,a)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:a}=s;if(this.pairings.keys.includes(a)){const c=await this.sendRequest(a,"wc_pairingPing",{}),{done:p,resolve:f,reject:_}=En();this.events.once(zt("pairing_ping",c),({error:g})=>{g?_(g):f()}),await p()}},this.updateExpiry=async({topic:s,expiry:a})=>{this.isInitialized(),await this.pairings.update(s,{expiry:a})},this.updateMetadata=async({topic:s,metadata:a})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:a}=s;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",Nt("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(s,a,c)=>{const p=vu(a,c),f=await this.core.crypto.encode(s,p),_=rs[a].req;return this.core.history.set(s,p),this.core.relayer.publish(s,f,_),p.id},this.sendResult=async(s,a,c)=>{const p=yu(s,c),f=await this.core.crypto.encode(a,p),_=await this.core.history.get(a,s),g=rs[_.request.method].res;await this.core.relayer.publish(a,f,g),await this.core.history.resolve(p)},this.sendError=async(s,a,c)=>{const p=du(s,c),f=await this.core.crypto.encode(a,p),_=await this.core.history.get(a,s),g=rs[_.request.method]?rs[_.request.method].res:rs.unregistered_method.res;await this.core.relayer.publish(a,f,g),await this.core.history.resolve(p)},this.deletePairing=async(s,a)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Nt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),a?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(a=>Ii(a.expiry));await Promise.all(s.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=s=>{const{topic:a,payload:c}=s,p=c.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingRequest(a,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,c);default:return this.onUnknownRpcMethodRequest(a,c)}},this.onRelayEventResponse=async s=>{const{topic:a,payload:c}=s,p=(await this.core.history.get(a,c.id)).request.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingResponse(a,c);default:return this.onUnknownRpcMethodResponse(p)}},this.onPairingPingRequest=async(s,a)=>{const{id:c}=a;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit("pairing_ping",{id:c,topic:s})}catch(p){await this.sendError(c,s,p),this.logger.error(p)}},this.onPairingPingResponse=(s,a)=>{const{id:c}=a;setTimeout(()=>{Si(a)?this.events.emit(zt("pairing_ping",c),{}):fi(a)&&this.events.emit(zt("pairing_ping",c),{error:a.error})},500)},this.onPairingDeleteRequest=async(s,a)=>{const{id:c}=a;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:c,topic:s})}catch(p){await this.sendError(c,s,p),this.logger.error(p)}},this.onUnknownRpcMethodRequest=async(s,a)=>{const{id:c,method:p}=a;try{if(this.registeredMethods.includes(p))return;const f=Nt("WC_METHOD_UNSUPPORTED",p);await this.sendError(c,s,f),this.logger.error(f)}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Nt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!gr(s)){const{message:a}=ue("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(a)}if(!sE(s.uri)){const{message:a}=ue("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(a)}},this.isValidPing=async s=>{if(!gr(s)){const{message:c}=ue("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidDisconnect=async s=>{if(!gr(s)){const{message:c}=ue("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async s=>{if(!kt(s,!1)){const{message:a}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(a)}if(!this.pairings.keys.includes(s)){const{message:a}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(a)}if(Ii(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:a}=ue("EXPIRED",`pairing topic: ${s}`);throw new Error(a)}},this.core=e,this.logger=Qe.generateChildLogger(t,this.name),this.pairings=new ka(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ot.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const a=await this.core.crypto.decode(t,s);gu(a)?(this.core.history.set(t,a),this.onRelayEventRequest({topic:t,payload:a})):_u(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:t,payload:a}),this.core.history.delete(t,a.id))})}registerExpirerEvents(){this.core.expirer.on($r.expired,async e=>{const{topic:t}=Np(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class VD extends X3{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Qr.EventEmitter,this.name=wD,this.version=ED,this.cached=[],this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,a,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:a,chainId:c}),this.records.has(a.id))return;const p={id:a.id,topic:s,request:{method:a.method,params:a.params||null},chainId:c,expiry:Hr(ye.THIRTY_DAYS)};this.records.set(p.id,p),this.events.emit(Jr.created,p)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const a=await this.getRecord(s.id);typeof a.response>"u"&&(a.response=fi(s)?{error:s.error}:{result:s.result},this.records.set(a.id,a),this.events.emit(Jr.updated,a))},this.get=async(s,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:a}),await this.getRecord(a)),this.delete=(s,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(c=>{if(c.topic===s){if(typeof a<"u"&&c.id!==a)return;this.records.delete(c.id),this.events.emit(Jr.deleted,c)}})},this.exists=async(s,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===s:!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Qe.generateChildLogger(t,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:vu(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Jr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Jr.created,e=>{const t=Jr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Jr.updated,e=>{const t=Jr.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Jr.deleted,e=>{const t=Jr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Pn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ye.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class kD extends i6{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Qr.EventEmitter,this.name=DD,this.version=SD,this.cached=[],this.initialized=!1,this.storagePrefix=Oi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const a=this.formatTarget(s);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(s,a)=>{this.isInitialized();const c=this.formatTarget(s),p={target:c,expiry:a};this.expirations.set(c,p),this.checkExpiry(c,p),this.events.emit($r.created,{target:c,expiration:p})},this.get=s=>{this.isInitialized();const a=this.formatTarget(s);return this.getExpiration(a)},this.del=s=>{if(this.isInitialized(),this.has(s)){const a=this.formatTarget(s),c=this.getExpiration(a);this.expirations.delete(a),this.events.emit($r.deleted,{target:a,expiration:c})}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Qe.generateChildLogger(t,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Lw(e);if(typeof e=="number")return Mw(e);const{message:t}=ue("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit($r.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ye.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit($r.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Pn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on($r.created,e=>{const t=$r.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on($r.expired,e=>{const t=$r.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on($r.deleted,e=>{const t=$r.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class GD extends n6{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Ac,this.initialized=!1,this.init=async s=>{Pp()||!xu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||$f,await this.createIframe())},this.register=async s=>{var a;if(this.initialized||await this.init(),!!this.iframe)try{(a=this.iframe.contentWindow)==null||a.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var a;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const c=this.startAbortTimer(ye.FIVE_SECONDS),p=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),p.status===200?(a=await p.json())==null?void 0:a.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,a)=>{if(document.getElementById(Ac))return s();const c=document.createElement("iframe");c.setAttribute("id",Ac),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,s()}),c.addEventListener("error",p=>{a(p)}),document.body.append(c),this.iframe=c}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ye.toMiliseconds(ye.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(t,this.name),this.verifyUrl=$f,this.abortController=new AbortController,this.isDevEnv=Iu()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}}var WD=Object.defineProperty,Hf=Object.getOwnPropertySymbols,YD=Object.prototype.hasOwnProperty,JD=Object.prototype.propertyIsEnumerable,Bf=(i,e,t)=>e in i?WD(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Kf=(i,e)=>{for(var t in e||(e={}))YD.call(e,t)&&Bf(i,t,e[t]);if(Hf)for(var t of Hf(e))JD.call(e,t)&&Bf(i,t,e[t]);return i};class Nu extends J3{constructor(e){super(e),this.protocol=nd,this.version=X2,this.name=Tu,this.events=new Qr.EventEmitter,this.initialized=!1,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||ad;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Z2.logger}));this.logger=Qe.generateChildLogger(t,this.name),this.heartbeat=new Pn.HeartBeat,this.crypto=new xD(this,this.logger,e==null?void 0:e.keychain),this.history=new VD(this,this.logger),this.expirer=new kD(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new e3(Kf(Kf({},Q2),e==null?void 0:e.storageOptions)),this.relayer=new qD({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new KD(this,this.logger),this.verify=new GD(this.projectId||"",this.logger)}static async init(e){const t=new Nu(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(gD,s),t}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const XD=Nu,od="wc",cd=2,ud="client",Ru=`${od}@${cd}:${ud}:`,Nc={name:ud,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},ZD="WALLETCONNECT_DEEPLINK_CHOICE",QD="proposal",hd="Proposal expired",e5="session",Ea=ye.SEVEN_DAYS,t5="engine",ns={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1115}}},Rc={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},r5="request",i5=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var n5=Object.defineProperty,s5=Object.defineProperties,a5=Object.getOwnPropertyDescriptors,Vf=Object.getOwnPropertySymbols,o5=Object.prototype.hasOwnProperty,c5=Object.prototype.propertyIsEnumerable,kf=(i,e,t)=>e in i?n5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Rr=(i,e)=>{for(var t in e||(e={}))o5.call(e,t)&&kf(i,t,e[t]);if(Vf)for(var t of Vf(e))c5.call(e,t)&&kf(i,t,e[t]);return i},$c=(i,e)=>s5(i,a5(e));class u5 extends a6{constructor(e){super(e),this.name=t5,this.events=new fu,this.initialized=!1,this.ignoredPayloadTypes=[Zi],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ns)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const s=$c(Rr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:a,requiredNamespaces:c,optionalNamespaces:p,sessionProperties:f,relays:_}=s;let g=a,w,A=!1;if(g&&(A=this.client.core.pairing.pairings.get(g).active),!g||!A){const{topic:j,uri:S}=await this.client.core.pairing.create();g=j,w=S}const I=await this.client.core.crypto.generateKeyPair(),C=Rr({requiredNamespaces:c,optionalNamespaces:p,relays:_??[{protocol:sd}],proposer:{publicKey:I,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:U,resolve:H,done:J}=En(ye.FIVE_MINUTES,hd);if(this.events.once(zt("session_connect"),async({error:j,session:S})=>{if(j)U(j);else if(S){S.self.publicKey=I;const O=$c(Rr({},S),{requiredNamespaces:S.requiredNamespaces,optionalNamespaces:S.optionalNamespaces});await this.client.session.set(S.topic,O),await this.setExpiry(S.topic,S.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:S.peer.metadata}),H(O)}}),!g){const{message:j}=ue("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(j)}const se=await this.sendRequest(g,"wc_sessionPropose",C),T=Hr(ye.FIVE_MINUTES);return await this.setProposal(se,Rr({id:se,expiry:T},C)),{uri:w,approval:J}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:a,namespaces:c,sessionProperties:p}=t,f=this.client.proposal.get(s);let{pairingTopic:_,proposer:g,requiredNamespaces:w,optionalNamespaces:A}=f;_=_||"",In(w)||(w=eE(c,"approve()"));const I=await this.client.core.crypto.generateKeyPair(),C=g.publicKey,U=await this.client.core.crypto.generateSharedKey(I,C);_&&s&&(await this.client.core.pairing.updateMetadata({topic:_,metadata:g.metadata}),await this.sendResult(s,_,{relay:{protocol:a??"irn"},responderPublicKey:I}),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}));const H=Rr({relay:{protocol:a??"irn"},namespaces:c,requiredNamespaces:w,optionalNamespaces:A,pairingTopic:_,controller:{publicKey:I,metadata:this.client.metadata},expiry:Hr(Ea)},p&&{sessionProperties:p});await this.client.core.relayer.subscribe(U),await this.sendRequest(U,"wc_sessionSettle",H);const J=$c(Rr({},H),{topic:U,pairingTopic:_,acknowledged:!1,self:H.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:I});return await this.client.session.set(U,J),await this.setExpiry(U,Hr(Ea)),{topic:U,acknowledged:()=>new Promise(se=>setTimeout(()=>se(this.client.session.get(U)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:a}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,a),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:a}=t,c=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:a}),{done:p,resolve:f,reject:_}=En();return this.events.once(zt("session_update",c),({error:g})=>{g?_(g):f()}),await this.client.session.update(s,{namespaces:a}),{acknowledged:p}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,a=await this.sendRequest(s,"wc_sessionExtend",{}),{done:c,resolve:p,reject:f}=En();return this.events.once(zt("session_extend",a),({error:_})=>{_?f(_):p()}),await this.setExpiry(s,Hr(Ea)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:a,topic:c,expiry:p}=t,f=await this.sendRequest(c,"wc_sessionRequest",{request:a,chainId:s},p),{done:_,resolve:g,reject:w}=En(p);this.events.once(zt("session_request",f),({error:I,result:C})=>{I?w(I):g(C)}),this.client.events.emit("session_request_sent",{topic:c,request:a,chainId:s,id:f});const A=await this.client.core.storage.getItem(ZD);return qw({id:f,topic:c,wcDeepLink:A}),await _()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:a}=t,{id:c}=a;Si(a)?await this.sendResult(c,s,a.result):fi(a)&&await this.sendError(c,s,a.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const a=await this.sendRequest(s,"wc_sessionPing",{}),{done:c,resolve:p,reject:f}=En();this.events.once(zt("session_ping",a),({error:_})=>{_?f(_):p()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:a,chainId:c}=t;await this.sendRequest(s,"wc_sessionEvent",{event:a,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const a=sp().toString();let c;const p=f=>{(f==null?void 0:f.id.toString())===a&&(this.client.core.relayer.events.removeListener(Ot.message_ack,p),c())};await Promise.all([new Promise(f=>{c=f,this.client.core.relayer.on(Ot.message_ack,p)}),this.sendRequest(s,"wc_sessionDelete",Nt("USER_DISCONNECTED"),void 0,a)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>iE(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(c=>{var p,f;return((p=c.peerMetadata)==null?void 0:p.url)&&((f=c.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:a}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Nt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Nt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),a?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=ns.wc_sessionRequest.req.ttl,{id:a,topic:c,params:p}=t;await this.client.pendingRequest.set(a,{id:a,topic:c,params:p}),s&&this.client.core.expirer.set(a,Hr(s))},this.sendRequest=async(t,s,a,c,p)=>{const f=vu(s,a);if(xu()&&i5.includes(s)){const w=Sn(JSON.stringify(f));await this.client.core.verify.register({attestationId:w})}const _=await this.client.core.crypto.encode(t,f),g=ns[s].req;return c&&(g.ttl=c),p&&(g.id=p),this.client.core.history.set(t,f),this.client.core.relayer.publish(t,_,g),f.id},this.sendResult=async(t,s,a)=>{const c=yu(t,a),p=await this.client.core.crypto.encode(s,c),f=await this.client.core.history.get(s,t),_=ns[f.request.method].res;this.client.core.relayer.publish(s,p,_),await this.client.core.history.resolve(c)},this.sendError=async(t,s,a)=>{const c=du(t,a),p=await this.client.core.crypto.encode(s,c),f=await this.client.core.history.get(s,t),_=ns[f.request.method].res;this.client.core.relayer.publish(s,p,_),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(a=>{Ii(a.expiry)&&t.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{Ii(a.expiry)&&s.push(a.id)}),await Promise.all([...t.map(a=>this.deleteSession(a)),...s.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=t=>{const{topic:s,payload:a}=t,c=a.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,a);case"wc_sessionSettle":return this.onSessionSettleRequest(s,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,a);case"wc_sessionExtend":return this.onSessionExtendRequest(s,a);case"wc_sessionPing":return this.onSessionPingRequest(s,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,a);case"wc_sessionRequest":return this.onSessionRequest(s,a);case"wc_sessionEvent":return this.onSessionEventRequest(s,a);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:a}=t,c=(await this.client.core.history.get(s,a.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(s,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,a);case"wc_sessionExtend":return this.onSessionExtendResponse(s,a);case"wc_sessionPing":return this.onSessionPingResponse(s,a);case"wc_sessionRequest":return this.onSessionRequestResponse(s,a);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:a}=ue("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(t,s)=>{const{params:a,id:c}=s;try{this.isValidConnect(Rr({},s.params));const p=Hr(ye.FIVE_MINUTES),f=Rr({id:c,pairingTopic:t,expiry:p},a);await this.setProposal(c,f);const _=Sn(JSON.stringify(s)),g=await this.getVerifyContext(_,f.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:g})}catch(p){await this.sendError(c,t,p),this.client.logger.error(p)}},this.onSessionProposeResponse=async(t,s)=>{const{id:a}=s;if(Si(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const p=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:p});const f=p.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const _=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});const g=await this.client.core.crypto.generateSharedKey(f,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const w=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:w}),await this.client.core.pairing.activate({topic:t})}else fi(s)&&(await this.client.proposal.delete(a,Nt("USER_DISCONNECTED")),this.events.emit(zt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:a,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:p,controller:f,expiry:_,namespaces:g,requiredNamespaces:w,optionalNamespaces:A,sessionProperties:I,pairingTopic:C}=s.params,U=Rr({topic:t,relay:p,expiry:_,namespaces:g,acknowledged:!0,pairingTopic:C,requiredNamespaces:w,optionalNamespaces:A,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},I&&{sessionProperties:I});await this.sendResult(s.id,t,!0),this.events.emit(zt("session_connect"),{session:U}),this.cleanupDuplicatePairings(U)}catch(p){await this.sendError(a,t,p),this.client.logger.error(p)}},this.onSessionSettleResponse=async(t,s)=>{const{id:a}=s;Si(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(zt("session_approve",a),{})):fi(s)&&(await this.client.session.delete(t,Nt("USER_DISCONNECTED")),this.events.emit(zt("session_approve",a),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:a,id:c}=s;try{this.isValidUpdate(Rr({topic:t},a)),await this.client.session.update(t,{namespaces:a.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:a})}catch(p){await this.sendError(c,t,p),this.client.logger.error(p)}},this.onSessionUpdateResponse=(t,s)=>{const{id:a}=s;Si(s)?this.events.emit(zt("session_update",a),{}):fi(s)&&this.events.emit(zt("session_update",a),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:a}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Hr(Ea)),await this.sendResult(a,t,!0),this.client.events.emit("session_extend",{id:a,topic:t})}catch(c){await this.sendError(a,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:a}=s;Si(s)?this.events.emit(zt("session_extend",a),{}):fi(s)&&this.events.emit(zt("session_extend",a),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:a}=s;try{this.isValidPing({topic:t}),await this.sendResult(a,t,!0),this.client.events.emit("session_ping",{id:a,topic:t})}catch(c){await this.sendError(a,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:a}=s;setTimeout(()=>{Si(s)?this.events.emit(zt("session_ping",a),{}):fi(s)&&this.events.emit(zt("session_ping",a),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(Ot.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(a,t,!0)]),this.client.events.emit("session_delete",{id:a,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:a,params:c}=s;try{this.isValidRequest(Rr({topic:t},c)),await this.setPendingSessionRequest({id:a,topic:t,params:c});const p=Sn(JSON.stringify(s)),f=this.client.session.get(t),_=await this.getVerifyContext(p,f.peer.metadata);this.client.events.emit("session_request",{id:a,topic:t,params:c,verifyContext:_})}catch(p){await this.sendError(a,t,p),this.client.logger.error(p)}},this.onSessionRequestResponse=(t,s)=>{const{id:a}=s;Si(s)?this.events.emit(zt("session_request",a),{result:s.result}):fi(s)&&this.events.emit(zt("session_request",a),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:a,params:c}=s;try{this.isValidEmit(Rr({topic:t},c)),this.client.events.emit("session_event",{id:a,topic:t,params:c})}catch(p){await this.sendError(a,t,p),this.client.logger.error(p)}},this.isValidConnect=async t=>{if(!gr(t)){const{message:_}=ue("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(_)}const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:p,relays:f}=t;if(ar(s)||await this.isValidPairingTopic(s),!gE(f,!0)){const{message:_}=ue("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(_)}!ar(a)&&In(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!ar(c)&&In(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ar(p)||this.validateSessionProps(p,"sessionProperties")},this.validateNamespaces=(t,s)=>{const a=dE(t,"connect()",s);if(a)throw new Error(a.message)},this.isValidApprove=async t=>{if(!gr(t))throw new Error(ue("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:a,relayProtocol:c,sessionProperties:p}=t;await this.isValidProposalId(s);const f=this.client.proposal.get(s),_=Oa(a,"approve()");if(_)throw new Error(_.message);const g=af(f.requiredNamespaces,a,"approve()");if(g)throw new Error(g.message);if(!kt(c,!0)){const{message:w}=ue("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(w)}ar(p)||this.validateSessionProps(p,"sessionProperties")},this.isValidReject=async t=>{if(!gr(t)){const{message:c}=ue("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:a}=t;if(await this.isValidProposalId(s),!yE(a)){const{message:c}=ue("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!gr(t)){const{message:g}=ue("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(g)}const{relay:s,controller:a,namespaces:c,expiry:p}=t;if(!$p(s)){const{message:g}=ue("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const f=cE(a,"onSessionSettleRequest()");if(f)throw new Error(f.message);const _=Oa(c,"onSessionSettleRequest()");if(_)throw new Error(_.message);if(Ii(p)){const{message:g}=ue("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async t=>{if(!gr(t)){const{message:_}=ue("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(_)}const{topic:s,namespaces:a}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),p=Oa(a,"update()");if(p)throw new Error(p.message);const f=af(c.requiredNamespaces,a,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!gr(t)){const{message:a}=ue("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(a)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!gr(t)){const{message:_}=ue("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(_)}const{topic:s,request:a,chainId:c,expiry:p}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!sf(f,c)){const{message:_}=ue("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(_)}if(!vE(a)){const{message:_}=ue("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(_)}if(!wE(f,c,a.method)){const{message:_}=ue("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(_)}if(p&&!IE(p,Rc)){const{message:_}=ue("MISSING_OR_INVALID",`request() expiry: ${p}. Expiry must be a number (in seconds) between ${Rc.min} and ${Rc.max}`);throw new Error(_)}},this.isValidRespond=async t=>{if(!gr(t)){const{message:c}=ue("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:a}=t;if(await this.isValidSessionTopic(s),!bE(a)){const{message:c}=ue("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!gr(t)){const{message:a}=ue("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(a)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!gr(t)){const{message:f}=ue("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:s,event:a,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:p}=this.client.session.get(s);if(!sf(p,c)){const{message:f}=ue("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(f)}if(!mE(a)){const{message:f}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(f)}if(!EE(p,c,a.name)){const{message:f}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!gr(t)){const{message:a}=ue("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(a)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const a={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(a.verified.origin=c,a.verified.validation=c===s.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(a=>{if(!kt(a,!1)){const{message:c}=ue("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Ot.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const a=await this.client.core.crypto.decode(t,s);gu(a)?(this.client.core.history.set(t,a),this.onRelayEventRequest({topic:t,payload:a})):_u(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:t,payload:a}),this.client.core.history.delete(t,a.id)):this.onRelayEventUnknownPayload({topic:t,payload:a})})}registerExpirerEvents(){this.client.core.expirer.on($r.expired,async e=>{const{topic:t,id:s}=Np(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ue("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!kt(e,!1)){const{message:t}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ii(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ue("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!kt(e,!1)){const{message:t}=ue("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Ii(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ue("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(kt(e,!1)){const{message:t}=ue("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ue("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!_E(e)){const{message:t}=ue("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Ii(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ue("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class h5 extends ka{constructor(e,t){super(e,t,QD,Ru),this.core=e,this.logger=t}}class l5 extends ka{constructor(e,t){super(e,t,e5,Ru),this.core=e,this.logger=t}}class f5 extends ka{constructor(e,t){super(e,t,r5,Ru,s=>s.id),this.core=e,this.logger=t}}let p5=class ld extends s6{constructor(e){super(e),this.protocol=od,this.version=cd,this.name=Nc.name,this.events=new Qr.EventEmitter,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(a){throw this.logger.error(a.message),a}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(a){throw this.logger.error(a.message),a}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(a){throw this.logger.error(a.message),a}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(a){throw this.logger.error(a.message),a}},this.update=async s=>{try{return await this.engine.update(s)}catch(a){throw this.logger.error(a.message),a}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(a){throw this.logger.error(a.message),a}},this.request=async s=>{try{return await this.engine.request(s)}catch(a){throw this.logger.error(a.message),a}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(a){throw this.logger.error(a.message),a}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(a){throw this.logger.error(a.message),a}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(a){throw this.logger.error(a.message),a}},this.find=s=>{try{return this.engine.find(s)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||Nc.name,this.metadata=(e==null?void 0:e.metadata)||Rw();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Nc.logger}));this.core=(e==null?void 0:e.core)||new XD(e),this.logger=Qe.generateChildLogger(t,this.name),this.session=new l5(this.core,this.logger),this.proposal=new h5(this.core,this.logger),this.pendingRequest=new f5(this.core,this.logger),this.engine=new u5(this)}static async init(e){const t=new ld(e);return await t.initialize(),t}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const Gf="error",d5="wss://relay.walletconnect.com",g5="wc",_5="universal_provider",Wf=`${g5}@2:${_5}:`,y5="https://rpc.walletconnect.com/v1",Ai={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,e){(function(){var t,s="4.17.21",a=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",f="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",g=500,w="__lodash_placeholder__",A=1,I=2,C=4,U=1,H=2,J=1,se=2,T=4,j=8,S=16,O=32,m=64,u=128,b=256,K=512,k=30,ae="...",ce=800,ge=16,R=1,z=2,le=3,te=1/0,G=9007199254740991,ee=17976931348623157e292,W=0/0,re=4294967295,xe=re-1,ie=re>>>1,me=[["ary",u],["bind",J],["bindKey",se],["curry",j],["curryRight",S],["flip",K],["partial",O],["partialRight",m],["rearg",b]],he="[object Arguments]",ve="[object Array]",q="[object AsyncFunction]",M="[object Boolean]",N="[object Date]",l="[object DOMException]",x="[object Error]",ne="[object Function]",fe="[object GeneratorFunction]",Se="[object Map]",He="[object Number]",Ve="[object Null]",je="[object Object]",pt="[object Promise]",dt="[object Proxy]",Me="[object RegExp]",Ie="[object Set]",Re="[object String]",$e="[object Symbol]",qe="[object Undefined]",Pe="[object WeakMap]",Fe="[object WeakSet]",De="[object ArrayBuffer]",Ce="[object DataView]",Be="[object Float32Array]",Oe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",Qt="[object Uint16Array]",ur="[object Uint32Array]",Br=/\b__p \+= '';/g,er=/\b(__p \+=) '' \+/g,ei=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pi=/&(?:amp|lt|gt|quot|#39);/g,Ti=/[&<>"']/g,mt=RegExp(pi.source),gt=RegExp(Ti.source),wt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Ut=RegExp(Dt.source),St=/^\s+/,Pt=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ga=/[()=,{}\[\]\/\s]/,Wa=/\\(\\)?/g,Ya=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sr=/\w*$/,Ja=/^[-+]0x[0-9a-f]+$/i,Xa=/^0b[01]+$/i,Za=/^\[object .+?Constructor\]$/,Qa=/^0o[0-7]+$/i,eo=/^(?:0|[1-9]\d*)$/,ti=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,en=/($^)/,to=/['\n\r\u2028\u2029\\]/g,tn="\\ud800-\\udfff",ro="\\u0300-\\u036f",io="\\ufe20-\\ufe2f",rn="\\u20d0-\\u20ff",vs=ro+io+rn,bs="\\u2700-\\u27bf",Ur="a-z\\xdf-\\xf6\\xf8-\\xff",no="\\xac\\xb1\\xd7\\xf7",so="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ao="\\u2000-\\u206f",oo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ms="A-Z\\xc0-\\xd6\\xd8-\\xde",ws="\\ufe0e\\ufe0f",Ni=no+so+ao+oo,Cn="['’]",Ri="["+tn+"]",An="["+Ni+"]",$i="["+vs+"]",Es="\\d+",co="["+bs+"]",Ds="["+Ur+"]",Ss="[^"+tn+Ni+Es+bs+Ur+ms+"]",nn="\\ud83c[\\udffb-\\udfff]",uo="(?:"+$i+"|"+nn+")",Is="[^"+tn+"]",sn="(?:\\ud83c[\\udde6-\\uddff]){2}",di="[\\ud800-\\udbff][\\udc00-\\udfff]",yr="["+ms+"]",xs="\\u200d",Os="(?:"+Ds+"|"+Ss+")",Kr="(?:"+yr+"|"+Ss+")",Ps="(?:"+Cn+"(?:d|ll|m|re|s|t|ve))?",Cs="(?:"+Cn+"(?:D|LL|M|RE|S|T|VE))?",As=uo+"?",Ts="["+ws+"]?",ho="(?:"+xs+"(?:"+[Is,sn,di].join("|")+")"+Ts+As+")*",ri="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ns="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Rs=Ts+As+ho,an="(?:"+[co,sn,di].join("|")+")"+Rs,lo="(?:"+[Is+$i+"?",$i,sn,di,Ri].join("|")+")",Tn=RegExp(Cn,"g"),fo=RegExp($i,"g"),on=RegExp(nn+"(?="+nn+")|"+lo+Rs,"g"),$s=RegExp([yr+"?"+Ds+"+"+Ps+"(?="+[An,yr,"$"].join("|")+")",Kr+"+"+Cs+"(?="+[An,yr+Os,"$"].join("|")+")",yr+"?"+Os+"+"+Ps,yr+"+"+Cs,Ns,ri,Es,an].join("|"),"g"),Fs=RegExp("["+xs+tn+vs+ws+"]"),Fi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Us=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],po=-1,at={};at[Be]=at[Oe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[Qt]=at[ur]=!0,at[he]=at[ve]=at[De]=at[M]=at[Ce]=at[N]=at[x]=at[ne]=at[Se]=at[He]=at[je]=at[Me]=at[Ie]=at[Re]=at[Pe]=!1;var st={};st[he]=st[ve]=st[De]=st[Ce]=st[M]=st[N]=st[Be]=st[Oe]=st[ke]=st[We]=st[et]=st[Se]=st[He]=st[je]=st[Me]=st[Ie]=st[Re]=st[$e]=st[tt]=st[Je]=st[Qt]=st[ur]=!0,st[x]=st[ne]=st[Pe]=!1;var E={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,Te=parseInt,lt=typeof ss=="object"&&ss&&ss.Object===Object&&ss,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=lt||Mt||Function("return this")(),ct=e&&!e.nodeType&&e,Ct=ct&&!0&&i&&!i.nodeType&&i,hr=Ct&&Ct.exports===ct,qt=hr&&lt.process,ft=function(){try{var F=Ct&&Ct.require&&Ct.require("util").types;return F||qt&&qt.binding&&qt.binding("util")}catch{}}(),tr=ft&&ft.isArrayBuffer,jr=ft&&ft.isDate,Ir=ft&&ft.isMap,Vr=ft&&ft.isRegExp,Nn=ft&&ft.isSet,Ui=ft&&ft.isTypedArray;function Kt(F,V,B){switch(B.length){case 0:return F.call(V);case 1:return F.call(V,B[0]);case 2:return F.call(V,B[0],B[1]);case 3:return F.call(V,B[0],B[1],B[2])}return F.apply(V,B)}function dd(F,V,B,de){for(var Ae=-1,rt=F==null?0:F.length;++Ae<rt;){var Ht=F[Ae];V(de,Ht,B(Ht),F)}return de}function xr(F,V){for(var B=-1,de=F==null?0:F.length;++B<de&&V(F[B],B,F)!==!1;);return F}function gd(F,V){for(var B=F==null?0:F.length;B--&&V(F[B],B,F)!==!1;);return F}function Uu(F,V){for(var B=-1,de=F==null?0:F.length;++B<de;)if(!V(F[B],B,F))return!1;return!0}function gi(F,V){for(var B=-1,de=F==null?0:F.length,Ae=0,rt=[];++B<de;){var Ht=F[B];V(Ht,B,F)&&(rt[Ae++]=Ht)}return rt}function js(F,V){var B=F==null?0:F.length;return!!B&&cn(F,V,0)>-1}function go(F,V,B){for(var de=-1,Ae=F==null?0:F.length;++de<Ae;)if(B(V,F[de]))return!0;return!1}function yt(F,V){for(var B=-1,de=F==null?0:F.length,Ae=Array(de);++B<de;)Ae[B]=V(F[B],B,F);return Ae}function _i(F,V){for(var B=-1,de=V.length,Ae=F.length;++B<de;)F[Ae+B]=V[B];return F}function _o(F,V,B,de){var Ae=-1,rt=F==null?0:F.length;for(de&&rt&&(B=F[++Ae]);++Ae<rt;)B=V(B,F[Ae],Ae,F);return B}function _d(F,V,B,de){var Ae=F==null?0:F.length;for(de&&Ae&&(B=F[--Ae]);Ae--;)B=V(B,F[Ae],Ae,F);return B}function yo(F,V){for(var B=-1,de=F==null?0:F.length;++B<de;)if(V(F[B],B,F))return!0;return!1}var yd=vo("length");function vd(F){return F.split("")}function bd(F){return F.match(Lt)||[]}function ju(F,V,B){var de;return B(F,function(Ae,rt,Ht){if(V(Ae,rt,Ht))return de=rt,!1}),de}function Ls(F,V,B,de){for(var Ae=F.length,rt=B+(de?1:-1);de?rt--:++rt<Ae;)if(V(F[rt],rt,F))return rt;return-1}function cn(F,V,B){return V===V?Td(F,V,B):Ls(F,Lu,B)}function md(F,V,B,de){for(var Ae=B-1,rt=F.length;++Ae<rt;)if(de(F[Ae],V))return Ae;return-1}function Lu(F){return F!==F}function Mu(F,V){var B=F==null?0:F.length;return B?mo(F,V)/B:W}function vo(F){return function(V){return V==null?t:V[F]}}function bo(F){return function(V){return F==null?t:F[V]}}function qu(F,V,B,de,Ae){return Ae(F,function(rt,Ht,ut){B=de?(de=!1,rt):V(B,rt,Ht,ut)}),B}function wd(F,V){var B=F.length;for(F.sort(V);B--;)F[B]=F[B].value;return F}function mo(F,V){for(var B,de=-1,Ae=F.length;++de<Ae;){var rt=V(F[de]);rt!==t&&(B=B===t?rt:B+rt)}return B}function wo(F,V){for(var B=-1,de=Array(F);++B<F;)de[B]=V(B);return de}function Ed(F,V){return yt(V,function(B){return[B,F[B]]})}function zu(F){return F&&F.slice(0,Vu(F)+1).replace(St,"")}function vr(F){return function(V){return F(V)}}function Eo(F,V){return yt(V,function(B){return F[B]})}function Rn(F,V){return F.has(V)}function Hu(F,V){for(var B=-1,de=F.length;++B<de&&cn(V,F[B],0)>-1;);return B}function Bu(F,V){for(var B=F.length;B--&&cn(V,F[B],0)>-1;);return B}function Dd(F,V){for(var B=F.length,de=0;B--;)F[B]===V&&++de;return de}var Sd=bo(E),Id=bo($);function xd(F){return"\\"+pe[F]}function Od(F,V){return F==null?t:F[V]}function un(F){return Fs.test(F)}function Pd(F){return Fi.test(F)}function Cd(F){for(var V,B=[];!(V=F.next()).done;)B.push(V.value);return B}function Do(F){var V=-1,B=Array(F.size);return F.forEach(function(de,Ae){B[++V]=[Ae,de]}),B}function Ku(F,V){return function(B){return F(V(B))}}function yi(F,V){for(var B=-1,de=F.length,Ae=0,rt=[];++B<de;){var Ht=F[B];(Ht===V||Ht===w)&&(F[B]=w,rt[Ae++]=B)}return rt}function Ms(F){var V=-1,B=Array(F.size);return F.forEach(function(de){B[++V]=de}),B}function Ad(F){var V=-1,B=Array(F.size);return F.forEach(function(de){B[++V]=[de,de]}),B}function Td(F,V,B){for(var de=B-1,Ae=F.length;++de<Ae;)if(F[de]===V)return de;return-1}function Nd(F,V,B){for(var de=B+1;de--;)if(F[de]===V)return de;return de}function hn(F){return un(F)?$d(F):yd(F)}function Lr(F){return un(F)?Fd(F):vd(F)}function Vu(F){for(var V=F.length;V--&&Pt.test(F.charAt(V)););return V}var Rd=bo(Z);function $d(F){for(var V=on.lastIndex=0;on.test(F);)++V;return V}function Fd(F){return F.match(on)||[]}function Ud(F){return F.match($s)||[]}var jd=function F(V){V=V==null?Xe:ln.defaults(Xe.Object(),V,ln.pick(Xe,Us));var B=V.Array,de=V.Date,Ae=V.Error,rt=V.Function,Ht=V.Math,ut=V.Object,So=V.RegExp,Ld=V.String,Or=V.TypeError,qs=B.prototype,Md=rt.prototype,fn=ut.prototype,zs=V["__core-js_shared__"],Hs=Md.toString,nt=fn.hasOwnProperty,qd=0,ku=function(){var r=/[^.]+$/.exec(zs&&zs.keys&&zs.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Bs=fn.toString,zd=Hs.call(ut),Hd=Xe._,Bd=So("^"+Hs.call(nt).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ks=hr?V.Buffer:t,vi=V.Symbol,Vs=V.Uint8Array,Gu=Ks?Ks.allocUnsafe:t,ks=Ku(ut.getPrototypeOf,ut),Wu=ut.create,Yu=fn.propertyIsEnumerable,Gs=qs.splice,Ju=vi?vi.isConcatSpreadable:t,$n=vi?vi.iterator:t,ji=vi?vi.toStringTag:t,Ws=function(){try{var r=Hi(ut,"defineProperty");return r({},"",{}),r}catch{}}(),Kd=V.clearTimeout!==Xe.clearTimeout&&V.clearTimeout,Vd=de&&de.now!==Xe.Date.now&&de.now,kd=V.setTimeout!==Xe.setTimeout&&V.setTimeout,Ys=Ht.ceil,Js=Ht.floor,Io=ut.getOwnPropertySymbols,Gd=Ks?Ks.isBuffer:t,Xu=V.isFinite,Wd=qs.join,Yd=Ku(ut.keys,ut),Bt=Ht.max,Jt=Ht.min,Jd=de.now,Xd=V.parseInt,Zu=Ht.random,Zd=qs.reverse,xo=Hi(V,"DataView"),Fn=Hi(V,"Map"),Oo=Hi(V,"Promise"),pn=Hi(V,"Set"),Un=Hi(V,"WeakMap"),jn=Hi(ut,"create"),Xs=Un&&new Un,dn={},Qd=Bi(xo),eg=Bi(Fn),tg=Bi(Oo),rg=Bi(pn),ig=Bi(Un),Zs=vi?vi.prototype:t,Ln=Zs?Zs.valueOf:t,Qu=Zs?Zs.toString:t;function y(r){if(xt(r)&&!Ne(r)&&!(r instanceof Ye)){if(r instanceof Pr)return r;if(nt.call(r,"__wrapped__"))return el(r)}return new Pr(r)}var gn=function(){function r(){}return function(n){if(!bt(n))return{};if(Wu)return Wu(n);r.prototype=n;var o=new r;return r.prototype=t,o}}();function Qs(){}function Pr(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}y.templateSettings={escape:wt,evaluate:Et,interpolate:vt,variable:"",imports:{_:y}},y.prototype=Qs.prototype,y.prototype.constructor=y,Pr.prototype=gn(Qs.prototype),Pr.prototype.constructor=Pr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function ng(){var r=new Ye(this.__wrapped__);return r.__actions__=lr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=lr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=lr(this.__views__),r}function sg(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function ag(){var r=this.__wrapped__.value(),n=this.__dir__,o=Ne(r),h=n<0,d=o?r.length:0,v=v0(0,d,this.__views__),D=v.start,P=v.end,L=P-D,Y=h?P:D-1,X=this.__iteratees__,Q=X.length,oe=0,_e=Jt(L,this.__takeCount__);if(!o||!h&&d==L&&_e==L)return Dh(r,this.__actions__);var we=[];e:for(;L--&&oe<_e;){Y+=n;for(var ze=-1,Ee=r[Y];++ze<Q;){var Ge=X[ze],Ze=Ge.iteratee,wr=Ge.type,nr=Ze(Ee);if(wr==z)Ee=nr;else if(!nr){if(wr==R)continue e;break e}}we[oe++]=Ee}return we}Ye.prototype=gn(Qs.prototype),Ye.prototype.constructor=Ye;function Li(r){var n=-1,o=r==null?0:r.length;for(this.clear();++n<o;){var h=r[n];this.set(h[0],h[1])}}function og(){this.__data__=jn?jn(null):{},this.size=0}function cg(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}function ug(r){var n=this.__data__;if(jn){var o=n[r];return o===_?t:o}return nt.call(n,r)?n[r]:t}function hg(r){var n=this.__data__;return jn?n[r]!==t:nt.call(n,r)}function lg(r,n){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=jn&&n===t?_:n,this}Li.prototype.clear=og,Li.prototype.delete=cg,Li.prototype.get=ug,Li.prototype.has=hg,Li.prototype.set=lg;function ii(r){var n=-1,o=r==null?0:r.length;for(this.clear();++n<o;){var h=r[n];this.set(h[0],h[1])}}function fg(){this.__data__=[],this.size=0}function pg(r){var n=this.__data__,o=ea(n,r);if(o<0)return!1;var h=n.length-1;return o==h?n.pop():Gs.call(n,o,1),--this.size,!0}function dg(r){var n=this.__data__,o=ea(n,r);return o<0?t:n[o][1]}function gg(r){return ea(this.__data__,r)>-1}function _g(r,n){var o=this.__data__,h=ea(o,r);return h<0?(++this.size,o.push([r,n])):o[h][1]=n,this}ii.prototype.clear=fg,ii.prototype.delete=pg,ii.prototype.get=dg,ii.prototype.has=gg,ii.prototype.set=_g;function ni(r){var n=-1,o=r==null?0:r.length;for(this.clear();++n<o;){var h=r[n];this.set(h[0],h[1])}}function yg(){this.size=0,this.__data__={hash:new Li,map:new(Fn||ii),string:new Li}}function vg(r){var n=fa(this,r).delete(r);return this.size-=n?1:0,n}function bg(r){return fa(this,r).get(r)}function mg(r){return fa(this,r).has(r)}function wg(r,n){var o=fa(this,r),h=o.size;return o.set(r,n),this.size+=o.size==h?0:1,this}ni.prototype.clear=yg,ni.prototype.delete=vg,ni.prototype.get=bg,ni.prototype.has=mg,ni.prototype.set=wg;function Mi(r){var n=-1,o=r==null?0:r.length;for(this.__data__=new ni;++n<o;)this.add(r[n])}function Eg(r){return this.__data__.set(r,_),this}function Dg(r){return this.__data__.has(r)}Mi.prototype.add=Mi.prototype.push=Eg,Mi.prototype.has=Dg;function Mr(r){var n=this.__data__=new ii(r);this.size=n.size}function Sg(){this.__data__=new ii,this.size=0}function Ig(r){var n=this.__data__,o=n.delete(r);return this.size=n.size,o}function xg(r){return this.__data__.get(r)}function Og(r){return this.__data__.has(r)}function Pg(r,n){var o=this.__data__;if(o instanceof ii){var h=o.__data__;if(!Fn||h.length<a-1)return h.push([r,n]),this.size=++o.size,this;o=this.__data__=new ni(h)}return o.set(r,n),this.size=o.size,this}Mr.prototype.clear=Sg,Mr.prototype.delete=Ig,Mr.prototype.get=xg,Mr.prototype.has=Og,Mr.prototype.set=Pg;function eh(r,n){var o=Ne(r),h=!o&&Ki(r),d=!o&&!h&&Di(r),v=!o&&!h&&!d&&bn(r),D=o||h||d||v,P=D?wo(r.length,Ld):[],L=P.length;for(var Y in r)(n||nt.call(r,Y))&&!(D&&(Y=="length"||d&&(Y=="offset"||Y=="parent")||v&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||ci(Y,L)))&&P.push(Y);return P}function th(r){var n=r.length;return n?r[Lo(0,n-1)]:t}function Cg(r,n){return pa(lr(r),qi(n,0,r.length))}function Ag(r){return pa(lr(r))}function Po(r,n,o){(o!==t&&!qr(r[n],o)||o===t&&!(n in r))&&si(r,n,o)}function Mn(r,n,o){var h=r[n];(!(nt.call(r,n)&&qr(h,o))||o===t&&!(n in r))&&si(r,n,o)}function ea(r,n){for(var o=r.length;o--;)if(qr(r[o][0],n))return o;return-1}function Tg(r,n,o,h){return bi(r,function(d,v,D){n(h,d,o(d),D)}),h}function rh(r,n){return r&&Gr(n,Vt(n),r)}function Ng(r,n){return r&&Gr(n,pr(n),r)}function si(r,n,o){n=="__proto__"&&Ws?Ws(r,n,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[n]=o}function Co(r,n){for(var o=-1,h=n.length,d=B(h),v=r==null;++o<h;)d[o]=v?t:uc(r,n[o]);return d}function qi(r,n,o){return r===r&&(o!==t&&(r=r<=o?r:o),n!==t&&(r=r>=n?r:n)),r}function Cr(r,n,o,h,d,v){var D,P=n&A,L=n&I,Y=n&C;if(o&&(D=d?o(r,h,d,v):o(r)),D!==t)return D;if(!bt(r))return r;var X=Ne(r);if(X){if(D=m0(r),!P)return lr(r,D)}else{var Q=Xt(r),oe=Q==ne||Q==fe;if(Di(r))return xh(r,P);if(Q==je||Q==he||oe&&!d){if(D=L||oe?{}:Vh(r),!P)return L?u0(r,Ng(D,r)):c0(r,rh(D,r))}else{if(!st[Q])return d?r:{};D=w0(r,Q,P)}}v||(v=new Mr);var _e=v.get(r);if(_e)return _e;v.set(r,D),ml(r)?r.forEach(function(Ee){D.add(Cr(Ee,n,o,Ee,r,v))}):vl(r)&&r.forEach(function(Ee,Ge){D.set(Ge,Cr(Ee,n,o,Ge,r,v))});var we=Y?L?Yo:Wo:L?pr:Vt,ze=X?t:we(r);return xr(ze||r,function(Ee,Ge){ze&&(Ge=Ee,Ee=r[Ge]),Mn(D,Ge,Cr(Ee,n,o,Ge,r,v))}),D}function Rg(r){var n=Vt(r);return function(o){return ih(o,r,n)}}function ih(r,n,o){var h=o.length;if(r==null)return!h;for(r=ut(r);h--;){var d=o[h],v=n[d],D=r[d];if(D===t&&!(d in r)||!v(D))return!1}return!0}function nh(r,n,o){if(typeof r!="function")throw new Or(p);return kn(function(){r.apply(t,o)},n)}function qn(r,n,o,h){var d=-1,v=js,D=!0,P=r.length,L=[],Y=n.length;if(!P)return L;o&&(n=yt(n,vr(o))),h?(v=go,D=!1):n.length>=a&&(v=Rn,D=!1,n=new Mi(n));e:for(;++d<P;){var X=r[d],Q=o==null?X:o(X);if(X=h||X!==0?X:0,D&&Q===Q){for(var oe=Y;oe--;)if(n[oe]===Q)continue e;L.push(X)}else v(n,Q,h)||L.push(X)}return L}var bi=Th(kr),sh=Th(To,!0);function $g(r,n){var o=!0;return bi(r,function(h,d,v){return o=!!n(h,d,v),o}),o}function ta(r,n,o){for(var h=-1,d=r.length;++h<d;){var v=r[h],D=n(v);if(D!=null&&(P===t?D===D&&!mr(D):o(D,P)))var P=D,L=v}return L}function Fg(r,n,o,h){var d=r.length;for(o=Le(o),o<0&&(o=-o>d?0:d+o),h=h===t||h>d?d:Le(h),h<0&&(h+=d),h=o>h?0:El(h);o<h;)r[o++]=n;return r}function ah(r,n){var o=[];return bi(r,function(h,d,v){n(h,d,v)&&o.push(h)}),o}function Gt(r,n,o,h,d){var v=-1,D=r.length;for(o||(o=D0),d||(d=[]);++v<D;){var P=r[v];n>0&&o(P)?n>1?Gt(P,n-1,o,h,d):_i(d,P):h||(d[d.length]=P)}return d}var Ao=Nh(),oh=Nh(!0);function kr(r,n){return r&&Ao(r,n,Vt)}function To(r,n){return r&&oh(r,n,Vt)}function ra(r,n){return gi(n,function(o){return ui(r[o])})}function zi(r,n){n=wi(n,r);for(var o=0,h=n.length;r!=null&&o<h;)r=r[Wr(n[o++])];return o&&o==h?r:t}function ch(r,n,o){var h=n(r);return Ne(r)?h:_i(h,o(r))}function rr(r){return r==null?r===t?qe:Ve:ji&&ji in ut(r)?y0(r):A0(r)}function No(r,n){return r>n}function Ug(r,n){return r!=null&&nt.call(r,n)}function jg(r,n){return r!=null&&n in ut(r)}function Lg(r,n,o){return r>=Jt(n,o)&&r<Bt(n,o)}function Ro(r,n,o){for(var h=o?go:js,d=r[0].length,v=r.length,D=v,P=B(v),L=1/0,Y=[];D--;){var X=r[D];D&&n&&(X=yt(X,vr(n))),L=Jt(X.length,L),P[D]=!o&&(n||d>=120&&X.length>=120)?new Mi(D&&X):t}X=r[0];var Q=-1,oe=P[0];e:for(;++Q<d&&Y.length<L;){var _e=X[Q],we=n?n(_e):_e;if(_e=o||_e!==0?_e:0,!(oe?Rn(oe,we):h(Y,we,o))){for(D=v;--D;){var ze=P[D];if(!(ze?Rn(ze,we):h(r[D],we,o)))continue e}oe&&oe.push(we),Y.push(_e)}}return Y}function Mg(r,n,o,h){return kr(r,function(d,v,D){n(h,o(d),v,D)}),h}function zn(r,n,o){n=wi(n,r),r=Yh(r,n);var h=r==null?r:r[Wr(Tr(n))];return h==null?t:Kt(h,r,o)}function uh(r){return xt(r)&&rr(r)==he}function qg(r){return xt(r)&&rr(r)==De}function zg(r){return xt(r)&&rr(r)==N}function Hn(r,n,o,h,d){return r===n?!0:r==null||n==null||!xt(r)&&!xt(n)?r!==r&&n!==n:Hg(r,n,o,h,Hn,d)}function Hg(r,n,o,h,d,v){var D=Ne(r),P=Ne(n),L=D?ve:Xt(r),Y=P?ve:Xt(n);L=L==he?je:L,Y=Y==he?je:Y;var X=L==je,Q=Y==je,oe=L==Y;if(oe&&Di(r)){if(!Di(n))return!1;D=!0,X=!1}if(oe&&!X)return v||(v=new Mr),D||bn(r)?Hh(r,n,o,h,d,v):g0(r,n,L,o,h,d,v);if(!(o&U)){var _e=X&&nt.call(r,"__wrapped__"),we=Q&&nt.call(n,"__wrapped__");if(_e||we){var ze=_e?r.value():r,Ee=we?n.value():n;return v||(v=new Mr),d(ze,Ee,o,h,v)}}return oe?(v||(v=new Mr),_0(r,n,o,h,d,v)):!1}function Bg(r){return xt(r)&&Xt(r)==Se}function $o(r,n,o,h){var d=o.length,v=d,D=!h;if(r==null)return!v;for(r=ut(r);d--;){var P=o[d];if(D&&P[2]?P[1]!==r[P[0]]:!(P[0]in r))return!1}for(;++d<v;){P=o[d];var L=P[0],Y=r[L],X=P[1];if(D&&P[2]){if(Y===t&&!(L in r))return!1}else{var Q=new Mr;if(h)var oe=h(Y,X,L,r,n,Q);if(!(oe===t?Hn(X,Y,U|H,h,Q):oe))return!1}}return!0}function hh(r){if(!bt(r)||I0(r))return!1;var n=ui(r)?Bd:Za;return n.test(Bi(r))}function Kg(r){return xt(r)&&rr(r)==Me}function Vg(r){return xt(r)&&Xt(r)==Ie}function kg(r){return xt(r)&&ba(r.length)&&!!at[rr(r)]}function lh(r){return typeof r=="function"?r:r==null?dr:typeof r=="object"?Ne(r)?dh(r[0],r[1]):ph(r):Rl(r)}function Fo(r){if(!Vn(r))return Yd(r);var n=[];for(var o in ut(r))nt.call(r,o)&&o!="constructor"&&n.push(o);return n}function Gg(r){if(!bt(r))return C0(r);var n=Vn(r),o=[];for(var h in r)h=="constructor"&&(n||!nt.call(r,h))||o.push(h);return o}function Uo(r,n){return r<n}function fh(r,n){var o=-1,h=fr(r)?B(r.length):[];return bi(r,function(d,v,D){h[++o]=n(d,v,D)}),h}function ph(r){var n=Xo(r);return n.length==1&&n[0][2]?Gh(n[0][0],n[0][1]):function(o){return o===r||$o(o,r,n)}}function dh(r,n){return Qo(r)&&kh(n)?Gh(Wr(r),n):function(o){var h=uc(o,r);return h===t&&h===n?hc(o,r):Hn(n,h,U|H)}}function ia(r,n,o,h,d){r!==n&&Ao(n,function(v,D){if(d||(d=new Mr),bt(v))Wg(r,n,D,o,ia,h,d);else{var P=h?h(tc(r,D),v,D+"",r,n,d):t;P===t&&(P=v),Po(r,D,P)}},pr)}function Wg(r,n,o,h,d,v,D){var P=tc(r,o),L=tc(n,o),Y=D.get(L);if(Y){Po(r,o,Y);return}var X=v?v(P,L,o+"",r,n,D):t,Q=X===t;if(Q){var oe=Ne(L),_e=!oe&&Di(L),we=!oe&&!_e&&bn(L);X=L,oe||_e||we?Ne(P)?X=P:At(P)?X=lr(P):_e?(Q=!1,X=xh(L,!0)):we?(Q=!1,X=Oh(L,!0)):X=[]:Gn(L)||Ki(L)?(X=P,Ki(P)?X=Dl(P):(!bt(P)||ui(P))&&(X=Vh(L))):Q=!1}Q&&(D.set(L,X),d(X,L,h,v,D),D.delete(L)),Po(r,o,X)}function gh(r,n){var o=r.length;if(o)return n+=n<0?o:0,ci(n,o)?r[n]:t}function _h(r,n,o){n.length?n=yt(n,function(v){return Ne(v)?function(D){return zi(D,v.length===1?v[0]:v)}:v}):n=[dr];var h=-1;n=yt(n,vr(be()));var d=fh(r,function(v,D,P){var L=yt(n,function(Y){return Y(v)});return{criteria:L,index:++h,value:v}});return wd(d,function(v,D){return o0(v,D,o)})}function Yg(r,n){return yh(r,n,function(o,h){return hc(r,h)})}function yh(r,n,o){for(var h=-1,d=n.length,v={};++h<d;){var D=n[h],P=zi(r,D);o(P,D)&&Bn(v,wi(D,r),P)}return v}function Jg(r){return function(n){return zi(n,r)}}function jo(r,n,o,h){var d=h?md:cn,v=-1,D=n.length,P=r;for(r===n&&(n=lr(n)),o&&(P=yt(r,vr(o)));++v<D;)for(var L=0,Y=n[v],X=o?o(Y):Y;(L=d(P,X,L,h))>-1;)P!==r&&Gs.call(P,L,1),Gs.call(r,L,1);return r}function vh(r,n){for(var o=r?n.length:0,h=o-1;o--;){var d=n[o];if(o==h||d!==v){var v=d;ci(d)?Gs.call(r,d,1):zo(r,d)}}return r}function Lo(r,n){return r+Js(Zu()*(n-r+1))}function Xg(r,n,o,h){for(var d=-1,v=Bt(Ys((n-r)/(o||1)),0),D=B(v);v--;)D[h?v:++d]=r,r+=o;return D}function Mo(r,n){var o="";if(!r||n<1||n>G)return o;do n%2&&(o+=r),n=Js(n/2),n&&(r+=r);while(n);return o}function Ke(r,n){return rc(Wh(r,n,dr),r+"")}function Zg(r){return th(mn(r))}function Qg(r,n){var o=mn(r);return pa(o,qi(n,0,o.length))}function Bn(r,n,o,h){if(!bt(r))return r;n=wi(n,r);for(var d=-1,v=n.length,D=v-1,P=r;P!=null&&++d<v;){var L=Wr(n[d]),Y=o;if(L==="__proto__"||L==="constructor"||L==="prototype")return r;if(d!=D){var X=P[L];Y=h?h(X,L,P):t,Y===t&&(Y=bt(X)?X:ci(n[d+1])?[]:{})}Mn(P,L,Y),P=P[L]}return r}var bh=Xs?function(r,n){return Xs.set(r,n),r}:dr,e0=Ws?function(r,n){return Ws(r,"toString",{configurable:!0,enumerable:!1,value:fc(n),writable:!0})}:dr;function t0(r){return pa(mn(r))}function Ar(r,n,o){var h=-1,d=r.length;n<0&&(n=-n>d?0:d+n),o=o>d?d:o,o<0&&(o+=d),d=n>o?0:o-n>>>0,n>>>=0;for(var v=B(d);++h<d;)v[h]=r[h+n];return v}function r0(r,n){var o;return bi(r,function(h,d,v){return o=n(h,d,v),!o}),!!o}function na(r,n,o){var h=0,d=r==null?h:r.length;if(typeof n=="number"&&n===n&&d<=ie){for(;h<d;){var v=h+d>>>1,D=r[v];D!==null&&!mr(D)&&(o?D<=n:D<n)?h=v+1:d=v}return d}return qo(r,n,dr,o)}function qo(r,n,o,h){var d=0,v=r==null?0:r.length;if(v===0)return 0;n=o(n);for(var D=n!==n,P=n===null,L=mr(n),Y=n===t;d<v;){var X=Js((d+v)/2),Q=o(r[X]),oe=Q!==t,_e=Q===null,we=Q===Q,ze=mr(Q);if(D)var Ee=h||we;else Y?Ee=we&&(h||oe):P?Ee=we&&oe&&(h||!_e):L?Ee=we&&oe&&!_e&&(h||!ze):_e||ze?Ee=!1:Ee=h?Q<=n:Q<n;Ee?d=X+1:v=X}return Jt(v,xe)}function mh(r,n){for(var o=-1,h=r.length,d=0,v=[];++o<h;){var D=r[o],P=n?n(D):D;if(!o||!qr(P,L)){var L=P;v[d++]=D===0?0:D}}return v}function wh(r){return typeof r=="number"?r:mr(r)?W:+r}function br(r){if(typeof r=="string")return r;if(Ne(r))return yt(r,br)+"";if(mr(r))return Qu?Qu.call(r):"";var n=r+"";return n=="0"&&1/r==-te?"-0":n}function mi(r,n,o){var h=-1,d=js,v=r.length,D=!0,P=[],L=P;if(o)D=!1,d=go;else if(v>=a){var Y=n?null:p0(r);if(Y)return Ms(Y);D=!1,d=Rn,L=new Mi}else L=n?[]:P;e:for(;++h<v;){var X=r[h],Q=n?n(X):X;if(X=o||X!==0?X:0,D&&Q===Q){for(var oe=L.length;oe--;)if(L[oe]===Q)continue e;n&&L.push(Q),P.push(X)}else d(L,Q,o)||(L!==P&&L.push(Q),P.push(X))}return P}function zo(r,n){return n=wi(n,r),r=Yh(r,n),r==null||delete r[Wr(Tr(n))]}function Eh(r,n,o,h){return Bn(r,n,o(zi(r,n)),h)}function sa(r,n,o,h){for(var d=r.length,v=h?d:-1;(h?v--:++v<d)&&n(r[v],v,r););return o?Ar(r,h?0:v,h?v+1:d):Ar(r,h?v+1:0,h?d:v)}function Dh(r,n){var o=r;return o instanceof Ye&&(o=o.value()),_o(n,function(h,d){return d.func.apply(d.thisArg,_i([h],d.args))},o)}function Ho(r,n,o){var h=r.length;if(h<2)return h?mi(r[0]):[];for(var d=-1,v=B(h);++d<h;)for(var D=r[d],P=-1;++P<h;)P!=d&&(v[d]=qn(v[d]||D,r[P],n,o));return mi(Gt(v,1),n,o)}function Sh(r,n,o){for(var h=-1,d=r.length,v=n.length,D={};++h<d;){var P=h<v?n[h]:t;o(D,r[h],P)}return D}function Bo(r){return At(r)?r:[]}function Ko(r){return typeof r=="function"?r:dr}function wi(r,n){return Ne(r)?r:Qo(r,n)?[r]:Qh(it(r))}var i0=Ke;function Ei(r,n,o){var h=r.length;return o=o===t?h:o,!n&&o>=h?r:Ar(r,n,o)}var Ih=Kd||function(r){return Xe.clearTimeout(r)};function xh(r,n){if(n)return r.slice();var o=r.length,h=Gu?Gu(o):new r.constructor(o);return r.copy(h),h}function Vo(r){var n=new r.constructor(r.byteLength);return new Vs(n).set(new Vs(r)),n}function n0(r,n){var o=n?Vo(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.byteLength)}function s0(r){var n=new r.constructor(r.source,Sr.exec(r));return n.lastIndex=r.lastIndex,n}function a0(r){return Ln?ut(Ln.call(r)):{}}function Oh(r,n){var o=n?Vo(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.length)}function Ph(r,n){if(r!==n){var o=r!==t,h=r===null,d=r===r,v=mr(r),D=n!==t,P=n===null,L=n===n,Y=mr(n);if(!P&&!Y&&!v&&r>n||v&&D&&L&&!P&&!Y||h&&D&&L||!o&&L||!d)return 1;if(!h&&!v&&!Y&&r<n||Y&&o&&d&&!h&&!v||P&&o&&d||!D&&d||!L)return-1}return 0}function o0(r,n,o){for(var h=-1,d=r.criteria,v=n.criteria,D=d.length,P=o.length;++h<D;){var L=Ph(d[h],v[h]);if(L){if(h>=P)return L;var Y=o[h];return L*(Y=="desc"?-1:1)}}return r.index-n.index}function Ch(r,n,o,h){for(var d=-1,v=r.length,D=o.length,P=-1,L=n.length,Y=Bt(v-D,0),X=B(L+Y),Q=!h;++P<L;)X[P]=n[P];for(;++d<D;)(Q||d<v)&&(X[o[d]]=r[d]);for(;Y--;)X[P++]=r[d++];return X}function Ah(r,n,o,h){for(var d=-1,v=r.length,D=-1,P=o.length,L=-1,Y=n.length,X=Bt(v-P,0),Q=B(X+Y),oe=!h;++d<X;)Q[d]=r[d];for(var _e=d;++L<Y;)Q[_e+L]=n[L];for(;++D<P;)(oe||d<v)&&(Q[_e+o[D]]=r[d++]);return Q}function lr(r,n){var o=-1,h=r.length;for(n||(n=B(h));++o<h;)n[o]=r[o];return n}function Gr(r,n,o,h){var d=!o;o||(o={});for(var v=-1,D=n.length;++v<D;){var P=n[v],L=h?h(o[P],r[P],P,o,r):t;L===t&&(L=r[P]),d?si(o,P,L):Mn(o,P,L)}return o}function c0(r,n){return Gr(r,Zo(r),n)}function u0(r,n){return Gr(r,Bh(r),n)}function aa(r,n){return function(o,h){var d=Ne(o)?dd:Tg,v=n?n():{};return d(o,r,be(h,2),v)}}function _n(r){return Ke(function(n,o){var h=-1,d=o.length,v=d>1?o[d-1]:t,D=d>2?o[2]:t;for(v=r.length>3&&typeof v=="function"?(d--,v):t,D&&ir(o[0],o[1],D)&&(v=d<3?t:v,d=1),n=ut(n);++h<d;){var P=o[h];P&&r(n,P,h,v)}return n})}function Th(r,n){return function(o,h){if(o==null)return o;if(!fr(o))return r(o,h);for(var d=o.length,v=n?d:-1,D=ut(o);(n?v--:++v<d)&&h(D[v],v,D)!==!1;);return o}}function Nh(r){return function(n,o,h){for(var d=-1,v=ut(n),D=h(n),P=D.length;P--;){var L=D[r?P:++d];if(o(v[L],L,v)===!1)break}return n}}function h0(r,n,o){var h=n&J,d=Kn(r);function v(){var D=this&&this!==Xe&&this instanceof v?d:r;return D.apply(h?o:this,arguments)}return v}function Rh(r){return function(n){n=it(n);var o=un(n)?Lr(n):t,h=o?o[0]:n.charAt(0),d=o?Ei(o,1).join(""):n.slice(1);return h[r]()+d}}function yn(r){return function(n){return _o(Tl(Al(n).replace(Tn,"")),r,"")}}function Kn(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var o=gn(r.prototype),h=r.apply(o,n);return bt(h)?h:o}}function l0(r,n,o){var h=Kn(r);function d(){for(var v=arguments.length,D=B(v),P=v,L=vn(d);P--;)D[P]=arguments[P];var Y=v<3&&D[0]!==L&&D[v-1]!==L?[]:yi(D,L);if(v-=Y.length,v<o)return Lh(r,n,oa,d.placeholder,t,D,Y,t,t,o-v);var X=this&&this!==Xe&&this instanceof d?h:r;return Kt(X,this,D)}return d}function $h(r){return function(n,o,h){var d=ut(n);if(!fr(n)){var v=be(o,3);n=Vt(n),o=function(P){return v(d[P],P,d)}}var D=r(n,o,h);return D>-1?d[v?n[D]:D]:t}}function Fh(r){return oi(function(n){var o=n.length,h=o,d=Pr.prototype.thru;for(r&&n.reverse();h--;){var v=n[h];if(typeof v!="function")throw new Or(p);if(d&&!D&&la(v)=="wrapper")var D=new Pr([],!0)}for(h=D?h:o;++h<o;){v=n[h];var P=la(v),L=P=="wrapper"?Jo(v):t;L&&ec(L[0])&&L[1]==(u|j|O|b)&&!L[4].length&&L[9]==1?D=D[la(L[0])].apply(D,L[3]):D=v.length==1&&ec(v)?D[P]():D.thru(v)}return function(){var Y=arguments,X=Y[0];if(D&&Y.length==1&&Ne(X))return D.plant(X).value();for(var Q=0,oe=o?n[Q].apply(this,Y):X;++Q<o;)oe=n[Q].call(this,oe);return oe}})}function oa(r,n,o,h,d,v,D,P,L,Y){var X=n&u,Q=n&J,oe=n&se,_e=n&(j|S),we=n&K,ze=oe?t:Kn(r);function Ee(){for(var Ge=arguments.length,Ze=B(Ge),wr=Ge;wr--;)Ze[wr]=arguments[wr];if(_e)var nr=vn(Ee),Er=Dd(Ze,nr);if(h&&(Ze=Ch(Ze,h,d,_e)),v&&(Ze=Ah(Ze,v,D,_e)),Ge-=Er,_e&&Ge<Y){var Tt=yi(Ze,nr);return Lh(r,n,oa,Ee.placeholder,o,Ze,Tt,P,L,Y-Ge)}var zr=Q?o:this,li=oe?zr[r]:r;return Ge=Ze.length,P?Ze=T0(Ze,P):we&&Ge>1&&Ze.reverse(),X&&L<Ge&&(Ze.length=L),this&&this!==Xe&&this instanceof Ee&&(li=ze||Kn(li)),li.apply(zr,Ze)}return Ee}function Uh(r,n){return function(o,h){return Mg(o,r,n(h),{})}}function ca(r,n){return function(o,h){var d;if(o===t&&h===t)return n;if(o!==t&&(d=o),h!==t){if(d===t)return h;typeof o=="string"||typeof h=="string"?(o=br(o),h=br(h)):(o=wh(o),h=wh(h)),d=r(o,h)}return d}}function ko(r){return oi(function(n){return n=yt(n,vr(be())),Ke(function(o){var h=this;return r(n,function(d){return Kt(d,h,o)})})})}function ua(r,n){n=n===t?" ":br(n);var o=n.length;if(o<2)return o?Mo(n,r):n;var h=Mo(n,Ys(r/hn(n)));return un(n)?Ei(Lr(h),0,r).join(""):h.slice(0,r)}function f0(r,n,o,h){var d=n&J,v=Kn(r);function D(){for(var P=-1,L=arguments.length,Y=-1,X=h.length,Q=B(X+L),oe=this&&this!==Xe&&this instanceof D?v:r;++Y<X;)Q[Y]=h[Y];for(;L--;)Q[Y++]=arguments[++P];return Kt(oe,d?o:this,Q)}return D}function jh(r){return function(n,o,h){return h&&typeof h!="number"&&ir(n,o,h)&&(o=h=t),n=hi(n),o===t?(o=n,n=0):o=hi(o),h=h===t?n<o?1:-1:hi(h),Xg(n,o,h,r)}}function ha(r){return function(n,o){return typeof n=="string"&&typeof o=="string"||(n=Nr(n),o=Nr(o)),r(n,o)}}function Lh(r,n,o,h,d,v,D,P,L,Y){var X=n&j,Q=X?D:t,oe=X?t:D,_e=X?v:t,we=X?t:v;n|=X?O:m,n&=~(X?m:O),n&T||(n&=~(J|se));var ze=[r,n,d,_e,Q,we,oe,P,L,Y],Ee=o.apply(t,ze);return ec(r)&&Jh(Ee,ze),Ee.placeholder=h,Xh(Ee,r,n)}function Go(r){var n=Ht[r];return function(o,h){if(o=Nr(o),h=h==null?0:Jt(Le(h),292),h&&Xu(o)){var d=(it(o)+"e").split("e"),v=n(d[0]+"e"+(+d[1]+h));return d=(it(v)+"e").split("e"),+(d[0]+"e"+(+d[1]-h))}return n(o)}}var p0=pn&&1/Ms(new pn([,-0]))[1]==te?function(r){return new pn(r)}:gc;function Mh(r){return function(n){var o=Xt(n);return o==Se?Do(n):o==Ie?Ad(n):Ed(n,r(n))}}function ai(r,n,o,h,d,v,D,P){var L=n&se;if(!L&&typeof r!="function")throw new Or(p);var Y=h?h.length:0;if(Y||(n&=~(O|m),h=d=t),D=D===t?D:Bt(Le(D),0),P=P===t?P:Le(P),Y-=d?d.length:0,n&m){var X=h,Q=d;h=d=t}var oe=L?t:Jo(r),_e=[r,n,o,h,d,X,Q,v,D,P];if(oe&&P0(_e,oe),r=_e[0],n=_e[1],o=_e[2],h=_e[3],d=_e[4],P=_e[9]=_e[9]===t?L?0:r.length:Bt(_e[9]-Y,0),!P&&n&(j|S)&&(n&=~(j|S)),!n||n==J)var we=h0(r,n,o);else n==j||n==S?we=l0(r,n,P):(n==O||n==(J|O))&&!d.length?we=f0(r,n,o,h):we=oa.apply(t,_e);var ze=oe?bh:Jh;return Xh(ze(we,_e),r,n)}function qh(r,n,o,h){return r===t||qr(r,fn[o])&&!nt.call(h,o)?n:r}function zh(r,n,o,h,d,v){return bt(r)&&bt(n)&&(v.set(n,r),ia(r,n,t,zh,v),v.delete(n)),r}function d0(r){return Gn(r)?t:r}function Hh(r,n,o,h,d,v){var D=o&U,P=r.length,L=n.length;if(P!=L&&!(D&&L>P))return!1;var Y=v.get(r),X=v.get(n);if(Y&&X)return Y==n&&X==r;var Q=-1,oe=!0,_e=o&H?new Mi:t;for(v.set(r,n),v.set(n,r);++Q<P;){var we=r[Q],ze=n[Q];if(h)var Ee=D?h(ze,we,Q,n,r,v):h(we,ze,Q,r,n,v);if(Ee!==t){if(Ee)continue;oe=!1;break}if(_e){if(!yo(n,function(Ge,Ze){if(!Rn(_e,Ze)&&(we===Ge||d(we,Ge,o,h,v)))return _e.push(Ze)})){oe=!1;break}}else if(!(we===ze||d(we,ze,o,h,v))){oe=!1;break}}return v.delete(r),v.delete(n),oe}function g0(r,n,o,h,d,v,D){switch(o){case Ce:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case De:return!(r.byteLength!=n.byteLength||!v(new Vs(r),new Vs(n)));case M:case N:case He:return qr(+r,+n);case x:return r.name==n.name&&r.message==n.message;case Me:case Re:return r==n+"";case Se:var P=Do;case Ie:var L=h&U;if(P||(P=Ms),r.size!=n.size&&!L)return!1;var Y=D.get(r);if(Y)return Y==n;h|=H,D.set(r,n);var X=Hh(P(r),P(n),h,d,v,D);return D.delete(r),X;case $e:if(Ln)return Ln.call(r)==Ln.call(n)}return!1}function _0(r,n,o,h,d,v){var D=o&U,P=Wo(r),L=P.length,Y=Wo(n),X=Y.length;if(L!=X&&!D)return!1;for(var Q=L;Q--;){var oe=P[Q];if(!(D?oe in n:nt.call(n,oe)))return!1}var _e=v.get(r),we=v.get(n);if(_e&&we)return _e==n&&we==r;var ze=!0;v.set(r,n),v.set(n,r);for(var Ee=D;++Q<L;){oe=P[Q];var Ge=r[oe],Ze=n[oe];if(h)var wr=D?h(Ze,Ge,oe,n,r,v):h(Ge,Ze,oe,r,n,v);if(!(wr===t?Ge===Ze||d(Ge,Ze,o,h,v):wr)){ze=!1;break}Ee||(Ee=oe=="constructor")}if(ze&&!Ee){var nr=r.constructor,Er=n.constructor;nr!=Er&&"constructor"in r&&"constructor"in n&&!(typeof nr=="function"&&nr instanceof nr&&typeof Er=="function"&&Er instanceof Er)&&(ze=!1)}return v.delete(r),v.delete(n),ze}function oi(r){return rc(Wh(r,t,il),r+"")}function Wo(r){return ch(r,Vt,Zo)}function Yo(r){return ch(r,pr,Bh)}var Jo=Xs?function(r){return Xs.get(r)}:gc;function la(r){for(var n=r.name+"",o=dn[n],h=nt.call(dn,n)?o.length:0;h--;){var d=o[h],v=d.func;if(v==null||v==r)return d.name}return n}function vn(r){var n=nt.call(y,"placeholder")?y:r;return n.placeholder}function be(){var r=y.iteratee||pc;return r=r===pc?lh:r,arguments.length?r(arguments[0],arguments[1]):r}function fa(r,n){var o=r.__data__;return S0(n)?o[typeof n=="string"?"string":"hash"]:o.map}function Xo(r){for(var n=Vt(r),o=n.length;o--;){var h=n[o],d=r[h];n[o]=[h,d,kh(d)]}return n}function Hi(r,n){var o=Od(r,n);return hh(o)?o:t}function y0(r){var n=nt.call(r,ji),o=r[ji];try{r[ji]=t;var h=!0}catch{}var d=Bs.call(r);return h&&(n?r[ji]=o:delete r[ji]),d}var Zo=Io?function(r){return r==null?[]:(r=ut(r),gi(Io(r),function(n){return Yu.call(r,n)}))}:_c,Bh=Io?function(r){for(var n=[];r;)_i(n,Zo(r)),r=ks(r);return n}:_c,Xt=rr;(xo&&Xt(new xo(new ArrayBuffer(1)))!=Ce||Fn&&Xt(new Fn)!=Se||Oo&&Xt(Oo.resolve())!=pt||pn&&Xt(new pn)!=Ie||Un&&Xt(new Un)!=Pe)&&(Xt=function(r){var n=rr(r),o=n==je?r.constructor:t,h=o?Bi(o):"";if(h)switch(h){case Qd:return Ce;case eg:return Se;case tg:return pt;case rg:return Ie;case ig:return Pe}return n});function v0(r,n,o){for(var h=-1,d=o.length;++h<d;){var v=o[h],D=v.size;switch(v.type){case"drop":r+=D;break;case"dropRight":n-=D;break;case"take":n=Jt(n,r+D);break;case"takeRight":r=Bt(r,n-D);break}}return{start:r,end:n}}function b0(r){var n=r.match(ht);return n?n[1].split(jt):[]}function Kh(r,n,o){n=wi(n,r);for(var h=-1,d=n.length,v=!1;++h<d;){var D=Wr(n[h]);if(!(v=r!=null&&o(r,D)))break;r=r[D]}return v||++h!=d?v:(d=r==null?0:r.length,!!d&&ba(d)&&ci(D,d)&&(Ne(r)||Ki(r)))}function m0(r){var n=r.length,o=new r.constructor(n);return n&&typeof r[0]=="string"&&nt.call(r,"index")&&(o.index=r.index,o.input=r.input),o}function Vh(r){return typeof r.constructor=="function"&&!Vn(r)?gn(ks(r)):{}}function w0(r,n,o){var h=r.constructor;switch(n){case De:return Vo(r);case M:case N:return new h(+r);case Ce:return n0(r,o);case Be:case Oe:case ke:case We:case et:case tt:case Je:case Qt:case ur:return Oh(r,o);case Se:return new h;case He:case Re:return new h(r);case Me:return s0(r);case Ie:return new h;case $e:return a0(r)}}function E0(r,n){var o=n.length;if(!o)return r;var h=o-1;return n[h]=(o>1?"& ":"")+n[h],n=n.join(o>2?", ":" "),r.replace(It,`{
/* [wrapped with `+n+`] */
`)}function D0(r){return Ne(r)||Ki(r)||!!(Ju&&r&&r[Ju])}function ci(r,n){var o=typeof r;return n=n??G,!!n&&(o=="number"||o!="symbol"&&eo.test(r))&&r>-1&&r%1==0&&r<n}function ir(r,n,o){if(!bt(o))return!1;var h=typeof n;return(h=="number"?fr(o)&&ci(n,o.length):h=="string"&&n in o)?qr(o[n],r):!1}function Qo(r,n){if(Ne(r))return!1;var o=typeof r;return o=="number"||o=="symbol"||o=="boolean"||r==null||mr(r)?!0:$t.test(r)||!_t.test(r)||n!=null&&r in ut(n)}function S0(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}function ec(r){var n=la(r),o=y[n];if(typeof o!="function"||!(n in Ye.prototype))return!1;if(r===o)return!0;var h=Jo(o);return!!h&&r===h[0]}function I0(r){return!!ku&&ku in r}var x0=zs?ui:yc;function Vn(r){var n=r&&r.constructor,o=typeof n=="function"&&n.prototype||fn;return r===o}function kh(r){return r===r&&!bt(r)}function Gh(r,n){return function(o){return o==null?!1:o[r]===n&&(n!==t||r in ut(o))}}function O0(r){var n=ya(r,function(h){return o.size===g&&o.clear(),h}),o=n.cache;return n}function P0(r,n){var o=r[1],h=n[1],d=o|h,v=d<(J|se|u),D=h==u&&o==j||h==u&&o==b&&r[7].length<=n[8]||h==(u|b)&&n[7].length<=n[8]&&o==j;if(!(v||D))return r;h&J&&(r[2]=n[2],d|=o&J?0:T);var P=n[3];if(P){var L=r[3];r[3]=L?Ch(L,P,n[4]):P,r[4]=L?yi(r[3],w):n[4]}return P=n[5],P&&(L=r[5],r[5]=L?Ah(L,P,n[6]):P,r[6]=L?yi(r[5],w):n[6]),P=n[7],P&&(r[7]=P),h&u&&(r[8]=r[8]==null?n[8]:Jt(r[8],n[8])),r[9]==null&&(r[9]=n[9]),r[0]=n[0],r[1]=d,r}function C0(r){var n=[];if(r!=null)for(var o in ut(r))n.push(o);return n}function A0(r){return Bs.call(r)}function Wh(r,n,o){return n=Bt(n===t?r.length-1:n,0),function(){for(var h=arguments,d=-1,v=Bt(h.length-n,0),D=B(v);++d<v;)D[d]=h[n+d];d=-1;for(var P=B(n+1);++d<n;)P[d]=h[d];return P[n]=o(D),Kt(r,this,P)}}function Yh(r,n){return n.length<2?r:zi(r,Ar(n,0,-1))}function T0(r,n){for(var o=r.length,h=Jt(n.length,o),d=lr(r);h--;){var v=n[h];r[h]=ci(v,o)?d[v]:t}return r}function tc(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}var Jh=Zh(bh),kn=kd||function(r,n){return Xe.setTimeout(r,n)},rc=Zh(e0);function Xh(r,n,o){var h=n+"";return rc(r,E0(h,N0(b0(h),o)))}function Zh(r){var n=0,o=0;return function(){var h=Jd(),d=ge-(h-o);if(o=h,d>0){if(++n>=ce)return arguments[0]}else n=0;return r.apply(t,arguments)}}function pa(r,n){var o=-1,h=r.length,d=h-1;for(n=n===t?h:n;++o<n;){var v=Lo(o,d),D=r[v];r[v]=r[o],r[o]=D}return r.length=n,r}var Qh=O0(function(r){var n=[];return r.charCodeAt(0)===46&&n.push(""),r.replace(Ft,function(o,h,d,v){n.push(d?v.replace(Wa,"$1"):h||o)}),n});function Wr(r){if(typeof r=="string"||mr(r))return r;var n=r+"";return n=="0"&&1/r==-te?"-0":n}function Bi(r){if(r!=null){try{return Hs.call(r)}catch{}try{return r+""}catch{}}return""}function N0(r,n){return xr(me,function(o){var h="_."+o[0];n&o[1]&&!js(r,h)&&r.push(h)}),r.sort()}function el(r){if(r instanceof Ye)return r.clone();var n=new Pr(r.__wrapped__,r.__chain__);return n.__actions__=lr(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}function R0(r,n,o){(o?ir(r,n,o):n===t)?n=1:n=Bt(Le(n),0);var h=r==null?0:r.length;if(!h||n<1)return[];for(var d=0,v=0,D=B(Ys(h/n));d<h;)D[v++]=Ar(r,d,d+=n);return D}function $0(r){for(var n=-1,o=r==null?0:r.length,h=0,d=[];++n<o;){var v=r[n];v&&(d[h++]=v)}return d}function F0(){var r=arguments.length;if(!r)return[];for(var n=B(r-1),o=arguments[0],h=r;h--;)n[h-1]=arguments[h];return _i(Ne(o)?lr(o):[o],Gt(n,1))}var U0=Ke(function(r,n){return At(r)?qn(r,Gt(n,1,At,!0)):[]}),j0=Ke(function(r,n){var o=Tr(n);return At(o)&&(o=t),At(r)?qn(r,Gt(n,1,At,!0),be(o,2)):[]}),L0=Ke(function(r,n){var o=Tr(n);return At(o)&&(o=t),At(r)?qn(r,Gt(n,1,At,!0),t,o):[]});function M0(r,n,o){var h=r==null?0:r.length;return h?(n=o||n===t?1:Le(n),Ar(r,n<0?0:n,h)):[]}function q0(r,n,o){var h=r==null?0:r.length;return h?(n=o||n===t?1:Le(n),n=h-n,Ar(r,0,n<0?0:n)):[]}function z0(r,n){return r&&r.length?sa(r,be(n,3),!0,!0):[]}function H0(r,n){return r&&r.length?sa(r,be(n,3),!0):[]}function B0(r,n,o,h){var d=r==null?0:r.length;return d?(o&&typeof o!="number"&&ir(r,n,o)&&(o=0,h=d),Fg(r,n,o,h)):[]}function tl(r,n,o){var h=r==null?0:r.length;if(!h)return-1;var d=o==null?0:Le(o);return d<0&&(d=Bt(h+d,0)),Ls(r,be(n,3),d)}function rl(r,n,o){var h=r==null?0:r.length;if(!h)return-1;var d=h-1;return o!==t&&(d=Le(o),d=o<0?Bt(h+d,0):Jt(d,h-1)),Ls(r,be(n,3),d,!0)}function il(r){var n=r==null?0:r.length;return n?Gt(r,1):[]}function K0(r){var n=r==null?0:r.length;return n?Gt(r,te):[]}function V0(r,n){var o=r==null?0:r.length;return o?(n=n===t?1:Le(n),Gt(r,n)):[]}function k0(r){for(var n=-1,o=r==null?0:r.length,h={};++n<o;){var d=r[n];h[d[0]]=d[1]}return h}function nl(r){return r&&r.length?r[0]:t}function G0(r,n,o){var h=r==null?0:r.length;if(!h)return-1;var d=o==null?0:Le(o);return d<0&&(d=Bt(h+d,0)),cn(r,n,d)}function W0(r){var n=r==null?0:r.length;return n?Ar(r,0,-1):[]}var Y0=Ke(function(r){var n=yt(r,Bo);return n.length&&n[0]===r[0]?Ro(n):[]}),J0=Ke(function(r){var n=Tr(r),o=yt(r,Bo);return n===Tr(o)?n=t:o.pop(),o.length&&o[0]===r[0]?Ro(o,be(n,2)):[]}),X0=Ke(function(r){var n=Tr(r),o=yt(r,Bo);return n=typeof n=="function"?n:t,n&&o.pop(),o.length&&o[0]===r[0]?Ro(o,t,n):[]});function Z0(r,n){return r==null?"":Wd.call(r,n)}function Tr(r){var n=r==null?0:r.length;return n?r[n-1]:t}function Q0(r,n,o){var h=r==null?0:r.length;if(!h)return-1;var d=h;return o!==t&&(d=Le(o),d=d<0?Bt(h+d,0):Jt(d,h-1)),n===n?Nd(r,n,d):Ls(r,Lu,d,!0)}function e1(r,n){return r&&r.length?gh(r,Le(n)):t}var t1=Ke(sl);function sl(r,n){return r&&r.length&&n&&n.length?jo(r,n):r}function r1(r,n,o){return r&&r.length&&n&&n.length?jo(r,n,be(o,2)):r}function i1(r,n,o){return r&&r.length&&n&&n.length?jo(r,n,t,o):r}var n1=oi(function(r,n){var o=r==null?0:r.length,h=Co(r,n);return vh(r,yt(n,function(d){return ci(d,o)?+d:d}).sort(Ph)),h});function s1(r,n){var o=[];if(!(r&&r.length))return o;var h=-1,d=[],v=r.length;for(n=be(n,3);++h<v;){var D=r[h];n(D,h,r)&&(o.push(D),d.push(h))}return vh(r,d),o}function ic(r){return r==null?r:Zd.call(r)}function a1(r,n,o){var h=r==null?0:r.length;return h?(o&&typeof o!="number"&&ir(r,n,o)?(n=0,o=h):(n=n==null?0:Le(n),o=o===t?h:Le(o)),Ar(r,n,o)):[]}function o1(r,n){return na(r,n)}function c1(r,n,o){return qo(r,n,be(o,2))}function u1(r,n){var o=r==null?0:r.length;if(o){var h=na(r,n);if(h<o&&qr(r[h],n))return h}return-1}function h1(r,n){return na(r,n,!0)}function l1(r,n,o){return qo(r,n,be(o,2),!0)}function f1(r,n){var o=r==null?0:r.length;if(o){var h=na(r,n,!0)-1;if(qr(r[h],n))return h}return-1}function p1(r){return r&&r.length?mh(r):[]}function d1(r,n){return r&&r.length?mh(r,be(n,2)):[]}function g1(r){var n=r==null?0:r.length;return n?Ar(r,1,n):[]}function _1(r,n,o){return r&&r.length?(n=o||n===t?1:Le(n),Ar(r,0,n<0?0:n)):[]}function y1(r,n,o){var h=r==null?0:r.length;return h?(n=o||n===t?1:Le(n),n=h-n,Ar(r,n<0?0:n,h)):[]}function v1(r,n){return r&&r.length?sa(r,be(n,3),!1,!0):[]}function b1(r,n){return r&&r.length?sa(r,be(n,3)):[]}var m1=Ke(function(r){return mi(Gt(r,1,At,!0))}),w1=Ke(function(r){var n=Tr(r);return At(n)&&(n=t),mi(Gt(r,1,At,!0),be(n,2))}),E1=Ke(function(r){var n=Tr(r);return n=typeof n=="function"?n:t,mi(Gt(r,1,At,!0),t,n)});function D1(r){return r&&r.length?mi(r):[]}function S1(r,n){return r&&r.length?mi(r,be(n,2)):[]}function I1(r,n){return n=typeof n=="function"?n:t,r&&r.length?mi(r,t,n):[]}function nc(r){if(!(r&&r.length))return[];var n=0;return r=gi(r,function(o){if(At(o))return n=Bt(o.length,n),!0}),wo(n,function(o){return yt(r,vo(o))})}function al(r,n){if(!(r&&r.length))return[];var o=nc(r);return n==null?o:yt(o,function(h){return Kt(n,t,h)})}var x1=Ke(function(r,n){return At(r)?qn(r,n):[]}),O1=Ke(function(r){return Ho(gi(r,At))}),P1=Ke(function(r){var n=Tr(r);return At(n)&&(n=t),Ho(gi(r,At),be(n,2))}),C1=Ke(function(r){var n=Tr(r);return n=typeof n=="function"?n:t,Ho(gi(r,At),t,n)}),A1=Ke(nc);function T1(r,n){return Sh(r||[],n||[],Mn)}function N1(r,n){return Sh(r||[],n||[],Bn)}var R1=Ke(function(r){var n=r.length,o=n>1?r[n-1]:t;return o=typeof o=="function"?(r.pop(),o):t,al(r,o)});function ol(r){var n=y(r);return n.__chain__=!0,n}function $1(r,n){return n(r),r}function da(r,n){return n(r)}var F1=oi(function(r){var n=r.length,o=n?r[0]:0,h=this.__wrapped__,d=function(v){return Co(v,r)};return n>1||this.__actions__.length||!(h instanceof Ye)||!ci(o)?this.thru(d):(h=h.slice(o,+o+(n?1:0)),h.__actions__.push({func:da,args:[d],thisArg:t}),new Pr(h,this.__chain__).thru(function(v){return n&&!v.length&&v.push(t),v}))});function U1(){return ol(this)}function j1(){return new Pr(this.value(),this.__chain__)}function L1(){this.__values__===t&&(this.__values__=wl(this.value()));var r=this.__index__>=this.__values__.length,n=r?t:this.__values__[this.__index__++];return{done:r,value:n}}function M1(){return this}function q1(r){for(var n,o=this;o instanceof Qs;){var h=el(o);h.__index__=0,h.__values__=t,n?d.__wrapped__=h:n=h;var d=h;o=o.__wrapped__}return d.__wrapped__=r,n}function z1(){var r=this.__wrapped__;if(r instanceof Ye){var n=r;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:da,args:[ic],thisArg:t}),new Pr(n,this.__chain__)}return this.thru(ic)}function H1(){return Dh(this.__wrapped__,this.__actions__)}var B1=aa(function(r,n,o){nt.call(r,o)?++r[o]:si(r,o,1)});function K1(r,n,o){var h=Ne(r)?Uu:$g;return o&&ir(r,n,o)&&(n=t),h(r,be(n,3))}function V1(r,n){var o=Ne(r)?gi:ah;return o(r,be(n,3))}var k1=$h(tl),G1=$h(rl);function W1(r,n){return Gt(ga(r,n),1)}function Y1(r,n){return Gt(ga(r,n),te)}function J1(r,n,o){return o=o===t?1:Le(o),Gt(ga(r,n),o)}function cl(r,n){var o=Ne(r)?xr:bi;return o(r,be(n,3))}function ul(r,n){var o=Ne(r)?gd:sh;return o(r,be(n,3))}var X1=aa(function(r,n,o){nt.call(r,o)?r[o].push(n):si(r,o,[n])});function Z1(r,n,o,h){r=fr(r)?r:mn(r),o=o&&!h?Le(o):0;var d=r.length;return o<0&&(o=Bt(d+o,0)),ma(r)?o<=d&&r.indexOf(n,o)>-1:!!d&&cn(r,n,o)>-1}var Q1=Ke(function(r,n,o){var h=-1,d=typeof n=="function",v=fr(r)?B(r.length):[];return bi(r,function(D){v[++h]=d?Kt(n,D,o):zn(D,n,o)}),v}),e_=aa(function(r,n,o){si(r,o,n)});function ga(r,n){var o=Ne(r)?yt:fh;return o(r,be(n,3))}function t_(r,n,o,h){return r==null?[]:(Ne(n)||(n=n==null?[]:[n]),o=h?t:o,Ne(o)||(o=o==null?[]:[o]),_h(r,n,o))}var r_=aa(function(r,n,o){r[o?0:1].push(n)},function(){return[[],[]]});function i_(r,n,o){var h=Ne(r)?_o:qu,d=arguments.length<3;return h(r,be(n,4),o,d,bi)}function n_(r,n,o){var h=Ne(r)?_d:qu,d=arguments.length<3;return h(r,be(n,4),o,d,sh)}function s_(r,n){var o=Ne(r)?gi:ah;return o(r,va(be(n,3)))}function a_(r){var n=Ne(r)?th:Zg;return n(r)}function o_(r,n,o){(o?ir(r,n,o):n===t)?n=1:n=Le(n);var h=Ne(r)?Cg:Qg;return h(r,n)}function c_(r){var n=Ne(r)?Ag:t0;return n(r)}function u_(r){if(r==null)return 0;if(fr(r))return ma(r)?hn(r):r.length;var n=Xt(r);return n==Se||n==Ie?r.size:Fo(r).length}function h_(r,n,o){var h=Ne(r)?yo:r0;return o&&ir(r,n,o)&&(n=t),h(r,be(n,3))}var l_=Ke(function(r,n){if(r==null)return[];var o=n.length;return o>1&&ir(r,n[0],n[1])?n=[]:o>2&&ir(n[0],n[1],n[2])&&(n=[n[0]]),_h(r,Gt(n,1),[])}),_a=Vd||function(){return Xe.Date.now()};function f_(r,n){if(typeof n!="function")throw new Or(p);return r=Le(r),function(){if(--r<1)return n.apply(this,arguments)}}function hl(r,n,o){return n=o?t:n,n=r&&n==null?r.length:n,ai(r,u,t,t,t,t,n)}function ll(r,n){var o;if(typeof n!="function")throw new Or(p);return r=Le(r),function(){return--r>0&&(o=n.apply(this,arguments)),r<=1&&(n=t),o}}var sc=Ke(function(r,n,o){var h=J;if(o.length){var d=yi(o,vn(sc));h|=O}return ai(r,h,n,o,d)}),fl=Ke(function(r,n,o){var h=J|se;if(o.length){var d=yi(o,vn(fl));h|=O}return ai(n,h,r,o,d)});function pl(r,n,o){n=o?t:n;var h=ai(r,j,t,t,t,t,t,n);return h.placeholder=pl.placeholder,h}function dl(r,n,o){n=o?t:n;var h=ai(r,S,t,t,t,t,t,n);return h.placeholder=dl.placeholder,h}function gl(r,n,o){var h,d,v,D,P,L,Y=0,X=!1,Q=!1,oe=!0;if(typeof r!="function")throw new Or(p);n=Nr(n)||0,bt(o)&&(X=!!o.leading,Q="maxWait"in o,v=Q?Bt(Nr(o.maxWait)||0,n):v,oe="trailing"in o?!!o.trailing:oe);function _e(Tt){var zr=h,li=d;return h=d=t,Y=Tt,D=r.apply(li,zr),D}function we(Tt){return Y=Tt,P=kn(Ge,n),X?_e(Tt):D}function ze(Tt){var zr=Tt-L,li=Tt-Y,$l=n-zr;return Q?Jt($l,v-li):$l}function Ee(Tt){var zr=Tt-L,li=Tt-Y;return L===t||zr>=n||zr<0||Q&&li>=v}function Ge(){var Tt=_a();if(Ee(Tt))return Ze(Tt);P=kn(Ge,ze(Tt))}function Ze(Tt){return P=t,oe&&h?_e(Tt):(h=d=t,D)}function wr(){P!==t&&Ih(P),Y=0,h=L=d=P=t}function nr(){return P===t?D:Ze(_a())}function Er(){var Tt=_a(),zr=Ee(Tt);if(h=arguments,d=this,L=Tt,zr){if(P===t)return we(L);if(Q)return Ih(P),P=kn(Ge,n),_e(L)}return P===t&&(P=kn(Ge,n)),D}return Er.cancel=wr,Er.flush=nr,Er}var p_=Ke(function(r,n){return nh(r,1,n)}),d_=Ke(function(r,n,o){return nh(r,Nr(n)||0,o)});function g_(r){return ai(r,K)}function ya(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new Or(p);var o=function(){var h=arguments,d=n?n.apply(this,h):h[0],v=o.cache;if(v.has(d))return v.get(d);var D=r.apply(this,h);return o.cache=v.set(d,D)||v,D};return o.cache=new(ya.Cache||ni),o}ya.Cache=ni;function va(r){if(typeof r!="function")throw new Or(p);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}function __(r){return ll(2,r)}var y_=i0(function(r,n){n=n.length==1&&Ne(n[0])?yt(n[0],vr(be())):yt(Gt(n,1),vr(be()));var o=n.length;return Ke(function(h){for(var d=-1,v=Jt(h.length,o);++d<v;)h[d]=n[d].call(this,h[d]);return Kt(r,this,h)})}),ac=Ke(function(r,n){var o=yi(n,vn(ac));return ai(r,O,t,n,o)}),_l=Ke(function(r,n){var o=yi(n,vn(_l));return ai(r,m,t,n,o)}),v_=oi(function(r,n){return ai(r,b,t,t,t,n)});function b_(r,n){if(typeof r!="function")throw new Or(p);return n=n===t?n:Le(n),Ke(r,n)}function m_(r,n){if(typeof r!="function")throw new Or(p);return n=n==null?0:Bt(Le(n),0),Ke(function(o){var h=o[n],d=Ei(o,0,n);return h&&_i(d,h),Kt(r,this,d)})}function w_(r,n,o){var h=!0,d=!0;if(typeof r!="function")throw new Or(p);return bt(o)&&(h="leading"in o?!!o.leading:h,d="trailing"in o?!!o.trailing:d),gl(r,n,{leading:h,maxWait:n,trailing:d})}function E_(r){return hl(r,1)}function D_(r,n){return ac(Ko(n),r)}function S_(){if(!arguments.length)return[];var r=arguments[0];return Ne(r)?r:[r]}function I_(r){return Cr(r,C)}function x_(r,n){return n=typeof n=="function"?n:t,Cr(r,C,n)}function O_(r){return Cr(r,A|C)}function P_(r,n){return n=typeof n=="function"?n:t,Cr(r,A|C,n)}function C_(r,n){return n==null||ih(r,n,Vt(n))}function qr(r,n){return r===n||r!==r&&n!==n}var A_=ha(No),T_=ha(function(r,n){return r>=n}),Ki=uh(function(){return arguments}())?uh:function(r){return xt(r)&&nt.call(r,"callee")&&!Yu.call(r,"callee")},Ne=B.isArray,N_=tr?vr(tr):qg;function fr(r){return r!=null&&ba(r.length)&&!ui(r)}function At(r){return xt(r)&&fr(r)}function R_(r){return r===!0||r===!1||xt(r)&&rr(r)==M}var Di=Gd||yc,$_=jr?vr(jr):zg;function F_(r){return xt(r)&&r.nodeType===1&&!Gn(r)}function U_(r){if(r==null)return!0;if(fr(r)&&(Ne(r)||typeof r=="string"||typeof r.splice=="function"||Di(r)||bn(r)||Ki(r)))return!r.length;var n=Xt(r);if(n==Se||n==Ie)return!r.size;if(Vn(r))return!Fo(r).length;for(var o in r)if(nt.call(r,o))return!1;return!0}function j_(r,n){return Hn(r,n)}function L_(r,n,o){o=typeof o=="function"?o:t;var h=o?o(r,n):t;return h===t?Hn(r,n,t,o):!!h}function oc(r){if(!xt(r))return!1;var n=rr(r);return n==x||n==l||typeof r.message=="string"&&typeof r.name=="string"&&!Gn(r)}function M_(r){return typeof r=="number"&&Xu(r)}function ui(r){if(!bt(r))return!1;var n=rr(r);return n==ne||n==fe||n==q||n==dt}function yl(r){return typeof r=="number"&&r==Le(r)}function ba(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=G}function bt(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}function xt(r){return r!=null&&typeof r=="object"}var vl=Ir?vr(Ir):Bg;function q_(r,n){return r===n||$o(r,n,Xo(n))}function z_(r,n,o){return o=typeof o=="function"?o:t,$o(r,n,Xo(n),o)}function H_(r){return bl(r)&&r!=+r}function B_(r){if(x0(r))throw new Ae(c);return hh(r)}function K_(r){return r===null}function V_(r){return r==null}function bl(r){return typeof r=="number"||xt(r)&&rr(r)==He}function Gn(r){if(!xt(r)||rr(r)!=je)return!1;var n=ks(r);if(n===null)return!0;var o=nt.call(n,"constructor")&&n.constructor;return typeof o=="function"&&o instanceof o&&Hs.call(o)==zd}var cc=Vr?vr(Vr):Kg;function k_(r){return yl(r)&&r>=-G&&r<=G}var ml=Nn?vr(Nn):Vg;function ma(r){return typeof r=="string"||!Ne(r)&&xt(r)&&rr(r)==Re}function mr(r){return typeof r=="symbol"||xt(r)&&rr(r)==$e}var bn=Ui?vr(Ui):kg;function G_(r){return r===t}function W_(r){return xt(r)&&Xt(r)==Pe}function Y_(r){return xt(r)&&rr(r)==Fe}var J_=ha(Uo),X_=ha(function(r,n){return r<=n});function wl(r){if(!r)return[];if(fr(r))return ma(r)?Lr(r):lr(r);if($n&&r[$n])return Cd(r[$n]());var n=Xt(r),o=n==Se?Do:n==Ie?Ms:mn;return o(r)}function hi(r){if(!r)return r===0?r:0;if(r=Nr(r),r===te||r===-te){var n=r<0?-1:1;return n*ee}return r===r?r:0}function Le(r){var n=hi(r),o=n%1;return n===n?o?n-o:n:0}function El(r){return r?qi(Le(r),0,re):0}function Nr(r){if(typeof r=="number")return r;if(mr(r))return W;if(bt(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=bt(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=zu(r);var o=Xa.test(r);return o||Qa.test(r)?Te(r.slice(2),o?2:8):Ja.test(r)?W:+r}function Dl(r){return Gr(r,pr(r))}function Z_(r){return r?qi(Le(r),-G,G):r===0?r:0}function it(r){return r==null?"":br(r)}var Q_=_n(function(r,n){if(Vn(n)||fr(n)){Gr(n,Vt(n),r);return}for(var o in n)nt.call(n,o)&&Mn(r,o,n[o])}),Sl=_n(function(r,n){Gr(n,pr(n),r)}),wa=_n(function(r,n,o,h){Gr(n,pr(n),r,h)}),ey=_n(function(r,n,o,h){Gr(n,Vt(n),r,h)}),ty=oi(Co);function ry(r,n){var o=gn(r);return n==null?o:rh(o,n)}var iy=Ke(function(r,n){r=ut(r);var o=-1,h=n.length,d=h>2?n[2]:t;for(d&&ir(n[0],n[1],d)&&(h=1);++o<h;)for(var v=n[o],D=pr(v),P=-1,L=D.length;++P<L;){var Y=D[P],X=r[Y];(X===t||qr(X,fn[Y])&&!nt.call(r,Y))&&(r[Y]=v[Y])}return r}),ny=Ke(function(r){return r.push(t,zh),Kt(Il,t,r)});function sy(r,n){return ju(r,be(n,3),kr)}function ay(r,n){return ju(r,be(n,3),To)}function oy(r,n){return r==null?r:Ao(r,be(n,3),pr)}function cy(r,n){return r==null?r:oh(r,be(n,3),pr)}function uy(r,n){return r&&kr(r,be(n,3))}function hy(r,n){return r&&To(r,be(n,3))}function ly(r){return r==null?[]:ra(r,Vt(r))}function fy(r){return r==null?[]:ra(r,pr(r))}function uc(r,n,o){var h=r==null?t:zi(r,n);return h===t?o:h}function py(r,n){return r!=null&&Kh(r,n,Ug)}function hc(r,n){return r!=null&&Kh(r,n,jg)}var dy=Uh(function(r,n,o){n!=null&&typeof n.toString!="function"&&(n=Bs.call(n)),r[n]=o},fc(dr)),gy=Uh(function(r,n,o){n!=null&&typeof n.toString!="function"&&(n=Bs.call(n)),nt.call(r,n)?r[n].push(o):r[n]=[o]},be),_y=Ke(zn);function Vt(r){return fr(r)?eh(r):Fo(r)}function pr(r){return fr(r)?eh(r,!0):Gg(r)}function yy(r,n){var o={};return n=be(n,3),kr(r,function(h,d,v){si(o,n(h,d,v),h)}),o}function vy(r,n){var o={};return n=be(n,3),kr(r,function(h,d,v){si(o,d,n(h,d,v))}),o}var by=_n(function(r,n,o){ia(r,n,o)}),Il=_n(function(r,n,o,h){ia(r,n,o,h)}),my=oi(function(r,n){var o={};if(r==null)return o;var h=!1;n=yt(n,function(v){return v=wi(v,r),h||(h=v.length>1),v}),Gr(r,Yo(r),o),h&&(o=Cr(o,A|I|C,d0));for(var d=n.length;d--;)zo(o,n[d]);return o});function wy(r,n){return xl(r,va(be(n)))}var Ey=oi(function(r,n){return r==null?{}:Yg(r,n)});function xl(r,n){if(r==null)return{};var o=yt(Yo(r),function(h){return[h]});return n=be(n),yh(r,o,function(h,d){return n(h,d[0])})}function Dy(r,n,o){n=wi(n,r);var h=-1,d=n.length;for(d||(d=1,r=t);++h<d;){var v=r==null?t:r[Wr(n[h])];v===t&&(h=d,v=o),r=ui(v)?v.call(r):v}return r}function Sy(r,n,o){return r==null?r:Bn(r,n,o)}function Iy(r,n,o,h){return h=typeof h=="function"?h:t,r==null?r:Bn(r,n,o,h)}var Ol=Mh(Vt),Pl=Mh(pr);function xy(r,n,o){var h=Ne(r),d=h||Di(r)||bn(r);if(n=be(n,4),o==null){var v=r&&r.constructor;d?o=h?new v:[]:bt(r)?o=ui(v)?gn(ks(r)):{}:o={}}return(d?xr:kr)(r,function(D,P,L){return n(o,D,P,L)}),o}function Oy(r,n){return r==null?!0:zo(r,n)}function Py(r,n,o){return r==null?r:Eh(r,n,Ko(o))}function Cy(r,n,o,h){return h=typeof h=="function"?h:t,r==null?r:Eh(r,n,Ko(o),h)}function mn(r){return r==null?[]:Eo(r,Vt(r))}function Ay(r){return r==null?[]:Eo(r,pr(r))}function Ty(r,n,o){return o===t&&(o=n,n=t),o!==t&&(o=Nr(o),o=o===o?o:0),n!==t&&(n=Nr(n),n=n===n?n:0),qi(Nr(r),n,o)}function Ny(r,n,o){return n=hi(n),o===t?(o=n,n=0):o=hi(o),r=Nr(r),Lg(r,n,o)}function Ry(r,n,o){if(o&&typeof o!="boolean"&&ir(r,n,o)&&(n=o=t),o===t&&(typeof n=="boolean"?(o=n,n=t):typeof r=="boolean"&&(o=r,r=t)),r===t&&n===t?(r=0,n=1):(r=hi(r),n===t?(n=r,r=0):n=hi(n)),r>n){var h=r;r=n,n=h}if(o||r%1||n%1){var d=Zu();return Jt(r+d*(n-r+ot("1e-"+((d+"").length-1))),n)}return Lo(r,n)}var $y=yn(function(r,n,o){return n=n.toLowerCase(),r+(o?Cl(n):n)});function Cl(r){return lc(it(r).toLowerCase())}function Al(r){return r=it(r),r&&r.replace(ti,Sd).replace(fo,"")}function Fy(r,n,o){r=it(r),n=br(n);var h=r.length;o=o===t?h:qi(Le(o),0,h);var d=o;return o-=n.length,o>=0&&r.slice(o,d)==n}function Uy(r){return r=it(r),r&&gt.test(r)?r.replace(Ti,Id):r}function jy(r){return r=it(r),r&&Ut.test(r)?r.replace(Dt,"\\$&"):r}var Ly=yn(function(r,n,o){return r+(o?"-":"")+n.toLowerCase()}),My=yn(function(r,n,o){return r+(o?" ":"")+n.toLowerCase()}),qy=Rh("toLowerCase");function zy(r,n,o){r=it(r),n=Le(n);var h=n?hn(r):0;if(!n||h>=n)return r;var d=(n-h)/2;return ua(Js(d),o)+r+ua(Ys(d),o)}function Hy(r,n,o){r=it(r),n=Le(n);var h=n?hn(r):0;return n&&h<n?r+ua(n-h,o):r}function By(r,n,o){r=it(r),n=Le(n);var h=n?hn(r):0;return n&&h<n?ua(n-h,o)+r:r}function Ky(r,n,o){return o||n==null?n=0:n&&(n=+n),Xd(it(r).replace(St,""),n||0)}function Vy(r,n,o){return(o?ir(r,n,o):n===t)?n=1:n=Le(n),Mo(it(r),n)}function ky(){var r=arguments,n=it(r[0]);return r.length<3?n:n.replace(r[1],r[2])}var Gy=yn(function(r,n,o){return r+(o?"_":"")+n.toLowerCase()});function Wy(r,n,o){return o&&typeof o!="number"&&ir(r,n,o)&&(n=o=t),o=o===t?re:o>>>0,o?(r=it(r),r&&(typeof n=="string"||n!=null&&!cc(n))&&(n=br(n),!n&&un(r))?Ei(Lr(r),0,o):r.split(n,o)):[]}var Yy=yn(function(r,n,o){return r+(o?" ":"")+lc(n)});function Jy(r,n,o){return r=it(r),o=o==null?0:qi(Le(o),0,r.length),n=br(n),r.slice(o,o+n.length)==n}function Xy(r,n,o){var h=y.templateSettings;o&&ir(r,n,o)&&(n=t),r=it(r),n=wa({},n,h,qh);var d=wa({},n.imports,h.imports,qh),v=Vt(d),D=Eo(d,v),P,L,Y=0,X=n.interpolate||en,Q="__p += '",oe=So((n.escape||en).source+"|"+X.source+"|"+(X===vt?Ya:en).source+"|"+(n.evaluate||en).source+"|$","g"),_e="//# sourceURL="+(nt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++po+"]")+`
`;r.replace(oe,function(Ee,Ge,Ze,wr,nr,Er){return Ze||(Ze=wr),Q+=r.slice(Y,Er).replace(to,xd),Ge&&(P=!0,Q+=`' +
__e(`+Ge+`) +
'`),nr&&(L=!0,Q+=`';
`+nr+`;
__p += '`),Ze&&(Q+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),Y=Er+Ee.length,Ee}),Q+=`';
`;var we=nt.call(n,"variable")&&n.variable;if(!we)Q=`with (obj) {
`+Q+`
}
`;else if(Ga.test(we))throw new Ae(f);Q=(L?Q.replace(Br,""):Q).replace(er,"$1").replace(ei,"$1;"),Q="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Q+`return __p
}`;var ze=Nl(function(){return rt(v,_e+"return "+Q).apply(t,D)});if(ze.source=Q,oc(ze))throw ze;return ze}function Zy(r){return it(r).toLowerCase()}function Qy(r){return it(r).toUpperCase()}function ev(r,n,o){if(r=it(r),r&&(o||n===t))return zu(r);if(!r||!(n=br(n)))return r;var h=Lr(r),d=Lr(n),v=Hu(h,d),D=Bu(h,d)+1;return Ei(h,v,D).join("")}function tv(r,n,o){if(r=it(r),r&&(o||n===t))return r.slice(0,Vu(r)+1);if(!r||!(n=br(n)))return r;var h=Lr(r),d=Bu(h,Lr(n))+1;return Ei(h,0,d).join("")}function rv(r,n,o){if(r=it(r),r&&(o||n===t))return r.replace(St,"");if(!r||!(n=br(n)))return r;var h=Lr(r),d=Hu(h,Lr(n));return Ei(h,d).join("")}function iv(r,n){var o=k,h=ae;if(bt(n)){var d="separator"in n?n.separator:d;o="length"in n?Le(n.length):o,h="omission"in n?br(n.omission):h}r=it(r);var v=r.length;if(un(r)){var D=Lr(r);v=D.length}if(o>=v)return r;var P=o-hn(h);if(P<1)return h;var L=D?Ei(D,0,P).join(""):r.slice(0,P);if(d===t)return L+h;if(D&&(P+=L.length-P),cc(d)){if(r.slice(P).search(d)){var Y,X=L;for(d.global||(d=So(d.source,it(Sr.exec(d))+"g")),d.lastIndex=0;Y=d.exec(X);)var Q=Y.index;L=L.slice(0,Q===t?P:Q)}}else if(r.indexOf(br(d),P)!=P){var oe=L.lastIndexOf(d);oe>-1&&(L=L.slice(0,oe))}return L+h}function nv(r){return r=it(r),r&&mt.test(r)?r.replace(pi,Rd):r}var sv=yn(function(r,n,o){return r+(o?" ":"")+n.toUpperCase()}),lc=Rh("toUpperCase");function Tl(r,n,o){return r=it(r),n=o?t:n,n===t?Pd(r)?Ud(r):bd(r):r.match(n)||[]}var Nl=Ke(function(r,n){try{return Kt(r,t,n)}catch(o){return oc(o)?o:new Ae(o)}}),av=oi(function(r,n){return xr(n,function(o){o=Wr(o),si(r,o,sc(r[o],r))}),r});function ov(r){var n=r==null?0:r.length,o=be();return r=n?yt(r,function(h){if(typeof h[1]!="function")throw new Or(p);return[o(h[0]),h[1]]}):[],Ke(function(h){for(var d=-1;++d<n;){var v=r[d];if(Kt(v[0],this,h))return Kt(v[1],this,h)}})}function cv(r){return Rg(Cr(r,A))}function fc(r){return function(){return r}}function uv(r,n){return r==null||r!==r?n:r}var hv=Fh(),lv=Fh(!0);function dr(r){return r}function pc(r){return lh(typeof r=="function"?r:Cr(r,A))}function fv(r){return ph(Cr(r,A))}function pv(r,n){return dh(r,Cr(n,A))}var dv=Ke(function(r,n){return function(o){return zn(o,r,n)}}),gv=Ke(function(r,n){return function(o){return zn(r,o,n)}});function dc(r,n,o){var h=Vt(n),d=ra(n,h);o==null&&!(bt(n)&&(d.length||!h.length))&&(o=n,n=r,r=this,d=ra(n,Vt(n)));var v=!(bt(o)&&"chain"in o)||!!o.chain,D=ui(r);return xr(d,function(P){var L=n[P];r[P]=L,D&&(r.prototype[P]=function(){var Y=this.__chain__;if(v||Y){var X=r(this.__wrapped__),Q=X.__actions__=lr(this.__actions__);return Q.push({func:L,args:arguments,thisArg:r}),X.__chain__=Y,X}return L.apply(r,_i([this.value()],arguments))})}),r}function _v(){return Xe._===this&&(Xe._=Hd),this}function gc(){}function yv(r){return r=Le(r),Ke(function(n){return gh(n,r)})}var vv=ko(yt),bv=ko(Uu),mv=ko(yo);function Rl(r){return Qo(r)?vo(Wr(r)):Jg(r)}function wv(r){return function(n){return r==null?t:zi(r,n)}}var Ev=jh(),Dv=jh(!0);function _c(){return[]}function yc(){return!1}function Sv(){return{}}function Iv(){return""}function xv(){return!0}function Ov(r,n){if(r=Le(r),r<1||r>G)return[];var o=re,h=Jt(r,re);n=be(n),r-=re;for(var d=wo(h,n);++o<r;)n(o);return d}function Pv(r){return Ne(r)?yt(r,Wr):mr(r)?[r]:lr(Qh(it(r)))}function Cv(r){var n=++qd;return it(r)+n}var Av=ca(function(r,n){return r+n},0),Tv=Go("ceil"),Nv=ca(function(r,n){return r/n},1),Rv=Go("floor");function $v(r){return r&&r.length?ta(r,dr,No):t}function Fv(r,n){return r&&r.length?ta(r,be(n,2),No):t}function Uv(r){return Mu(r,dr)}function jv(r,n){return Mu(r,be(n,2))}function Lv(r){return r&&r.length?ta(r,dr,Uo):t}function Mv(r,n){return r&&r.length?ta(r,be(n,2),Uo):t}var qv=ca(function(r,n){return r*n},1),zv=Go("round"),Hv=ca(function(r,n){return r-n},0);function Bv(r){return r&&r.length?mo(r,dr):0}function Kv(r,n){return r&&r.length?mo(r,be(n,2)):0}return y.after=f_,y.ary=hl,y.assign=Q_,y.assignIn=Sl,y.assignInWith=wa,y.assignWith=ey,y.at=ty,y.before=ll,y.bind=sc,y.bindAll=av,y.bindKey=fl,y.castArray=S_,y.chain=ol,y.chunk=R0,y.compact=$0,y.concat=F0,y.cond=ov,y.conforms=cv,y.constant=fc,y.countBy=B1,y.create=ry,y.curry=pl,y.curryRight=dl,y.debounce=gl,y.defaults=iy,y.defaultsDeep=ny,y.defer=p_,y.delay=d_,y.difference=U0,y.differenceBy=j0,y.differenceWith=L0,y.drop=M0,y.dropRight=q0,y.dropRightWhile=z0,y.dropWhile=H0,y.fill=B0,y.filter=V1,y.flatMap=W1,y.flatMapDeep=Y1,y.flatMapDepth=J1,y.flatten=il,y.flattenDeep=K0,y.flattenDepth=V0,y.flip=g_,y.flow=hv,y.flowRight=lv,y.fromPairs=k0,y.functions=ly,y.functionsIn=fy,y.groupBy=X1,y.initial=W0,y.intersection=Y0,y.intersectionBy=J0,y.intersectionWith=X0,y.invert=dy,y.invertBy=gy,y.invokeMap=Q1,y.iteratee=pc,y.keyBy=e_,y.keys=Vt,y.keysIn=pr,y.map=ga,y.mapKeys=yy,y.mapValues=vy,y.matches=fv,y.matchesProperty=pv,y.memoize=ya,y.merge=by,y.mergeWith=Il,y.method=dv,y.methodOf=gv,y.mixin=dc,y.negate=va,y.nthArg=yv,y.omit=my,y.omitBy=wy,y.once=__,y.orderBy=t_,y.over=vv,y.overArgs=y_,y.overEvery=bv,y.overSome=mv,y.partial=ac,y.partialRight=_l,y.partition=r_,y.pick=Ey,y.pickBy=xl,y.property=Rl,y.propertyOf=wv,y.pull=t1,y.pullAll=sl,y.pullAllBy=r1,y.pullAllWith=i1,y.pullAt=n1,y.range=Ev,y.rangeRight=Dv,y.rearg=v_,y.reject=s_,y.remove=s1,y.rest=b_,y.reverse=ic,y.sampleSize=o_,y.set=Sy,y.setWith=Iy,y.shuffle=c_,y.slice=a1,y.sortBy=l_,y.sortedUniq=p1,y.sortedUniqBy=d1,y.split=Wy,y.spread=m_,y.tail=g1,y.take=_1,y.takeRight=y1,y.takeRightWhile=v1,y.takeWhile=b1,y.tap=$1,y.throttle=w_,y.thru=da,y.toArray=wl,y.toPairs=Ol,y.toPairsIn=Pl,y.toPath=Pv,y.toPlainObject=Dl,y.transform=xy,y.unary=E_,y.union=m1,y.unionBy=w1,y.unionWith=E1,y.uniq=D1,y.uniqBy=S1,y.uniqWith=I1,y.unset=Oy,y.unzip=nc,y.unzipWith=al,y.update=Py,y.updateWith=Cy,y.values=mn,y.valuesIn=Ay,y.without=x1,y.words=Tl,y.wrap=D_,y.xor=O1,y.xorBy=P1,y.xorWith=C1,y.zip=A1,y.zipObject=T1,y.zipObjectDeep=N1,y.zipWith=R1,y.entries=Ol,y.entriesIn=Pl,y.extend=Sl,y.extendWith=wa,dc(y,y),y.add=Av,y.attempt=Nl,y.camelCase=$y,y.capitalize=Cl,y.ceil=Tv,y.clamp=Ty,y.clone=I_,y.cloneDeep=O_,y.cloneDeepWith=P_,y.cloneWith=x_,y.conformsTo=C_,y.deburr=Al,y.defaultTo=uv,y.divide=Nv,y.endsWith=Fy,y.eq=qr,y.escape=Uy,y.escapeRegExp=jy,y.every=K1,y.find=k1,y.findIndex=tl,y.findKey=sy,y.findLast=G1,y.findLastIndex=rl,y.findLastKey=ay,y.floor=Rv,y.forEach=cl,y.forEachRight=ul,y.forIn=oy,y.forInRight=cy,y.forOwn=uy,y.forOwnRight=hy,y.get=uc,y.gt=A_,y.gte=T_,y.has=py,y.hasIn=hc,y.head=nl,y.identity=dr,y.includes=Z1,y.indexOf=G0,y.inRange=Ny,y.invoke=_y,y.isArguments=Ki,y.isArray=Ne,y.isArrayBuffer=N_,y.isArrayLike=fr,y.isArrayLikeObject=At,y.isBoolean=R_,y.isBuffer=Di,y.isDate=$_,y.isElement=F_,y.isEmpty=U_,y.isEqual=j_,y.isEqualWith=L_,y.isError=oc,y.isFinite=M_,y.isFunction=ui,y.isInteger=yl,y.isLength=ba,y.isMap=vl,y.isMatch=q_,y.isMatchWith=z_,y.isNaN=H_,y.isNative=B_,y.isNil=V_,y.isNull=K_,y.isNumber=bl,y.isObject=bt,y.isObjectLike=xt,y.isPlainObject=Gn,y.isRegExp=cc,y.isSafeInteger=k_,y.isSet=ml,y.isString=ma,y.isSymbol=mr,y.isTypedArray=bn,y.isUndefined=G_,y.isWeakMap=W_,y.isWeakSet=Y_,y.join=Z0,y.kebabCase=Ly,y.last=Tr,y.lastIndexOf=Q0,y.lowerCase=My,y.lowerFirst=qy,y.lt=J_,y.lte=X_,y.max=$v,y.maxBy=Fv,y.mean=Uv,y.meanBy=jv,y.min=Lv,y.minBy=Mv,y.stubArray=_c,y.stubFalse=yc,y.stubObject=Sv,y.stubString=Iv,y.stubTrue=xv,y.multiply=qv,y.nth=e1,y.noConflict=_v,y.noop=gc,y.now=_a,y.pad=zy,y.padEnd=Hy,y.padStart=By,y.parseInt=Ky,y.random=Ry,y.reduce=i_,y.reduceRight=n_,y.repeat=Vy,y.replace=ky,y.result=Dy,y.round=zv,y.runInContext=F,y.sample=a_,y.size=u_,y.snakeCase=Gy,y.some=h_,y.sortedIndex=o1,y.sortedIndexBy=c1,y.sortedIndexOf=u1,y.sortedLastIndex=h1,y.sortedLastIndexBy=l1,y.sortedLastIndexOf=f1,y.startCase=Yy,y.startsWith=Jy,y.subtract=Hv,y.sum=Bv,y.sumBy=Kv,y.template=Xy,y.times=Ov,y.toFinite=hi,y.toInteger=Le,y.toLength=El,y.toLower=Zy,y.toNumber=Nr,y.toSafeInteger=Z_,y.toString=it,y.toUpper=Qy,y.trim=ev,y.trimEnd=tv,y.trimStart=rv,y.truncate=iv,y.unescape=nv,y.uniqueId=Cv,y.upperCase=sv,y.upperFirst=lc,y.each=cl,y.eachRight=ul,y.first=nl,dc(y,function(){var r={};return kr(y,function(n,o){nt.call(y.prototype,o)||(r[o]=n)}),r}(),{chain:!1}),y.VERSION=s,xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){y[r].placeholder=y}),xr(["drop","take"],function(r,n){Ye.prototype[r]=function(o){o=o===t?1:Bt(Le(o),0);var h=this.__filtered__&&!n?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Jt(o,h.__takeCount__):h.__views__.push({size:Jt(o,re),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(o){return this.reverse()[r](o).reverse()}}),xr(["filter","map","takeWhile"],function(r,n){var o=n+1,h=o==R||o==le;Ye.prototype[r]=function(d){var v=this.clone();return v.__iteratees__.push({iteratee:be(d,3),type:o}),v.__filtered__=v.__filtered__||h,v}}),xr(["head","last"],function(r,n){var o="take"+(n?"Right":"");Ye.prototype[r]=function(){return this[o](1).value()[0]}}),xr(["initial","tail"],function(r,n){var o="drop"+(n?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[o](1)}}),Ye.prototype.compact=function(){return this.filter(dr)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,n){return typeof r=="function"?new Ye(this):this.map(function(o){return zn(o,r,n)})}),Ye.prototype.reject=function(r){return this.filter(va(be(r)))},Ye.prototype.slice=function(r,n){r=Le(r);var o=this;return o.__filtered__&&(r>0||n<0)?new Ye(o):(r<0?o=o.takeRight(-r):r&&(o=o.drop(r)),n!==t&&(n=Le(n),o=n<0?o.dropRight(-n):o.take(n-r)),o)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(re)},kr(Ye.prototype,function(r,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),d=y[h?"take"+(n=="last"?"Right":""):n],v=h||/^find/.test(n);d&&(y.prototype[n]=function(){var D=this.__wrapped__,P=h?[1]:arguments,L=D instanceof Ye,Y=P[0],X=L||Ne(D),Q=function(Ge){var Ze=d.apply(y,_i([Ge],P));return h&&oe?Ze[0]:Ze};X&&o&&typeof Y=="function"&&Y.length!=1&&(L=X=!1);var oe=this.__chain__,_e=!!this.__actions__.length,we=v&&!oe,ze=L&&!_e;if(!v&&X){D=ze?D:new Ye(this);var Ee=r.apply(D,P);return Ee.__actions__.push({func:da,args:[Q],thisArg:t}),new Pr(Ee,oe)}return we&&ze?r.apply(this,P):(Ee=this.thru(Q),we?h?Ee.value()[0]:Ee.value():Ee)})}),xr(["pop","push","shift","sort","splice","unshift"],function(r){var n=qs[r],o=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);y.prototype[r]=function(){var d=arguments;if(h&&!this.__chain__){var v=this.value();return n.apply(Ne(v)?v:[],d)}return this[o](function(D){return n.apply(Ne(D)?D:[],d)})}}),kr(Ye.prototype,function(r,n){var o=y[n];if(o){var h=o.name+"";nt.call(dn,h)||(dn[h]=[]),dn[h].push({name:n,func:o})}}),dn[oa(t,se).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=ng,Ye.prototype.reverse=sg,Ye.prototype.value=ag,y.prototype.at=F1,y.prototype.chain=U1,y.prototype.commit=j1,y.prototype.next=L1,y.prototype.plant=q1,y.prototype.reverse=z1,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=H1,y.prototype.first=y.prototype.head,$n&&(y.prototype[$n]=M1),y},ln=jd();Ct?((Ct.exports=ln)._=ln,ct._=ln):Xe._=ln}).call(ss)})(cu,cu.exports);var v5=Object.defineProperty,b5=Object.defineProperties,m5=Object.getOwnPropertyDescriptors,Yf=Object.getOwnPropertySymbols,w5=Object.prototype.hasOwnProperty,E5=Object.prototype.propertyIsEnumerable,Jf=(i,e,t)=>e in i?v5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Da=(i,e)=>{for(var t in e||(e={}))w5.call(e,t)&&Jf(i,t,e[t]);if(Yf)for(var t of Yf(e))E5.call(e,t)&&Jf(i,t,e[t]);return i},D5=(i,e)=>b5(i,m5(e));function Fr(i,e,t){let s;const a=uu(i);return e.rpcMap&&(s=e.rpcMap[a]),s||(s=`${y5}?chainId=eip155:${a}&projectId=${t}`),s}function uu(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function fd(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function S5(i,e){const t=Object.keys(e.namespaces).filter(a=>a.includes(i));if(!t.length)return[];const s=[];return t.forEach(a=>{const c=e.namespaces[a].accounts;s.push(...c)}),s}function I5(i={},e={}){const t=Xf(i),s=Xf(e);return cu.exports.merge(t,s)}function Xf(i){var e,t,s,a;const c={};if(!In(i))return c;for(const[p,f]of Object.entries(i)){const _=Pu(p)?[p]:f.chains,g=f.methods||[],w=f.events||[],A=f.rpcMap||{},I=xa(p);c[I]=D5(Da(Da({},c[I]),f),{chains:Dc(_,(e=c[I])==null?void 0:e.chains),methods:Dc(g,(t=c[I])==null?void 0:t.methods),events:Dc(w,(s=c[I])==null?void 0:s.events),rpcMap:Da(Da({},A),(a=c[I])==null?void 0:a.rpcMap)})}return c}function x5(i){return i.includes(":")?i.split(":")[2]:i}function O5(i){const e={};for(const[t,s]of Object.entries(i)){const a=s.methods||[],c=s.events||[],p=s.accounts||[],f=Pu(t)?[t]:s.chains?s.chains:fd(s.accounts);e[t]={chains:f,methods:a,events:c,accounts:p}}return e}const pd={},Rt=i=>pd[i],Fc=(i,e)=>{pd[i]=e};class P5{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Fr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Fr(e,this.namespace);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class C5{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=uu(e);if(!this.httpProviders[s]){const a=t||Fr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!a)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,a)}this.chainId=s,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||Fr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const a=uu(t);e[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let a=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const c=parseInt(a,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:a}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class A5{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Fr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Fr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class T5{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Fr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Fr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class N5{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class R5{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Fr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Fr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class $5{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Fr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Fr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}var F5=Object.defineProperty,U5=Object.defineProperties,j5=Object.getOwnPropertyDescriptors,Zf=Object.getOwnPropertySymbols,L5=Object.prototype.hasOwnProperty,M5=Object.prototype.propertyIsEnumerable,Qf=(i,e,t)=>e in i?F5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Sa=(i,e)=>{for(var t in e||(e={}))L5.call(e,t)&&Qf(i,t,e[t]);if(Zf)for(var t of Zf(e))M5.call(e,t)&&Qf(i,t,e[t]);return i},Uc=(i,e)=>U5(i,j5(e));class $u{constructor(e){this.events=new fu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Gf})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new $u(e);return await t.initialize(),t}async request(e,t){const[s,a]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Sa({},e),chainId:`${s}:${a}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(a=>t(null,a)).catch(a=>t(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Nt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:a}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await a().then(c=>{this.session=c,this.namespaces||(this.namespaces=O5(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==hd)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,a]=this.validateChain(e);this.getProvider(s).setDefaultChain(a,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Zr(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await p5.init({logger:this.providerOpts.logger||Gf,relayUrl:this.providerOpts.relayUrl||d5,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>xa(t)))];Fc("client",this.client),Fc("events",this.events),Fc("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=S5(t,this.session),a=fd(s),c=I5(this.namespaces,this.optionalNamespaces),p=Uc(Sa({},c[t]),{accounts:s,chains:a});switch(t){case"eip155":this.rpcProviders[t]=new C5({namespace:p});break;case"solana":this.rpcProviders[t]=new A5({namespace:p});break;case"cosmos":this.rpcProviders[t]=new T5({namespace:p});break;case"polkadot":this.rpcProviders[t]=new P5({namespace:p});break;case"cip34":this.rpcProviders[t]=new N5({namespace:p});break;case"elrond":this.rpcProviders[t]=new R5({namespace:p});break;case"multiversx":this.rpcProviders[t]=new $5({namespace:p});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const a=s.data;a&&Zr(a)&&this.events.emit("accountsChanged",a.map(x5))}else s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:a}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=Uc(Sa({},c),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Uc(Sa({},Nt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Ai.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:a}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=a,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(p=>xa(p)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const a=xa(Object.keys(this.namespaces)[0]),c=this.rpcProviders[a].getDefaultChain();return[a,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[a,c]=this.validateChain(e);t||this.getProvider(a).setDefaultChain(c),((s=this.namespaces[a])!=null?s:this.namespaces[`${a}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Wf}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Wf}/${e}`)}}const q5=$u,z5="wc",H5="ethereum_provider",B5=`${z5}@2:${H5}:`,K5="https://rpc.walletconnect.com/v1/",hu=["eth_sendTransaction","personal_sign"],V5=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],lu=["chainChanged","accountsChanged"],k5=["message","disconnect","connect"];var G5=Object.defineProperty,W5=Object.defineProperties,Y5=Object.getOwnPropertyDescriptors,ep=Object.getOwnPropertySymbols,J5=Object.prototype.hasOwnProperty,X5=Object.prototype.propertyIsEnumerable,tp=(i,e,t)=>e in i?G5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,as=(i,e)=>{for(var t in e||(e={}))J5.call(e,t)&&tp(i,t,e[t]);if(ep)for(var t of ep(e))X5.call(e,t)&&tp(i,t,e[t]);return i},rp=(i,e)=>W5(i,Y5(e));function Fa(i){return Number(i[0].split(":")[1])}function jc(i){return`0x${i.toString(16)}`}function Z5(i){const{chains:e,optionalChains:t,methods:s,optionalMethods:a,events:c,optionalEvents:p,rpcMap:f}=i;if(!Zr(e))throw new Error("Invalid chains");const _={chains:e,methods:s||hu,events:c||lu,rpcMap:as({},e.length?{[Fa(e)]:f[Fa(e)]}:{})},g=c==null?void 0:c.filter(C=>!lu.includes(C)),w=s==null?void 0:s.filter(C=>!hu.includes(C));if(!t&&!p&&!a&&!(g!=null&&g.length)&&!(w!=null&&w.length))return{required:e.length?_:void 0};const A=(g==null?void 0:g.length)&&(w==null?void 0:w.length)||!t,I={chains:[...new Set(A?_.chains.concat(t||[]):t)],methods:[...new Set(_.methods.concat(a!=null&&a.length?a:V5))],events:[...new Set(_.events.concat(p||k5))],rpcMap:f};return{required:e.length?_:void 0,optional:t.length?I:void 0}}class Fu{constructor(){this.events=new Qr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=B5,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Fu;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=Z5(this.rpc);try{const a=await new Promise(async(p,f)=>{var _;this.rpc.showQrModal&&((_=this.modal)==null||_.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(rp(as({namespaces:as({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(g=>{p(g)}).catch(g=>{f(new Error(g.message))})});if(!a)return;this.setChainIds(this.rpc.chains);const c=yw(a.namespaces,[this.namespace]);this.setAccounts(c),this.events.emit("connect",{chainId:jc(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",jc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",rp(as({},Nt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",jc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,a]=e.split(":");return{chainId:`${t}:${s}`,address:a}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const a=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],p=a.concat(c);if(!p.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const f=a.length?(e==null?void 0:e.methods)||hu:[],_=a.length?(e==null?void 0:e.events)||lu:[],g=(e==null?void 0:e.optionalMethods)||[],w=(e==null?void 0:e.optionalEvents)||[],A=(e==null?void 0:e.rpcMap)||this.buildRpcMap(p,e.projectId),I=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:a==null?void 0:a.map(C=>this.formatChainId(C)),optionalChains:c.map(C=>this.formatChainId(C)),methods:f,events:_,optionalMethods:g,optionalEvents:w,rpcMap:A,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:I,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(a=>{s[a]=this.getRpcUrl(a,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Fa(this.rpc.chains):Fa(this.rpc.optionalChains),this.signer=await q5.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await Gv(()=>import("./index-fe13d067.js").then(a=>a.i),["assets/index-fe13d067.js","assets/index-7485d795.js","assets/index-8b8e171c.css"]);t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(as({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:a}=e;t&&Zr(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(a==null?void 0:a[c])||this.getRpcUrl(c)})),s&&Zr(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(a==null?void 0:a[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${K5}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const cS=Fu;export{cS as EthereumProvider,k5 as OPTIONAL_EVENTS,V5 as OPTIONAL_METHODS,lu as REQUIRED_EVENTS,hu as REQUIRED_METHODS,Fu as default};
